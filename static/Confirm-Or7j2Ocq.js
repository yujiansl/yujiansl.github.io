import{_ as N}from"./empty-BiNgvBdS.js";import{l as T,aD as D,aE as k,r as p,d as B,ah as _,ap as S,m as u,p as f,q as e,T as r,U as a,O as c,S as R,P as E,M as I,R as M,u as V,aF as q,aG as P}from"./vue-C87Wc4A0.js";import{p as U,h as F}from"./index-Cap7k8T_.js";import{w as b,_ as G}from"./index-c78MVIZI.js";import{E as H}from"./element-CD5rsoqi.js";import"//at.alicdn.com/t/c/font_4557022_0o7l3b0t8egq.js";import"./vxe-sm_XFqm0.js";const m=n=>(q("data-v-30ccf77c"),n=n(),P(),n),K={class:"confirm pb-40"},L={class:"top-balance base-box flex flex-wrap ml-40 mr-40 mt-20 items-center"},O={class:"balance-item pr-80"},Z=m(()=>e("div",{class:"item-title"},"结算账单总额 (USD)",-1)),j={class:"item-price mt-10 mb-8"},z={class:"balance-item pr-80"},J=m(()=>e("div",{class:"item-title"},"结算订单笔数",-1)),Q={class:"item-price mt-10 mb-8"},W={class:"balance-item"},X=m(()=>e("div",{class:"item-title"},"账单范围时间",-1)),Y={class:"mt-10 mb-8"},$={class:"order base-box p-36 ml-40 mr-40 mt-20"},ee={class:"table-wrapper"},te=m(()=>e("div",{class:"flex-center flex-col h-full",style:{height:"300px"}},[e("span",null,[e("img",{src:N,alt:""})]),e("span",{class:"custom-empty-text"},"暂无数据")],-1)),se={key:0},ae=T({__name:"Confirm",setup(n){const h=D(),w=k(),i=p(!1),d=p(!1),s=p({rows:[],settlementTotal:"",startsAt:"",totalCount:"",endsAt:""}),y=async()=>{try{i.value=!0;let t=await U(h.query.processNo);t.data&&t.data.sheet&&(s.value=t.data.sheet||{rows:[]}),i.value=!1}catch{i.value=!1}},v=t=>(t=b(t),(t==null?void 0:t.substring(0,10))||""),g=async()=>{try{d.value=!0;let t=await F(h.query.processNo);H.success("生成账单成功"),console.log(t,"res"),d.value=!1,w.back()}catch{d.value=!1}};return B(()=>{y()}),(t,oe)=>{const x=_("el-button"),o=_("el-table-column"),C=_("el-table"),A=S("loading");return u(),f("div",K,[e("div",L,[e("div",O,[Z,e("div",j,r(s.value.settlementTotal),1)]),e("div",z,[J,e("div",Q,r(s.value.totalCount),1)]),e("div",W,[X,e("div",Y,r(v(s.value.startsAt)+"至"+v(s.value.endsAt)),1)]),a(x,{type:"primary",loading:d.value,style:{height:"50px"},onClick:g,class:"flex-center"},{default:c(()=>[R(" 确认并生成账单 ")]),_:1},8,["loading"])]),e("div",$,[e("div",ee,[E((u(),I(C,{data:s.value.rows,style:{width:"100%"}},{empty:c(()=>[te]),default:c(()=>[a(o,{prop:"orderNo",label:"订单号","min-width":"300"}),a(o,{prop:"virtualMerchantName",label:"站点名称","min-width":"150"}),a(o,{prop:"orderAmount",label:"订单金额","min-width":"260"},{default:c(l=>[l.row.orderAmount?(u(),f("span",se,r(l.row.orderAmount+" "+l.row.orderCurrency.symbol),1)):M("",!0)]),_:1}),a(o,{prop:"payway",label:"支付方式","min-width":"180"}),a(o,{prop:"orderTime",label:"下单时间","min-width":"180"},{default:c(l=>[e("div",null,r(V(b)(l.row.orderTime)),1)]),_:1})]),_:1},8,["data"])),[[A,i.value]])])])])}}}),pe=G(ae,[["__scopeId","data-v-30ccf77c"]]);export{pe as default};
