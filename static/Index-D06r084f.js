import{l as j,d as G,r as p,m as z,p as q,q as a,u as A,J as Q,aE as Y,Z as D,z as ee,ah as S,F as te,a7 as ae,U as i,O as v,P as N,V as W,M as Z,T as $,R as H,S as K,aF as le,aG as oe}from"./vue-BtEXIrqH.js";import{_ as se}from"./LIKU-logo-BbnHVERV.js";import{_ as J,f as ne,h as ce}from"./index-bEAPwbJM.js";import{l as ie}from"./commonFn-DSVr4W-5.js";import{E as P}from"./element-BbMnn7tA.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const re=["width","height"],de="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",ue=6,pe=50,fe=j({__name:"Captcha",props:["width","height","letters","length","minFontSize","maxFontSize"],emits:["cb"],setup(w,{expose:E,emit:y}){const L=y;G(()=>{e.value=k.value.getContext("2d"),R()});const u=w,{width:f=120,height:_=46,letters:C=de,length:b=4,minFontSize:I=20,maxFontSize:t=30}=u,k=p(null),e=p(),n=(s,c)=>Math.floor(Math.random()*(c-s)+s),m=(s,c)=>`rgb(${n(s,c)}, ${n(s,c)}, ${n(s,c)})`,O=()=>{let s="";for(let c=0;c<b;c+=1){const x=n(I,t),o=t-I+6,l=(f-o*b)/(b+1),r=(c+1)*l+o*c,h=n(22,_),g=n(-40,40),M=n(0,C.length),T=C[M];e.value.textBaseline="alphabetic",e.value.font=`${x}px Simhei`,e.value.fillStyle=m(60,150),e.value.save(),e.value.translate(r,h),e.value.rotate(g*Math.PI/180),e.value.fillText(T,0,0),e.value.restore(),s+=T}L("cb",s)},U=()=>{for(let s=0;s<ue;s+=1){const c=n(0,e.value.canvas.clientWidth),x=n(0,e.value.canvas.clientHeight),o=n(0,e.value.canvas.clientWidth),l=n(0,e.value.canvas.clientHeight);e.value.beginPath(),e.value.moveTo(c,x),e.value.lineTo(o,l),e.value.lineWidth=1,e.value.strokeStyle=m(150,250),e.value.stroke()}},B=()=>{for(let s=0;s<pe;s+=1){const c=n(0,e.value.canvas.clientWidth),x=n(0,e.value.canvas.clientHeight),o=n(1,2);e.value.beginPath(),e.value.arc(c,x,o,0,2*Math.PI),e.value.fillStyle=m(100,200),e.value.fill()}},R=()=>{e.value.fillStyle=m(200,230),e.value.fillRect(0,0,f,_),O(),U(),B()},F=()=>{R()};return E({handleClick:F}),(s,c)=>(z(),q("div",{class:"captcha",style:Q({width:A(f)+"px",height:A(_)+"px"})},[a("canvas",{onClick:F,ref_key:"verifyCodeRef",ref:k,width:A(f)-2,height:A(_)-2},null,8,re)],4))}}),me=J(fe,[["__scopeId","data-v-bf1d3727"]]),V=w=>(le("data-v-a6b25757"),w=w(),oe(),w),he={class:"login flex-center"},ve={class:"left h-full hidden-md-and-down flex-center flex-wrap flex-col"},_e=V(()=>a("img",{src:se},null,-1)),ge=[_e],xe={class:"flex-1 ml-38px"},we={class:"item-title mb-12"},ye={class:"item-text"},Ce={class:"right flex-center"},Se={class:"max-410"},be=V(()=>a("span",null,"登录 LIKU",-1)),Ie={class:"relative w-full"},ke={class:"flex w-full justify-end forget-pass cursor-pointer absolute bottom-0 right-0 b--30"},ze=V(()=>a("div",{id:"cf-turnstile",style:{width:"100%"}},null,-1)),Ve={class:"relative w-full"},Re={class:"flex w-full"},Fe={class:"mt-90 flex-center w-full cursor-pointer contact-btn"},Te=V(()=>a("span",{class:"ml-5"},"联系客服",-1)),Ae=V(()=>a("div",{class:"copyright mt-86"},"© LIKU Pay 2024",-1)),Ee=j({__name:"Index",setup(w){const E=[{title:"全球收单",text:"全球超过 160 多个国家和支付方式",icon:"icon-quanqiushoudan"},{title:"多场景支付",text:"轻松实现多场景支付，满足多样化业务收款需求",icon:"icon-duochangjingzhifu"},{title:"自由结算",text:"财务透明无隐藏费用，支持法币和加密货币实时结算",icon:"icon-ziyoujiesuan1"},{title:"安全稳定",text:"最严密的加密支付架构，为您的资金安全保驾护航",icon:"icon-anquanwending"}],y=p(!1),L=Y(),u=p(!1),f=p("发送验证码"),_=p(!1),C=p(!1),b=p("large"),I=p(),t=D({email:"admin",password:"2Tc88LkO3KFyNz1C",code:"",captcha:"",challengeId:""}),k=p(""),e=p();let n,m;const U=D({email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{validator:(o,l,r)=>{l===""?r(new Error("请输入验证码")):l.toUpperCase()!==k.value?(r(new Error("验证码错误")),e.value.handleClick()):r()},trigger:"blur"}]}),B=o=>{k.value=o},R=async o=>{if(y.value){P.error("正在加载人机验证");return}o&&await o.validate((l,r)=>{if(l){const h={email:t.email,password:t.password,code:t.code,challengeId:t.challengeId,captcha:t.captcha};_.value=!0,ne().login(h).then(()=>{L.push({path:"/"})}).catch(()=>{}).finally(()=>{_.value=!1})}})},F=()=>{m&&m(),t.code="",u.value=!u.value,u.value||s()},s=async()=>{n=()=>{y.value=!0;try{turnstile.render("#cf-turnstile",{sitekey:"0x4AAAAAAAIxM-Ap2BkOCl-B",width:"100%",theme:"light",language:"zh-tw",callback:function(o){t.code=o,y.value=!1}})}catch(o){y.value=!1,u.value=!0,console.error(o,"turnstile is not exist")}},m=()=>{console.debug("_turnstileCb remove");try{turnstile.remove()}catch(o){console.error(o,"turnstile is not exist")}},await ie(),n()},c=async()=>{if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.email)){P({message:"邮箱格式不正确",type:"error"});return}if(C.value)return;C.value=!0,f.value="发送中";const l={challengeType:"EmailConfirmCode",email:t.email};try{const r=await ce(l);t.challengeId=r.data.challengeId,P({message:"验证码已发送",type:"success"}),f.value=60;const h=window.setInterval(()=>{f.value--<=0&&(f.value="发送验证码",C.value=!1,window.clearInterval(h))},1e3)}catch(r){console.log("getCaptcha",r)}},x=()=>{window.location.href="https://pay.liku.io"};return G(()=>{}),ee(()=>{m&&m()}),(o,l)=>{const r=S("SvgIcon"),h=S("el-input"),g=S("el-form-item"),M=S("el-button"),T=S("router-link"),X=S("el-form");return z(),q("div",he,[a("div",ve,[a("div",{class:"logo cursor-pointer",onClick:x},ge),(z(),q(te,null,ae(E,d=>a("div",{class:"item flex-center",key:d.title},[i(r,{name:d.icon,size:"60px",color:"#FE9A88"},null,8,["name"]),a("div",xe,[a("div",we,$(d.title),1),a("div",ye,$(d.text),1)])])),64))]),a("div",Ce,[a("div",Se,[a("div",{class:"top-text"},[be,a("span",{onClick:F,class:"cursor-pointer"},"使用邮箱验证登录")]),i(X,{ref_key:"ruleFormRef",ref:I,style:{"max-width":"450px"},model:t,rules:U,class:"demo-ruleForm",size:b.value},{default:v(()=>[i(g,{prop:"email"},{default:v(()=>[i(h,{modelValue:t.email,"onUpdate:modelValue":l[0]||(l[0]=d=>t.email=d),placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1}),N(i(g,{prop:"password"},{default:v(()=>[a("div",Ie,[i(h,{type:"password",modelValue:t.password,"onUpdate:modelValue":l[1]||(l[1]=d=>t.password=d),"show-password":"",placeholder:"请输入密码"},null,8,["modelValue"]),N(a("div",ke," 忘记密码？ ",512),[[W,!u.value]])])]),_:1},512),[[W,!u.value]]),N(i(g,{prop:"code"},{default:v(()=>[ze]),_:1},512),[[W,!u.value]]),u.value?(z(),Z(g,{key:0,prop:"code"},{default:v(()=>[a("div",Ve,[i(h,{modelValue:t.code,"onUpdate:modelValue":l[2]||(l[2]=d=>t.code=d),placeholder:"请输入邮箱验证码"},null,8,["modelValue"]),a("span",{onClick:c,class:"absolute abs-center"},$(f.value),1)])]),_:1})):H("",!0),u.value?(z(),Z(g,{key:1,prop:"captcha"},{default:v(()=>[a("div",Re,[i(h,{class:"flex-1",modelValue:t.captcha,"onUpdate:modelValue":l[3]||(l[3]=d=>t.captcha=d),placeholder:"请输入验证码"},null,8,["modelValue"]),i(me,{ref_key:"captchaRef",ref:e,class:"ml-14",onCb:B},null,512)])]),_:1})):H("",!0),i(g,null,{default:v(()=>[i(M,{type:"primary",loading:_.value,class:"w-full",onClick:l[4]||(l[4]=d=>R(I.value))},{default:v(()=>[K(" 立即登录 ")]),_:1},8,["loading"]),i(T,{class:"mt-20 w-full register-btn",to:{name:"register"}},{default:v(()=>[K(" 没有账号？去注册")]),_:1}),a("div",Fe,[i(r,{name:"icon-lianxikefu"}),Te])]),_:1})]),_:1},8,["model","rules","size"]),Ae])])])}}}),Pe=J(Ee,[["__scopeId","data-v-a6b25757"]]);export{Pe as default};
