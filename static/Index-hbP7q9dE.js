import{l as $,aE as F,aK as q,Z as S,r as k,ah as p,m as f,M as I,O as l,q as s,U as e,S as N,aF as D,aG as T,aL as W,d as X,b as Y,ap as ee,p as y,a8 as te,P as le,u as _,T as U}from"./vue-C87Wc4A0.js";import{_ as ae}from"./empty-BiNgvBdS.js";import{u as oe}from"./useTable-CVQ-UVVt.js";import{P as z,_ as P,w as re}from"./index-c78MVIZI.js";import{F as A}from"./Index-BU8kA-XB.js";import{V as B}from"./index-BZHf1ii5.js";import{E,n as ne}from"./element-CD5rsoqi.js";import"//at.alicdn.com/t/c/font_4557022_0o7l3b0t8egq.js";import"./vxe-sm_XFqm0.js";import"./LIKU-logo-CHqxCLOK.js";function se(n){return z({url:"/partner/create",method:"post",data:n})}function ie(n){return z({url:"/partner/update",method:"post",data:n})}const de=n=>(D("data-v-ecf3a310"),n=n(),T(),n),ue={class:"base-box detail-box tabs-title"},pe=de(()=>s("div",{class:"input-tips"},"例：千5 请输入 5",-1)),me={class:"flex-center w-full mt-30"},ce=$({__name:"Create",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){F();const V=q(n,"modelValue"),o=S({partnerRate:"",partnerName:"",isEnabled:!0,remark:"",challengeResult:""}),d=S({partnerRate:[{required:!0,message:"请输入返佣比例",trigger:"blur"}],partnerName:[{required:!0,message:"请输入合作伙伴名称",trigger:"blur"}]}),b=k(),g=async u=>{u&&(await u.validate((t,m)=>{if(t)try{se(o).then(r=>{setTimeout(()=>{window.location.reload()},1e3),E.success("保存成功")}).catch(r=>{E.error("操作失败"),console.error(r)})}catch(r){console.error(r)}else console.error("error submit!",m)}),o.challengeResult="")};return(u,t)=>{const m=p("el-input"),r=p("el-form-item"),R=p("el-switch"),C=p("el-button"),w=p("el-form");return f(),I(A,{modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=a=>V.value=a),title:"创建新合作伙伴"},{default:l(()=>[s("div",ue,[e(w,{ref_key:"partnerFormRef",ref:b,"label-position":"top",rules:d,"label-width":"auto",model:o,class:"mt-24"},{default:l(()=>[e(r,{prop:"partnerName",label:"合作伙伴名称"},{default:l(()=>[e(m,{modelValue:o.partnerName,"onUpdate:modelValue":t[0]||(t[0]=a=>o.partnerName=a),placeholder:"请输入合作伙伴名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(r,{prop:"partnerRate",label:"返佣比例"},{default:l(()=>[e(m,{modelValue:o.partnerRate,"onUpdate:modelValue":t[1]||(t[1]=a=>o.partnerRate=a),placeholder:"请输入返佣比例",maxlength:"30"},null,8,["modelValue"]),pe]),_:1}),e(r,{prop:"isEnabled",label:"账号状态"},{default:l(()=>[e(R,{modelValue:o.isEnabled,"onUpdate:modelValue":t[2]||(t[2]=a=>o.isEnabled=a),"inline-prompt":"","active-text":"正常","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),e(r,{prop:"remark",label:"合作伙伴备注"},{default:l(()=>[e(m,{modelValue:o.remark,"onUpdate:modelValue":t[3]||(t[3]=a=>o.remark=a),placeholder:"备注信息仅管理员可见",type:"textarea",rows:3,maxlength:"50"},null,8,["modelValue"])]),_:1}),e(B,{modelValue:o.challengeResult,"onUpdate:modelValue":t[4]||(t[4]=a=>o.challengeResult=a)},null,8,["modelValue"]),e(r,null,{default:l(()=>[s("div",me,[e(C,{type:"primary",onClick:t[5]||(t[5]=a=>g(b.value))},{default:l(()=>[N("保存")]),_:1})])]),_:1})]),_:1},8,["rules","model"])])]),_:1},8,["modelValue"])}}}),_e=P(ce,[["__scopeId","data-v-ecf3a310"]]),fe=n=>(D("data-v-68305511"),n=n(),T(),n),be={class:"base-box detail-box tabs-title"},ve=fe(()=>s("div",{class:"input-tips"},"例：千5 请输入 5",-1)),he={class:"flex-center w-full mt-30"},we=$({__name:"Detail",props:W({row:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){F();const V=q(n,"modelValue"),o=n,d=S({id:"",partnerRate:"",partnerName:"",isEnabled:"",remark:"",challengeResult:""}),b=k(),g=async u=>{u&&(await u.validate((t,m)=>{if(t)try{d.id=o.row.id,d.partnerName=o.row.partnerName,d.partnerRate=o.row.partnerRate,d.isEnabled=o.row.isEnabled,d.remark=o.row.remark,ie(d).then(r=>{setTimeout(()=>{window.location.reload()},1e3),E.success("保存成功")}).catch(r=>{E.error("操作失败"),console.error(r)})}catch(r){console.error(r)}else console.error("error submit!",m)}),d.challengeResult="")};return(u,t)=>{const m=p("el-input"),r=p("el-form-item"),R=p("el-switch"),C=p("el-button"),w=p("el-form");return f(),I(A,{modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=a=>V.value=a),title:"管理合作伙伴"},{default:l(()=>[s("div",be,[e(w,{ref_key:"partnerFormRef",ref:b,"label-position":"top","label-width":"auto",model:d,class:"mt-24"},{default:l(()=>[e(r,{prop:"partnerName",label:"合作伙伴名称"},{default:l(()=>[e(m,{modelValue:u.row.partnerName,"onUpdate:modelValue":t[0]||(t[0]=a=>u.row.partnerName=a),placeholder:"请输入合作伙伴名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(r,{prop:"partnerRate",label:"返佣比例"},{default:l(()=>[e(m,{modelValue:u.row.partnerRate,"onUpdate:modelValue":t[1]||(t[1]=a=>u.row.partnerRate=a),placeholder:"请输入返佣比例",maxlength:"30"},null,8,["modelValue"]),ve]),_:1}),e(r,{prop:"isEnabled",label:"账号状态"},{default:l(()=>[e(R,{modelValue:u.row.isEnabled,"onUpdate:modelValue":t[2]||(t[2]=a=>u.row.isEnabled=a),"inline-prompt":"","active-text":"正常","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),e(r,{prop:"remark",label:"合作伙伴备注"},{default:l(()=>[e(m,{modelValue:u.row.remark,"onUpdate:modelValue":t[3]||(t[3]=a=>u.row.remark=a),placeholder:"备注信息仅管理员可见",type:"textarea",rows:3,maxlength:"50"},null,8,["modelValue"])]),_:1}),e(B,{modelValue:d.challengeResult,"onUpdate:modelValue":t[4]||(t[4]=a=>d.challengeResult=a)},null,8,["modelValue"]),e(r,null,{default:l(()=>[s("div",he,[e(C,{type:"primary",onClick:t[5]||(t[5]=a=>g(b.value))},{default:l(()=>[N("保存")]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])}}}),Ve=P(we,[["__scopeId","data-v-68305511"]]),K=n=>(D("data-v-2485811e"),n=n(),T(),n),ge={class:"top-bar base-box ml-40 mr-40 mt-20"},ye={class:"order base-box p-36 ml-40 mr-40 mt-20"},ke={class:"top-search"},xe={class:"table-wrapper"},Re=K(()=>s("div",{class:"flex-center flex-col h-full",style:{height:"300px"}},[s("span",null,[s("img",{src:ae,alt:""})]),s("span",{class:"custom-empty-text"},"暂无数据")],-1)),Ce={key:0,class:"enabled flex-center"},Ne={key:1,class:"not-enabled flex-center"},Ee={key:0},Ue={key:1},Se={key:0},$e={key:1},Fe={class:"flex"},Ie=["onClick"],De=["onClick"],Te={class:"pager-wrapper mt-32 flex justify-between"},Pe=K(()=>s("div",null,null,-1)),Me=$({__name:"Index",setup(n){const V=k(),o=k({}),d=k(!1),b=k(!1),g=k({}),u=F(),{paginationData:t,handleCurrentChange:m,tableData:r,loadingRef:R,handSearch:C}=oe({searchData:{},url:"/partner/list",method:"post"});function w(){const c=[];for(const v in o.value){const x=o.value[v];x&&c.push({columnName:v,value:x})}C(c)}const a=()=>{o.value={}},O=c=>{u.push({name:"partnerDetail",params:{id:c.id},query:{NAME:c.partnerName}})},J=c=>{g.value=JSON.parse(JSON.stringify(c)),g.value.isEnabled=c.isEnabled==="1",d.value=!0},Z=()=>{b.value=!0};return X(()=>{w()}),Y(d,c=>{c||w()}),(c,v)=>{const x=p("el-button"),j=p("el-input"),M=p("el-form-item"),G=p("el-form"),h=p("el-table-column"),H=p("el-pagination"),L=ee("loading");return f(),y("div",null,[e(_e,{modelValue:b.value,"onUpdate:modelValue":v[0]||(v[0]=i=>b.value=i)},null,8,["modelValue"]),e(Ve,{modelValue:d.value,"onUpdate:modelValue":v[1]||(v[1]=i=>d.value=i),row:g.value},null,8,["modelValue","row"]),s("div",ge,[e(x,{type:"primary",class:"flex-center",onClick:Z},{default:l(()=>[N("创建新合作伙伴")]),_:1})]),s("div",ye,[s("div",ke,[e(G,{inline:!0,model:o.value,class:"demo-form-inline"},{default:l(()=>[e(M,null,{default:l(()=>[e(j,{modelValue:o.value.partnerName,"onUpdate:modelValue":v[2]||(v[2]=i=>o.value.partnerName=i),placeholder:"请输入合作伙伴名称",onKeyup:te(w,["enter"]),maxlength:"30",clearable:""},null,8,["modelValue"])]),_:1}),e(M,null,{default:l(()=>[e(x,{onClick:a},{default:l(()=>[N("重置")]),_:1}),e(x,{type:"primary",onClick:w},{default:l(()=>[N("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),s("div",xe,[le((f(),I(_(ne),{ref_key:"multipleTableRef",ref:V,data:_(r),style:{width:"100%"}},{empty:l(()=>[Re]),default:l(()=>[e(h,{prop:"partnerName",label:"合作伙伴名称","min-width":"140"}),e(h,{prop:"isEnabled",label:"账号状态","min-width":"100"},{default:l(i=>[i.row.isEnabled==="1"?(f(),y("div",Ce,"正常")):(f(),y("div",Ne,"禁用"))]),_:1}),e(h,{prop:"partnerRate",label:"返佣比例","min-width":"100"},{default:l(i=>[i.row.partnerRate==="0"?(f(),y("div",Ee)):(f(),y("div",Ue,U(parseFloat(i.row.partnerRate)/10)+"%",1))]),_:1}),e(h,{prop:"onair",label:"系统未入账","min-width":"100"}),e(h,{prop:"approving",label:"待审核金额","min-width":"100"}),e(h,{prop:"settled",label:"已入账未结算","min-width":"120"}),e(h,{prop:"createdAt",label:"加入时间","min-width":"160"},{default:l(i=>[s("div",null,U(_(re)(i.row.createdAt)),1)]),_:1}),e(h,{prop:"remark",label:"备注","min-width":"140"},{default:l(i=>[i.row.remark?(f(),y("div",Se,U(i.row.remark),1)):(f(),y("div",$e,"-"))]),_:1}),e(h,{prop:"action",label:"操作",fixed:"right",width:"210"},{default:l(i=>[s("div",Fe,[s("div",{class:"action-btn cursor-pointer mr-20",onClick:Q=>O(i.row)},"查看明细",8,Ie),s("div",{class:"action-btn cursor-pointer mr-20",onClick:Q=>J(i.row)},"管理合作伙伴",8,De)])]),_:1})]),_:1},8,["data"])),[[L,_(R)]])]),s("div",Te,[Pe,e(H,{background:"",layout:_(t).layout,"page-sizes":_(t).pageSizes,total:_(t).total,"page-size":_(t).pageSize,currentPage:_(t).currentPage,onCurrentChange:_(m)},null,8,["layout","page-sizes","total","page-size","currentPage","onCurrentChange"])])])])}}}),He=P(Me,[["__scopeId","data-v-2485811e"]]);export{He as default};
