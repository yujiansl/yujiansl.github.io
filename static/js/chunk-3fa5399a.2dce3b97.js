(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fa5399a"],{"635f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-w pt-2 pl-3"},[a("a-breadcrumb",[a("a-breadcrumb-item",[a("a",{on:{click:e.toHome}},[e._v("首頁")])]),a("a-breadcrumb-item",[a("a",{on:{click:e.toPage1}},[e._v(e._s(e.secondMenu.name))])]),a("a-breadcrumb-item",[e.thirdMenu.path?a("a",[e._v(e._s(e.thirdMenu.name))]):e._e()])],1),a("div",{staticClass:"py-1 fw-b fs-18 fc-bl"},[e._v(e._s(e.title))])],1)},r=[],c=(a("b0c0"),a("ac1f"),a("1276"),a("53ca")),o=a("a09f"),i={name:"Breadcrumb",props:{title:{type:String,default:""}},data:function(){return{name1:"",name2:"",path1:"",path2:"",secondMenu:{},thirdMenu:{}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.path,t=e.split("/").length,a=e.split("/");2===t?(this.secondMenu.path="",this.secondMenu.name=this.getName(a[1])):(this.secondMenu.path="/"+a[1]+"/"+a[2],this.secondMenu.name=this.getName(this.secondMenu.path),this.thirdMenu.path=e,this.thirdMenu.name="商户详情")},getName:function(e){return"object"===Object(c["a"])(o["a"][e])?o["a"][e].name:""},toHome:function(){var e=this.$store.getters["account/roles"][0].id||"merchant",t=this.$route.path,a="merchant"===e?"/index":"/adminIndex";t!==a&&this.$router.push({path:a})},toPage1:function(){this.secondMenu.path&&this.$router.push({path:this.secondMenu.path})}}},l=i,s=(a("d54b"),a("0c7c")),u=Object(s["a"])(l,n,r,!1,null,"69611da6",null);t["a"]=u.exports},7037:function(e,t,a){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),e.exports=n},7878:function(e,t,a){a("99af"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("b64b"),a("ac1f"),a("5319"),a("159b");var n=a("7037");function r(e,t){t=t||1;for(var a="\n",c="  ",o="",i=0;i<t;i++)o+=c;var l=!1,s=!1,u="",d="{",m="}";Array.isArray(e)?(l=!0,d="[",m="]",u=e.map((function(c,i){var l="";return"function"==typeof c||("object"==n(c)?(s=!0,l="".concat(a).concat(o).concat(r(c,t+1),",")):"number"==typeof c&&!isNaN(c)||"boolean"==typeof c?l="".concat(c,","):"string"==typeof c&&(l="'".concat(c,"',"))),i==e.length-1?l=l.substring(0,l.length-1):s=!1,l})).join("")):"function"!=typeof e&&"object"==n(e)&&(u=Object.keys(e).map((function(c,i,l){var s=e[c],u="";return"function"==typeof s||("object"==n(s)?u="".concat(a).concat(o).concat(c,": ").concat(r(s,t+1),","):"number"==typeof s&&!isNaN(s)||"boolean"==typeof s?u="".concat(a).concat(o).concat(c,": ").concat(s,","):"string"==typeof s&&(u="".concat(a).concat(o).concat(c,": '").concat(s,"',"))),i==l.length-1&&(u=u.substring(0,u.length-1)),u})).join(""));var f=c.length;return o.length>=f&&(o=o.substring(0,o.length-f)),l&&!s||(m=a+o+m),"".concat(d).concat(u).concat(m)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"0";if(e){var a=e+"";if(-1!==a.indexOf(".")){var n=a.substring(0,a.indexOf(".")).replace(/\B(?=(?:\d{3})+$)/g,","),r=a.substring(a.length,a.indexOf("."));1===r.length?r+="00":2===r.length&&(r+="0");var c=n+r;return c}var o=a.replace(/\B(?=(?:\d{3})+$)/g,",");return o+(t?".00":"")}return t?"0.00":"0"}function o(e){var t=e.data.rows||[],a=[];return t.forEach((function(e){var t={};for(var n in e)t[n]=e[n].text||e[n].value,"timezone"===n&&(t["timeValue"]=e[n].value||"0");a.push(t)})),e.data.list=a,e}e.exports={formatConfig:r,getPriceSeparator:c,tableRowFormat:o}},"7ded":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return s}));a("96cf"),a("1da1");var n=a("b775");function r(e){return Object(n["b"])({url:"/transaction/list",method:"post",data:e})}function c(e){return Object(n["b"])({url:"/traderecord/statistic",method:"get",params:e})}function o(e,t){return Object(n["b"])({url:"/transaction/withdraw".concat(t?"?id="+t:""),method:"post",data:e})}function i(){return Object(n["b"])({url:"/merchant/info",method:"get"})}function l(){return Object(n["b"])({url:"/merchant/balance",method:"get"})}function s(e){return Object(n["b"])({url:"/traderecord/list",method:"post",data:e})}},b6e8:function(e,t,a){},bf5e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("Breadcrumb"),a("div",{staticClass:"top-box flex p-2 jc-sb m-2"},[a("div",{staticClass:"flex fd-c flex-1 ml-3"},[a("div",{staticClass:"fs-18 fw-b mb-2"},[e._v(e._s(e.merInfo["name"]))]),a("a-row",{staticClass:"flex mt-2 fw-w"},[a("a-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[a("div",[e._v("登錄賬號："+e._s(e.merInfo.email))])]),a("a-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[a("div",[e._v("商戶餘額："+e._s(e.getPriceSeparator((e.merBalance.balance||0)/e.merBalance.multiply))+e._s(" "+e.merBalance.currency||!1))])]),a("a-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[a("div",[e._v("註冊時間："+e._s(e.merInfo.createdAt))])])],1)],1)]),a("div",{staticClass:"top-box p-2 mx-2"},[a("div",[a("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addMer.show=!0,e.addMer.title="添加配置"}}},[e._v("添加配置")]),a("a-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:function(t){e.balanceModal.show=!0}}},[e._v("扣减余额")]),a("a-modal",{attrs:{title:e.balanceModal.title,visible:e.balanceModal.show,"confirm-loading":e.balanceModal.loading},on:{ok:e.handleOkBalance,cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("div",{staticClass:"flex jc-fs ai-c"},[a("a-button",{key:"submit",staticClass:"ok-btn",attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.handleOkBalance}},[e._v(" 确认 ")])],1)]),a("a-form",{ref:"form"},[a("div",{staticClass:"modal-item-title"},[e._v("余额")]),a("div",{staticClass:"modal-item-price mb-2"},[e._v(" "+e._s(e.getPriceSeparator((e.merBalance.balance||0)/e.merInfo.multiply))+" "),a("span",[e._v(e._s(e.merBalance.currency))])]),a("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"扣减数量"}},[a("a-input",{attrs:{placeholder:"输入提现数量"},on:{search:function(t){e.balanceForm=e.merBalance.balance}},model:{value:e.balanceForm.value,callback:function(t){e.$set(e.balanceForm,"value",t)},expression:"balanceForm.value"}},[a("div",{staticStyle:{height:"45px"},attrs:{slot:"enterButton"},slot:"enterButton"},[e._v(" 全部数量 ")])])],1),a("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"提现地址"}},[a("a-input",{attrs:{placeholder:"请输入提现地址"},model:{value:e.balanceForm.addr,callback:function(t){e.$set(e.balanceForm,"addr",t)},expression:"balanceForm.addr"}})],1)],1)],2),a("a-modal",{attrs:{title:e.addMer.title,visible:e.addMer.show,"confirm-loading":e.addMer.loading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("div",{staticClass:"flex jc-fs ai-c"},[a("a-button",{key:"submit",staticClass:"ok-btn",attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.handleOk}},[e._v(" 确认 ")])],1)]),a("a-form",{ref:"form"},[a("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"配置名称"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择配置名称",mode:"tags","token-separators":[","]},on:{change:e.changeSelect},model:{value:e.configName,callback:function(t){e.configName=t},expression:"configName"}},e._l(e.configList,(function(t){return a("a-select-option",{key:t.claimType},[e._v(" "+e._s(t.claimType)+" ")])})),1)],1),a("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol,label:"值"}},[a("a-input",{attrs:{placeholder:"请输入值"},model:{value:e.configValue,callback:function(t){e.configValue=t},expression:"configValue"}})],1)],1)],2)],1),a("div",{staticClass:"merchant-table-title"},[e._v("配置列表")]),a("a-table",{attrs:{loading:e.tableLoading,pagination:{pageSize:100},defaultPageSize:"100",columns:e.columns,"data-source":e.data},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("div",{},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editClaim(n)}}},[e._v("编辑")])],1)}}])})],1)],1)},r=[],c=(a("96cf"),a("1da1")),o=a("4703"),i=a("635f"),l=a("7878"),s=a("7ded"),u={name:"MerDetail",mounted:function(){this.init()},components:{Breadcrumb:i["a"]},data:function(){var e={labelCol:{span:24},wrapperCol:{span:24}},t=[{title:"配置名称",dataIndex:"claimType",width:200,key:"claimType",scopedSlots:{customRender:"claimType"}},{title:"值",dataIndex:"claimValue",width:200,key:"claimValue",scopedSlots:{customRender:"claimValue"},merchant:!0},{title:"操作",dataIndex:"action",width:200,fixed:"right",key:"action",scopedSlots:{customRender:"action"},merchant:!0}];return{btnLoading:!1,columns:t,formItemLayout:e,addMer:{title:"添加配置",show:!1,loading:!1},balanceModal:{title:"修改余额",show:!1,loading:!1},data:[],configName:[],configList:[],configValue:"",tableLoading:!1,merId:"",merInfo:{},merBalance:{currency:""},balanceForm:{value:"",addr:""}}},methods:{getPriceSeparator:l["getPriceSeparator"],init:function(){this.merId=this.$route.query.id,this.getMerchantDetail(),this.getMerchantBalance(),this.getConfigList(),this.getTable()},handleOkBalance:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.merBalance.currency&&!(e.merBalance.currency<=0)){t.next=3;break}return e.$message.error("请输入正确的扣减金额"),t.abrupt("return");case 3:return a={address:e.balanceForm.addr,amount:e.balanceForm.value*e.merBalance.multiply,currency:e.merBalance.currency},e.btnLoading=!0,t.prev=5,t.next=8,Object(s["f"])(a,e.$route.query.id);case 8:return e.$message.success("修改成功"),e.balanceForm={},e.balanceModal.show=!1,t.next=13,e.getMerchantBalance();case 13:e.btnLoading=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](5),e.btnLoading=!1;case 19:case"end":return t.stop()}}),t,null,[[5,16]])})))()},getMerchantDetail:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["g"])(e.$route.query.id);case 3:a=t.sent,e.merInfo=a.data,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMerchantBalance:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["f"])(e.$route.query.id);case 3:r=t.sent,e.merBalance=(null===(a=r.data)||void 0===a?void 0:a.items)&&(null===(n=r.data)||void 0===n?void 0:n.items[0])||{currency:""},t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},editClaim:function(e){this.addMer.show=!0,this.addMer.title="编辑",this.configName=[e.claimType],this.configValue=e.claimValue},getConfigList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["c"])();case 3:a=t.sent,e.configList=a.data,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getTable:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query.id,e.tableLoading=!0,t.prev=2,t.next=5,Object(o["h"])(a);case 5:n=t.sent,e.data=n.data,e.tableLoading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),e.tableLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},handleOk:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.configName.length){t.next=3;break}return e.$message.error("请选择或输入配置名称"),t.abrupt("return");case 3:if(e.configValue){t.next=6;break}return e.$message.error("输入配置值"),t.abrupt("return");case 6:return e.btnLoading=!0,t.prev=7,a={claims:[{claimLabel:"",claimType:e.configName[0],claimValue:e.configValue}]},t.next=11,Object(o["m"])(a,e.merId);case 11:return e.$message.success("配置成功"),e.addMer.show=!1,t.next=15,e.getTable();case 15:return t.next=17,e.getConfigList();case 17:e.configValue="",e.configName=[],e.btnLoading=!1,t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](7),e.btnLoading=!1;case 25:case"end":return t.stop()}}),t,null,[[7,22]])})))()},handleCancel:function(){this.addMer.show=!1,this.balanceModal.show=!1},changeSelect:function(e){this.configName=e[e.length-1]?[e[e.length-1]]:[]}}},d=u,m=(a("ef73"),a("0c7c")),f=Object(m["a"])(d,n,r,!1,null,"45aa9699",null);t["default"]=f.exports},d54b:function(e,t,a){"use strict";var n=a("b6e8"),r=a.n(n);r.a},e824:function(e,t,a){},ef73:function(e,t,a){"use strict";var n=a("e824"),r=a.n(n);r.a}}]);