(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Z55w:function(U,f,e){"use strict";e.d(f,"logout",function(){return L}),e.d(f,"login",function(){return A}),e.d(f,"register",function(){return C});var u=e("k1fw"),l=e("qLMh"),m=e("9og8"),h=e("9kvl"),I=e("B7OH"),D=e("vty2"),W=e.n(D),M="2bjP";function L(){return n.apply(this,arguments)}function n(){return n=Object(m.a)(Object(l.a)().mark(function c(){var s;return Object(l.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=I.c.get(),t.abrupt("return",Object(h.e)("oauth2/revoke",{method:"POST",headers:{Authorization:"Basic dWk6dWk="},params:{token:s}}));case 2:case"end":return t.stop()}},c)})),n.apply(this,arguments)}function A(c){return P.apply(this,arguments)}function P(){return P=Object(m.a)(Object(l.a)().mark(function c(s){return Object(l.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.e)("/v1/api/open/auth/login",{method:"POST",headers:{},data:Object(u.a)({},s)}));case 1:case"end":return t.stop()}},c)})),P.apply(this,arguments)}function C(c){return p.apply(this,arguments)}function p(){return p=Object(m.a)(Object(l.a)().mark(function c(s){return Object(l.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.e)("/v1/api/open/auth/signup",{method:"POST",headers:{},data:Object(u.a)({},s)}));case 1:case"end":return t.stop()}},c)})),p.apply(this,arguments)}function G(){return y.apply(this,arguments)}function y(){return y=Object(m.a)(Object(l.a)().mark(function c(){return Object(l.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Object(h.e)("system/menu/router",{method:"GET"}));case 1:case"end":return E.stop()}},c)})),y.apply(this,arguments)}},jwAW:function(U,f,e){"use strict";e.r(f);var u=e("qLMh"),l=e("k1fw"),m=e("9og8"),h=e("tJVT"),I=e("fOrg"),D=e("+KLJ"),W=e("Z55w"),M=e("B7OH"),L=e("ZPOE"),n=e("tL7X"),A=e("VMEa"),P=e("Qurx"),C=e("tneF"),p=e("q1tI"),G=e.n(p),y=e("P52E"),c=e.n(y),s=e("9kvl"),E=e("NFKh"),t=e.n(E),Q=e("tOgl"),j=e.n(Q),a=e("nKUr"),ue=e.n(a),_="LALo",S="HelloWorldUpay00",le=function(O){var b=t.a.enc.Utf8.parse(S),g=t.a.enc.Utf8.parse(O),T=t.a.AES.encrypt(g,b,{mode:t.a.mode.ECB,padding:t.a.pad.Pkcs7});return T.ciphertext.toString().toLowerCase()},ce=function(O){var b=t.a.enc.Utf8.parse(S),g=t.a.AES.decrypt(O,b,{mode:t.a.mode.ECB,padding:t.a.pad.Pkcs7});return t.a.enc.Utf8.stringify(g).toString()},w=function(O){var b=O.content;return Object(a.jsx)(D.a,{style:{marginBottom:24},message:b,type:"error",showIcon:!0,_nk:"".concat(_,"11")})},Y=function(){var O=Object(s.h)("@@initialState"),b=O.refresh,g=O.initialState;n.a.setIntl(Object(s.g)());var T=Object(y.useAliveController)(),q=T.clear,ee=Object(p.useState)(!1),k=Object(h.a)(ee,2),te=k[0],N=k[1],ae=Object(p.useState)({}),$=Object(h.a)(ae,2),F=$[0],re=$[1],_e=Object(p.useState)("account"),ne=Object(h.a)(_e,1),H=ne[0],se=function(){var o=Object(m.a)(Object(u.a)().mark(function d(i){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return N(!0),r.abrupt("return",Object(W.register)({name:i.name,rePassword:i.rePassword,password:"".concat(i.password)}).then(function(){var ie=Object(m.a)(Object(u.a)().mark(function X(x){var K,Z,z;return Object(u.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return K=Object(l.a)(Object(l.a)({},x),{},{roles:x.attributes.roleCodes,permissions:x.attributes.permissions}),v.next=3,q();case 3:return M.d.set(JSON.stringify(K)),M.c.set(K.access_token),Z=s.c.location.query,z=Z.redirect,n.a.success("pages.login.success"),s.c.replace(z||"/"),v.next=10,b();case 10:case"end":return v.stop()}},X)}));return function(X){return ie.apply(this,arguments)}}()).catch(function(){n.a.error("pages.login.failure"),re({status:"error",type:H}),N(!1)}));case 2:case"end":return r.stop()}},d)}));return function(i){return o.apply(this,arguments)}}(),oe=function(){var o=Object(m.a)(Object(u.a)().mark(function d(i){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,se(i);case 2:case"end":return r.stop()}},d)}));return function(i){return o.apply(this,arguments)}}(),J=F.status,V=F.type;return Object(p.useEffect)(function(){var o;document.title=(g==null||((o=g.settings)===null||o===void 0)?void 0:o.title)||"upay"},[g]),Object(a.jsxs)("div",{className:j.a.container,_nk:"".concat(_,"21"),children:[Object(a.jsx)("div",{hidden:!L.b.i18n,className:j.a.lang,"data-lang":!0,_nk:"".concat(_,"22"),children:s.a&&Object(a.jsx)(s.a,{_nk:"".concat(_,"31")})}),Object(a.jsx)("div",{className:j.a.content,_nk:"".concat(_,"23"),children:Object(a.jsxs)("div",{className:j.a.main,_nk:"".concat(_,"24"),children:[Object(a.jsxs)("div",{className:j.a.titleBox,_nk:"".concat(_,"25"),children:[Object(a.jsx)("span",{className:j.a.title,_nk:"".concat(_,"41"),children:"Paye"}),Object(a.jsx)("span",{className:j.a["title-desc"],_nk:"".concat(_,"42"),children:"\u7BA1\u7406\u540E\u53F0"})]}),Object(a.jsxs)(A.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:n.a.text("pages.login.submit")},render:function(d,i){return i.pop()},submitButtonProps:{loading:te,size:"large",style:{width:"100%"}}},onFinish:function(){var o=Object(m.a)(Object(u.a)().mark(function d(i){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,oe(i);case 2:case"end":return r.stop()}},d)}));return function(d){return o.apply(this,arguments)}}(),_nk:"".concat(_,"51"),children:[J==="error"&&V==="account"&&Object(a.jsx)(w,{content:n.a.text("pages.login.accountLogin.errorMessage"),_nk:"".concat(_,"61")}),H==="account"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{name:"name",placeholder:n.a.text("pages.login.username.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.username.required")}],_nk:"".concat(_,"71")}),Object(a.jsx)(P.a.Password,{name:"password",placeholder:n.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.password.required")}],_nk:"".concat(_,"81")}),Object(a.jsx)(P.a.Password,{name:"rePassword",placeholder:n.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.password.required")},function(o){return{validator:function(i,R){var r;return o.getFieldValue("password")!==R&&(r="\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4!"),r&&r.length>0?Promise.reject(r):Promise.resolve()}}}],_nk:"".concat(_,"82")})]}),J==="error"&&V==="mobile"&&Object(a.jsx)(w,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF",_nk:"".concat(_,"62")}),Object(a.jsxs)("div",{style:{marginBottom:24},_nk:"".concat(_,"26"),children:[Object(a.jsx)(C.a,{noStyle:!0,name:"autoLogin",_nk:"".concat(_,"91"),children:n.a.text("pages.login.rememberMe")}),Object(a.jsx)("a",{style:{float:"right"},_nk:"".concat(_,"a1"),children:n.a.text("pages.login.forgotPassword")})]})]})]})})]})};f.default=Y},tOgl:function(U,f,e){U.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",top:"top___1x2PK",header:"header___3Kw-q",logo:"logo___2aK9c",titleBox:"titleBox___3T_HW",title:"title___1Izp8","title-desc":"title-desc___1q-ns",desc:"desc___vFX8U",main:"main___19HXK",icon:"icon___14_b2",other:"other____-JZS",register:"register___3QsXc",prefixIcon:"prefixIcon___2x9jr"}},vty2:function(U,f){var e="v3EN"}}]);
