(window.webpackJsonp=window.webpackJsonp||[]).push([[11,103],{ObQG:function(w,E,e){w.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",titleBox:"titleBox___1OZ7L",title:"title___1-xuF","title-desc":"title-desc___1bGDk",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(w,E,e){"use strict";e.r(E);var k=e("y8nQ"),s=e("Vl3Y"),A=e("miYZ"),j=e("tsqr"),O=e("qLMh"),S=e("k1fw"),L=e("9og8"),x=e("tJVT"),g=e("fOrg"),I=e("+KLJ"),$=e("Z55w"),D=e("B7OH"),W=e("ZPOE"),n=e("tL7X"),N=e("VMEa"),m=e("Qurx"),c=e("tneF"),i=e("q1tI"),h=e.n(i),_=e("P52E"),te=e.n(_),y=e("9kvl"),H=e("Tb/n"),G=e("ObQG"),U=e.n(G),a=e("nKUr"),oe=e.n(a),r="orTG",t=function(C){var o=C.content;return Object(a.jsx)(I.a,{style:{marginBottom:24},message:o,type:"error",showIcon:!0,_nk:"".concat(r,"11")})},ae=function(){var C=Object(y.h)("@@initialState"),o=C.refresh,M=C.initialState,F=h.a.createRef(),ne=Object(i.useState)(""),Z=Object(x.a)(ne,2),J=Z[0],T=Z[1];n.a.setIntl(Object(y.g)());var l=Object(_.useAliveController)(),u=l.clear,B=Object(i.useState)(!1),R=Object(x.a)(B,2),V=R[0],Q=R[1],_e=Object(i.useState)({}),X=Object(x.a)(_e,2),Y=X[0],q=X[1],he=Object(i.useState)("account"),fe=Object(x.a)(he,1),se=fe[0],pe=function(){var v=Object(L.a)(Object(O.a)().mark(function P(f){return Object(O.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Q(!0),b.abrupt("return",Object($.login)({name:f.name,password:"".concat(f.password)}).then(function(){var p=Object(L.a)(Object(O.a)().mark(function ue(ce){var ee,de,me,K;return Object(O.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("res",ce),ee=Object(S.a)({},ce.data),d.next=4,u();case 4:D.d.set(JSON.stringify(ee)),D.c.set(ee.accessToken),de=y.c.location.query,me=de.redirect,n.a.success("pages.login.success"),K="",d.t0=ee.roleId,d.next=d.t0===1?12:d.t0===2?14:d.t0===3?16:18;break;case 12:return K="admin",d.abrupt("break",19);case 14:return K="merchant",d.abrupt("break",19);case 16:return K="agent",d.abrupt("break",19);case 18:return d.abrupt("break",19);case 19:return K||localStorage.clear(),y.c.replace(me||"/".concat(K,"/index")),d.next=23,o();case 23:case"end":return d.stop()}},ue)}));return function(ue){return p.apply(this,arguments)}}()).catch(function(){var p;n.a.error("pages.login.failure"),q({status:"error",type:se}),Q(!1),(p=F.current)===null||p===void 0||p.drawCodeImg()}));case 2:case"end":return b.stop()}},P)}));return function(f){return v.apply(this,arguments)}}(),Ee=function(){var v=Object(L.a)(Object(O.a)().mark(function P(f){var z;return Object(O.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(console.log(f.captcha.toString().toUpperCase(),J,77777),!(f.captcha.toString().toUpperCase()!==J)){p.next=5;break}return j.default.error("\u8F93\u5165\u7684\u9A8C\u8BC1\u7801\u9519\u8BEF"),(z=F.current)===null||z===void 0||z.drawCodeImg(),p.abrupt("return");case 5:return p.next=7,pe(f);case 7:case"end":return p.stop()}},P)}));return function(f){return v.apply(this,arguments)}}(),ie=Y.status,le=Y.type;Object(i.useEffect)(function(){var v;document.title=(M==null||((v=M.settings)===null||v===void 0)?void 0:v.title)||"upay"},[M]);var Oe=function(P){T(P)};return Object(a.jsxs)("div",{className:U.a.container,_nk:"".concat(r,"21"),children:[Object(a.jsx)("div",{hidden:!W.b.i18n,className:U.a.lang,"data-lang":!0,_nk:"".concat(r,"22"),children:y.a&&Object(a.jsx)(y.a,{_nk:"".concat(r,"31")})}),Object(a.jsx)("div",{className:U.a.content,_nk:"".concat(r,"23"),children:Object(a.jsxs)("div",{className:U.a.main,_nk:"".concat(r,"24"),children:[Object(a.jsxs)("div",{className:U.a.titleBox,_nk:"".concat(r,"25"),children:[Object(a.jsx)("span",{className:U.a.title,_nk:"".concat(r,"41"),children:"Paye"}),Object(a.jsx)("span",{className:U.a["title-desc"],_nk:"".concat(r,"42"),children:"\u7BA1\u7406\u540E\u53F0"})]}),Object(a.jsxs)(N.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:n.a.text("pages.login.submit")},render:function(P,f){return f.pop()},submitButtonProps:{loading:V,size:"large",style:{width:"100%"}}},onFinish:function(){var v=Object(L.a)(Object(O.a)().mark(function P(f){return Object(O.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Ee(f);case 2:case"end":return b.stop()}},P)}));return function(P){return v.apply(this,arguments)}}(),_nk:"".concat(r,"51"),children:[ie==="error"&&le==="account"&&Object(a.jsx)(t,{content:n.a.text("pages.login.accountLogin.errorMessage"),_nk:"".concat(r,"61")}),se==="account"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{name:"name",placeholder:n.a.text("pages.login.username.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.username.required")}],_nk:"".concat(r,"71")}),Object(a.jsx)(m.a.Password,{name:"password",placeholder:n.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.password.required")}],_nk:"".concat(r,"81")}),Object(a.jsx)(s.a.Item,{_nk:"".concat(r,"82"),children:Object(a.jsxs)("div",{className:"flex-sb-s mb0",_nk:"".concat(r,"26"),children:[Object(a.jsx)(m.a,{valueType:"number",name:"captcha",style:{marginBottom:"0"},placeholder:n.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:n.a.text("pages.login.password.required")}],_nk:"".concat(r,"72")}),Object(a.jsx)(H.default,{onRef:F,width:120,height:42,length:4,change:Oe,_nk:"".concat(r,"91")})]})})]}),ie==="error"&&le==="mobile"&&Object(a.jsx)(t,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF",_nk:"".concat(r,"62")}),Object(a.jsxs)("div",{style:{marginBottom:24},_nk:"".concat(r,"27"),children:[Object(a.jsx)(c.a,{noStyle:!0,name:"autoLogin",_nk:"".concat(r,"a1"),children:n.a.text("pages.login.rememberMe")}),Object(a.jsx)("a",{style:{float:"right"},_nk:"".concat(r,"b1"),children:n.a.text("pages.login.forgotPassword")})]})]})]})})]})};E.default=ae},"Tb/n":function(w,E,e){"use strict";e.r(E);var k=e("tJVT"),s=e("q1tI"),A=e.n(s),j=e("nKUr"),O=e.n(j),S="13Vp",L=function(g){var I="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",$=6,D=50,W=g.width,n=W===void 0?120:W,N=g.height,m=N===void 0?40:N,c=g.letters,i=c===void 0?I:c,h=g.length,_=h===void 0?4:h,te=g.minFontSize,y=te===void 0?20:te,H=g.maxFontSize,G=H===void 0?30:H,U=g.change,a=Object(s.useRef)(null),oe=Object(s.useState)(),r=Object(k.a)(oe,2),t=r[0],ae=r[1];Object(s.useEffect)(function(){ae(a.current.getContext("2d"))},[a]),Object(s.useEffect)(function(){t&&C()},[t]);var re=function(){C()};Object(s.useImperativeHandle)(g.onRef,function(){return{drawCodeImg:C}});var C=function(){t.fillStyle=M(200,230),t.fillRect(0,0,n,m),F(),ne(),Z()},o=function(l,u){return Math.floor(Math.random()*(u-l)+l)},M=function(l,u){return"rgb(".concat(o(l,u),", ").concat(o(l,u),", ").concat(o(l,u),")")},F=function(){for(var l="",u=0;u<_;u++){var B=o(y,G),R=G-y+6,V=(n-R*_)/(_+1),Q=(u+1)*V+R*u,_e=o(22,m),X=o(-40,40),Y=o(0,i.length),q=i[Y];t.textBaseline="alphabetic",t.font="".concat(B,"px Simhei"),t.fillStyle=M(60,150),t.save(),t.translate(Q,_e),t.rotate(X*Math.PI/180),t.fillText(q,0,0),t.restore(),l+=q}U(l)},ne=function(){for(var l=0;l<$;l++){var u=o(0,t.canvas.clientWidth),B=o(0,t.canvas.clientHeight),R=o(0,t.canvas.clientWidth),V=o(0,t.canvas.clientHeight);t.beginPath(),t.moveTo(u,B),t.lineTo(R,V),t.lineWidth=1,t.strokeStyle=M(150,250),t.stroke()}},Z=function(){for(var l=0;l<D;l++){var u=o(0,t.canvas.clientWidth),B=o(0,t.canvas.clientHeight),R=o(1,2);t.beginPath(),t.arc(u,B,R,0,2*Math.PI),t.fillStyle=M(100,200),t.fill()}},J={width:n,height:m,border:"1px solid #d9d9d9"};return Object(j.jsx)("div",{style:J,_nk:"".concat(S,"11"),children:Object(j.jsx)("canvas",{onClick:re,ref:a,width:n-2,height:m-2,_nk:"".concat(S,"21")})})};E.default=L},Z55w:function(w,E,e){"use strict";e.d(E,"logout",function(){return g}),e.d(E,"login",function(){return $}),e.d(E,"register",function(){return W});var k=e("k1fw"),s=e("qLMh"),A=e("9og8"),j=e("9kvl"),O=e("B7OH"),S=e("vty2"),L=e.n(S),x="2bjP";function g(){return I.apply(this,arguments)}function I(){return I=Object(A.a)(Object(s.a)().mark(function c(){var i;return Object(s.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return i=O.c.get(),_.abrupt("return",Object(j.e)("oauth2/revoke",{method:"POST",headers:{Authorization:"Basic dWk6dWk="},params:{token:i}}));case 2:case"end":return _.stop()}},c)})),I.apply(this,arguments)}function $(c){return D.apply(this,arguments)}function D(){return D=Object(A.a)(Object(s.a)().mark(function c(i){return Object(s.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(j.e)("/v1/api/open/auth/login",{method:"POST",headers:{},data:Object(k.a)({},i)}));case 1:case"end":return _.stop()}},c)})),D.apply(this,arguments)}function W(c){return n.apply(this,arguments)}function n(){return n=Object(A.a)(Object(s.a)().mark(function c(i){return Object(s.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(j.e)("/v1/api/open/auth/signup",{method:"POST",headers:{},data:Object(k.a)({},i)}));case 1:case"end":return _.stop()}},c)})),n.apply(this,arguments)}function N(){return m.apply(this,arguments)}function m(){return m=Object(A.a)(Object(s.a)().mark(function c(){return Object(s.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Object(j.e)("system/menu/router",{method:"GET"}));case 1:case"end":return h.stop()}},c)})),m.apply(this,arguments)}},vty2:function(w,E){var e="v3EN"}}]);
