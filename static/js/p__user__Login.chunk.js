(window.webpackJsonp=window.webpackJsonp||[]).push([[11,103],{IQRO:function(M,d,e){M.exports={container:"container___1uJsr",menu:"menu___1q5Bj",right:"right___31nBQ",action:"action___3BVYh",search:"search___Banr6",account:"account___2y9w6",avatar:"avatar___WyhZy",dark:"dark___1Nivb"}},ObQG:function(M,d,e){M.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",titleBox:"titleBox___1OZ7L",title:"title___1-xuF","title-desc":"title-desc___1bGDk",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(M,d,e){"use strict";e.r(d);var N=e("y8nQ"),i=e("Vl3Y"),W=e("miYZ"),E=e("tsqr"),h=e("qLMh"),B=e("k1fw"),D=e("9og8"),p=e("tJVT"),P=e("fOrg"),I=e("+KLJ"),U=e("Z55w"),C=e("B7OH"),A=e("ZPOE"),t=e("tL7X"),w=e("VMEa"),_=e("Qurx"),s=e("q1tI"),v=e.n(s),m=e("P52E"),l=e.n(m),g=e("9kvl"),$=e("Tb/n"),S=e("ObQG"),j=e.n(S),F=e("og4B"),n=e("nKUr"),H=e.n(n),r="orTG",a=function(O){var o=O.content;return Object(n.jsx)(I.a,{style:{marginBottom:24},message:o,type:"error",showIcon:!0,_nk:"".concat(r,"11")})},z=function(){var O=Object(g.h)("@@initialState"),o=O.refresh,Z=O.initialState,G=v.a.createRef(),_e=Object(s.useState)(""),Y=Object(p.a)(_e,2),q=Y[0],K=Y[1];t.a.setIntl(Object(g.g)());var c=Object(m.useAliveController)(),u=c.clear,k=Object(s.useState)(!1),L=Object(p.a)(k,2),Q=L[0],ee=L[1],oe=Object(s.useState)({}),te=Object(p.a)(oe,2),ae=te[0],ne=te[1],Ee=Object(s.useState)("account"),he=Object(p.a)(Ee,1),se=he[0],Oe=function(){var x=Object(D.a)(Object(h.a)().mark(function R(y){return Object(h.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return ee(!0),T.abrupt("return",Object(U.login)({name:y.name,password:"".concat(y.password)}).then(function(){var b=Object(D.a)(Object(h.a)().mark(function ce(ue){var re,de,me,V;return Object(h.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("res",ue),re=Object(B.a)({},ue.data),f.next=4,u();case 4:C.d.set(JSON.stringify(re)),C.c.set(re.accessToken),de=g.c.location.query,me=de.redirect,t.a.success("pages.login.success"),V="",f.t0=re.roleId,f.next=f.t0===1?12:f.t0===2?14:f.t0===3?16:18;break;case 12:return V="admin",f.abrupt("break",19);case 14:return V="merchant",f.abrupt("break",19);case 16:return V="agent",f.abrupt("break",19);case 18:return f.abrupt("break",19);case 19:return V||localStorage.clear(),g.c.replace(me||"/".concat(V,"/index")),f.next=23,o();case 23:case"end":return f.stop()}},ce)}));return function(ce){return b.apply(this,arguments)}}()).catch(function(){var b;t.a.error("pages.login.failure"),ne({status:"error",type:se}),ee(!1),(b=G.current)===null||b===void 0||b.drawCodeImg()}));case 2:case"end":return T.stop()}},R)}));return function(y){return x.apply(this,arguments)}}(),fe=function(){var x=Object(D.a)(Object(h.a)().mark(function R(y){var X;return Object(h.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(console.log(y.captcha.toString().toUpperCase(),q,77777),!(y.captcha.toString().toUpperCase()!==q)){b.next=5;break}return E.default.error("\u8F93\u5165\u7684\u9A8C\u8BC1\u7801\u9519\u8BEF"),(X=G.current)===null||X===void 0||X.drawCodeImg(),b.abrupt("return");case 5:return b.next=7,Oe(y);case 7:case"end":return b.stop()}},R)}));return function(y){return x.apply(this,arguments)}}(),le=ae.status,ie=ae.type,pe=function(R){K(R)};return Object(s.useEffect)(function(){document.title="UPay \u767B\u5F55"},[]),Object(n.jsxs)("div",{className:j.a.container,_nk:"".concat(r,"21"),children:[Object(n.jsx)("div",{hidden:!A.b.i18n,style:{padding:"20px 40px"},className:"flex-e-c cp","data-lang":!0,_nk:"".concat(r,"22"),children:g.a&&Object(n.jsx)(F.a,{color:"#fff",_nk:"".concat(r,"31")})}),Object(n.jsx)("div",{className:j.a.content,_nk:"".concat(r,"23"),children:Object(n.jsxs)("div",{className:j.a.main,_nk:"".concat(r,"24"),children:[Object(n.jsxs)("div",{className:j.a.titleBox,_nk:"".concat(r,"25"),children:[Object(n.jsx)("span",{className:j.a.title,_nk:"".concat(r,"41"),children:"Paye"}),Object(n.jsx)("span",{className:j.a["title-desc"],_nk:"".concat(r,"42"),children:"\u7BA1\u7406\u540E\u53F0"})]}),Object(n.jsxs)(w.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:t.a.text("pages.login.submit")},render:function(R,y){return y.pop()},submitButtonProps:{loading:Q,size:"large",style:{width:"100%"}}},onFinish:function(){var x=Object(D.a)(Object(h.a)().mark(function R(y){return Object(h.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,fe(y);case 2:case"end":return T.stop()}},R)}));return function(R){return x.apply(this,arguments)}}(),_nk:"".concat(r,"51"),children:[le==="error"&&ie==="account"&&Object(n.jsx)(a,{content:t.a.text("pages.login.accountLogin.errorMessage"),_nk:"".concat(r,"61")}),se==="account"&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(_.a,{name:"name",placeholder:t.a.text("pages.login.username.placeholder"),rules:[{required:!0,message:t.a.text("pages.login.username.required")}],_nk:"".concat(r,"71")}),Object(n.jsx)(_.a.Password,{name:"password",placeholder:t.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:t.a.text("pages.login.password.required")}],_nk:"".concat(r,"81")}),Object(n.jsx)(i.a.Item,{_nk:"".concat(r,"82"),children:Object(n.jsxs)("div",{className:"flex-sb-s mb0",_nk:"".concat(r,"26"),children:[Object(n.jsx)(_.a,{valueType:"number",name:"captcha",style:{marginBottom:"0"},placeholder:t.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:t.a.text("pages.login.password.required")}],_nk:"".concat(r,"72")}),Object(n.jsx)($.default,{onRef:G,width:120,height:42,length:4,change:pe,_nk:"".concat(r,"91")})]})})]}),le==="error"&&ie==="mobile"&&Object(n.jsx)(a,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF",_nk:"".concat(r,"62")})]}),Object(n.jsxs)("div",{className:"flex-sb-c",style:{marginTop:24},_nk:"".concat(r,"27"),children:[Object(n.jsx)("a",{onClick:function(){return g.c.push("/user/register")},_nk:"".concat(r,"a1"),children:t.a.text("reg_tip7")}),Object(n.jsx)("a",{onClick:function(){return g.c.push("/user/register")},_nk:"".concat(r,"a2"),children:t.a.text("reg_tip8")})]})]})})]})};d.default=z},"Tb/n":function(M,d,e){"use strict";e.r(d);var N=e("tJVT"),i=e("q1tI"),W=e.n(i),E=e("nKUr"),h=e.n(E),B="13Vp",D=function(P){var I="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",U=6,C=50,A=P.width,t=A===void 0?120:A,w=P.height,_=w===void 0?40:w,s=P.letters,v=s===void 0?I:s,m=P.length,l=m===void 0?4:m,g=P.minFontSize,$=g===void 0?20:g,S=P.maxFontSize,j=S===void 0?30:S,F=P.change,n=Object(i.useRef)(null),H=Object(i.useState)(),r=Object(N.a)(H,2),a=r[0],z=r[1];Object(i.useEffect)(function(){z(n.current.getContext("2d"))},[n]),Object(i.useEffect)(function(){a&&O()},[a]);var J=function(){O()};Object(i.useImperativeHandle)(P.onRef,function(){return{drawCodeImg:O}});var O=function(){a.fillStyle=Z(200,230),a.fillRect(0,0,t,_),G(),_e(),Y()},o=function(c,u){return Math.floor(Math.random()*(u-c)+c)},Z=function(c,u){return"rgb(".concat(o(c,u),", ").concat(o(c,u),", ").concat(o(c,u),")")},G=function(){for(var c="",u=0;u<l;u++){var k=o($,j),L=j-$+6,Q=(t-L*l)/(l+1),ee=(u+1)*Q+L*u,oe=o(22,_),te=o(-40,40),ae=o(0,v.length),ne=v[ae];a.textBaseline="alphabetic",a.font="".concat(k,"px Simhei"),a.fillStyle=Z(60,150),a.save(),a.translate(ee,oe),a.rotate(te*Math.PI/180),a.fillText(ne,0,0),a.restore(),c+=ne}F(c)},_e=function(){for(var c=0;c<U;c++){var u=o(0,a.canvas.clientWidth),k=o(0,a.canvas.clientHeight),L=o(0,a.canvas.clientWidth),Q=o(0,a.canvas.clientHeight);a.beginPath(),a.moveTo(u,k),a.lineTo(L,Q),a.lineWidth=1,a.strokeStyle=Z(150,250),a.stroke()}},Y=function(){for(var c=0;c<C;c++){var u=o(0,a.canvas.clientWidth),k=o(0,a.canvas.clientHeight),L=o(1,2);a.beginPath(),a.arc(u,k,L,0,2*Math.PI),a.fillStyle=Z(100,200),a.fill()}},q={width:t,height:_,border:"1px solid #d9d9d9"};return Object(E.jsx)("div",{style:q,_nk:"".concat(B,"11"),children:Object(E.jsx)("canvas",{onClick:J,ref:n,width:t-2,height:_-2,_nk:"".concat(B,"21")})})};d.default=D},Z55w:function(M,d,e){"use strict";e.d(d,"logout",function(){return P}),e.d(d,"login",function(){return U}),e.d(d,"register",function(){return A});var N=e("k1fw"),i=e("qLMh"),W=e("9og8"),E=e("9kvl"),h=e("B7OH"),B=e("vty2"),D=e.n(B),p="2bjP";function P(){return I.apply(this,arguments)}function I(){return I=Object(W.a)(Object(i.a)().mark(function s(){var v;return Object(i.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return v=h.c.get(),l.abrupt("return",Object(E.e)("oauth2/revoke",{method:"POST",headers:{Authorization:"Basic dWk6dWk="},params:{token:v}}));case 2:case"end":return l.stop()}},s)})),I.apply(this,arguments)}function U(s){return C.apply(this,arguments)}function C(){return C=Object(W.a)(Object(i.a)().mark(function s(v){return Object(i.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(E.e)("/v1/api/open/auth/login",{method:"POST",headers:{},data:Object(N.a)({},v)}));case 1:case"end":return l.stop()}},s)})),C.apply(this,arguments)}function A(s){return t.apply(this,arguments)}function t(){return t=Object(W.a)(Object(i.a)().mark(function s(v){return Object(i.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(E.e)("/v1/api/open/auth/signup",{method:"POST",headers:{},data:Object(N.a)({},v)}));case 1:case"end":return l.stop()}},s)})),t.apply(this,arguments)}function w(){return _.apply(this,arguments)}function _(){return _=Object(W.a)(Object(i.a)().mark(function s(){return Object(i.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(E.e)("system/menu/router",{method:"GET"}));case 1:case"end":return m.stop()}},s)})),_.apply(this,arguments)}},ibdd:function(M,d,e){M.exports=e.p+"static/images/lang.svg"},og4B:function(M,d,e){"use strict";var N=e("qVdP"),i=e("jsC+"),W=e("lUTK"),E=e("BvKs"),h=e("tJVT"),B=e("tL7X"),D=e("B7OH"),p=e("q1tI"),P=e.n(p),I=e("IQRO"),U=e.n(I),C=e("9kvl"),A=e("ZPOE"),t=e("nKUr"),w=e.n(t),_="mTWg",s=function(m){var l=m.color,g=e("ibdd"),$=Object(p.useState)(""),S=Object(h.a)($,2),j=S[0],F=S[1],n=Object(p.useState)("merchant"),H=Object(h.a)(n,2),r=H[0],a=H[1];Object(p.useEffect)(function(){var O,o=((O=JSON.parse(D.d.get()))===null||O===void 0?void 0:O.roleId)||0;a(o)},[r]),Object(p.useEffect)(function(){F(B.a.getLocal())},[j]);var z=Object(p.useCallback)(function(O){var o=O.key;Object(C.f)(o==="en"?"en-US":"zh-CN")},[]),J=Object(t.jsxs)(E.a,{className:U.a.menu,selectedKeys:[],onClick:z,_nk:"".concat(_,"11"),children:[Object(t.jsx)(E.a.Item,{_nk:"".concat(_,"21"),children:Object(t.jsx)("div",{className:"flex-s-c",_nk:"".concat(_,"31"),children:"\u7B80\u4F53\u4E2D\u6587"})},"cn"),Object(t.jsx)(E.a.Item,{_nk:"".concat(_,"22"),children:Object(t.jsx)("div",{className:"flex-s-c",_nk:"".concat(_,"32"),children:"English"})},"en")]});return r===2||!Object(D.e)()?Object(t.jsx)(i.a,{overlay:J,overlayClassName:U.a.container,_nk:"".concat(_,"41"),children:Object(t.jsxs)("span",{className:"".concat(U.a.action," ").concat(U.a.account," flex-s-c"),_nk:"".concat(_,"51"),children:[Object(t.jsx)("img",{style:{width:"16px",height:"16px",marginRight:"8px"},src:g,alt:"cn",_nk:"".concat(_,"61")}),Object(t.jsx)("span",{style:{color:l||""},className:"".concat(U.a.name," anticon"),_nk:"".concat(_,"52"),children:A.b.i18n&&j==="zh-CN"?"\u7B80\u4F53\u4E2D\u6587":"English"})]})}):""};d.a=s},vty2:function(M,d){var e="v3EN"}}]);
