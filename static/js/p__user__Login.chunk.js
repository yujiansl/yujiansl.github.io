(window.webpackJsonp=window.webpackJsonp||[]).push([[11,104],{IQRO:function(v,u,t){v.exports={container:"container___1uJsr",menu:"menu___1q5Bj",right:"right___31nBQ",action:"action___3BVYh",search:"search___Banr6",account:"account___2y9w6",avatar:"avatar___WyhZy",dark:"dark___1Nivb"}},ObQG:function(v,u,t){v.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",titleBox:"titleBox___1OZ7L",title:"title___1-xuF","title-desc":"title-desc___1bGDk",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(v,u,t){"use strict";t.r(u);var N=t("y8nQ"),l=t("Vl3Y"),S=t("miYZ"),h=t("tsqr"),E=t("qLMh"),B=t("k1fw"),D=t("9og8"),f=t("tJVT"),g=t("fOrg"),I=t("+KLJ"),y=t("Z55w"),M=t("B7OH"),A=t("ZPOE"),a=t("tL7X"),$=t("VMEa"),o=t("Qurx"),i=t("q1tI"),p=t.n(i),m=t("P52E"),s=t.n(m),U=t("9kvl"),w=t("Tb/n"),V=t("ObQG"),P=t.n(V),F=t("og4B"),r=t("nKUr"),X=t.n(r),_="orTG",e=function(C){var n=C.content;return Object(r.jsx)(I.a,{style:{marginBottom:24},message:n,type:"error",showIcon:!0,_nk:"".concat(_,"11")})},z=function(){var C=Object(U.h)("@@initialState"),n=C.refresh,x=C.initialState,Z=p.a.createRef(),nt=Object(i.useState)(""),Y=Object(f.a)(nt,2),q=Y[0],K=Y[1];a.a.setIntl(Object(U.g)());var c=Object(m.useAliveController)(),d=c.clear,k=Object(i.useState)(!1),L=Object(f.a)(k,2),G=L[0],tt=L[1],ot=Object(i.useState)({}),et=Object(f.a)(ot,2),at=et[0],rt=et[1],ht=Object(i.useState)("account"),Et=Object(f.a)(ht,1),st=Et[0],Ot=function(){var W=Object(D.a)(Object(E.a)().mark(function R(j){return Object(E.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return tt(!0),T.abrupt("return",Object(y.login)({name:j.name,password:"".concat(j.password)}).then(function(){var b=Object(D.a)(Object(E.a)().mark(function ct(ut){var _t,dt,mt,H;return Object(E.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log("res",ut),_t=Object(B.a)({},ut.data),O.next=4,d();case 4:M.d.set(JSON.stringify(_t)),M.c.set(_t.accessToken),dt=U.c.location.query,mt=dt.redirect,a.a.success("pages.login.success"),H="",O.t0=_t.roleId,O.next=O.t0===1?12:O.t0===2?14:O.t0===3?16:18;break;case 12:return H="admin",O.abrupt("break",19);case 14:return H="merchant",O.abrupt("break",19);case 16:return H="agent",O.abrupt("break",19);case 18:return O.abrupt("break",19);case 19:return H||localStorage.clear(),U.c.replace(mt||"/".concat(H,"/index")),O.next=23,n();case 23:case"end":return O.stop()}},ct)}));return function(ct){return b.apply(this,arguments)}}()).catch(function(){var b;a.a.error("pages.login.failure"),rt({status:"error",type:st}),tt(!1),(b=Z.current)===null||b===void 0||b.drawCodeImg()}));case 2:case"end":return T.stop()}},R)}));return function(j){return W.apply(this,arguments)}}(),ft=function(){var W=Object(D.a)(Object(E.a)().mark(function R(j){var Q;return Object(E.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(console.log(j.captcha.toString().toUpperCase(),q,77777),!(j.captcha.toString().toUpperCase()!==q)){b.next=5;break}return h.default.error("\u8F93\u5165\u7684\u9A8C\u8BC1\u7801\u9519\u8BEF"),(Q=Z.current)===null||Q===void 0||Q.drawCodeImg(),b.abrupt("return");case 5:return b.next=7,Ot(j);case 7:case"end":return b.stop()}},R)}));return function(j){return W.apply(this,arguments)}}(),it=at.status,lt=at.type,pt=function(R){K(R)};return Object(i.useEffect)(function(){document.title="UPay \u767B\u5F55"},[]),Object(r.jsxs)("div",{className:P.a.container,_nk:"".concat(_,"21"),children:[Object(r.jsx)("div",{hidden:!A.b.i18n,style:{padding:"20px 40px"},className:"flex-e-c cp","data-lang":!0,_nk:"".concat(_,"22"),children:U.a&&Object(r.jsx)(F.a,{color:"#fff",_nk:"".concat(_,"31")})}),Object(r.jsx)("div",{className:P.a.content,_nk:"".concat(_,"23"),children:Object(r.jsxs)("div",{className:P.a.main,_nk:"".concat(_,"24"),children:[Object(r.jsxs)("div",{className:P.a.titleBox,_nk:"".concat(_,"25"),children:[Object(r.jsx)("span",{className:P.a.title,_nk:"".concat(_,"41"),children:"Paye"}),Object(r.jsx)("span",{className:P.a["title-desc"],_nk:"".concat(_,"42"),children:"\u7BA1\u7406\u540E\u53F0"})]}),Object(r.jsxs)($.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:a.a.text("pages.login.submit")},render:function(R,j){return j.pop()},submitButtonProps:{loading:G,size:"large",style:{width:"100%"}}},onFinish:function(){var W=Object(D.a)(Object(E.a)().mark(function R(j){return Object(E.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,ft(j);case 2:case"end":return T.stop()}},R)}));return function(R){return W.apply(this,arguments)}}(),_nk:"".concat(_,"51"),children:[it==="error"&&lt==="account"&&Object(r.jsx)(e,{content:a.a.text("pages.login.accountLogin.errorMessage"),_nk:"".concat(_,"61")}),st==="account"&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.a,{name:"name",placeholder:a.a.text("pages.login.username.placeholder"),rules:[{required:!0,message:a.a.text("pages.login.username.required")}],_nk:"".concat(_,"71")}),Object(r.jsx)(o.a.Password,{name:"password",placeholder:a.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:a.a.text("pages.login.password.required")}],_nk:"".concat(_,"81")}),Object(r.jsx)(l.a.Item,{_nk:"".concat(_,"82"),children:Object(r.jsxs)("div",{className:"flex-sb-s mb0",_nk:"".concat(_,"26"),children:[Object(r.jsx)(o.a,{valueType:"number",name:"captcha",style:{marginBottom:"0"},placeholder:a.a.text("reg_tip5"),rules:[{required:!0,message:a.a.text("reg_tip5")}],_nk:"".concat(_,"72")}),Object(r.jsx)(w.default,{onRef:Z,width:120,height:42,length:4,change:pt,_nk:"".concat(_,"91")})]})})]}),it==="error"&&lt==="mobile"&&Object(r.jsx)(e,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF",_nk:"".concat(_,"62")})]}),Object(r.jsxs)("div",{className:"flex-sb-c",style:{marginTop:24},_nk:"".concat(_,"27"),children:[Object(r.jsx)("a",{href:"https://upay.ink/",target:"_blank",_nk:"".concat(_,"a1"),children:a.a.text("reg_tip7")}),Object(r.jsx)("a",{onClick:function(){return U.c.push("/user/register")},_nk:"".concat(_,"a2"),children:a.a.text("reg_tip8")})]})]})})]})};u.default=z},"Tb/n":function(v,u,t){"use strict";t.r(u);var N=t("tJVT"),l=t("q1tI"),S=t.n(l),h=t("nKUr"),E=t.n(h),B="13Vp",D=function(g){var I="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",y=6,M=50,A=g.width,a=A===void 0?120:A,$=g.height,o=$===void 0?40:$,i=g.letters,p=i===void 0?I:i,m=g.length,s=m===void 0?4:m,U=g.minFontSize,w=U===void 0?20:U,V=g.maxFontSize,P=V===void 0?30:V,F=g.change,r=Object(l.useRef)(null),X=Object(l.useState)(),_=Object(N.a)(X,2),e=_[0],z=_[1];Object(l.useEffect)(function(){z(r.current.getContext("2d"))},[r]),Object(l.useEffect)(function(){e&&C()},[e]);var J=function(){C()};Object(l.useImperativeHandle)(g.onRef,function(){return{drawCodeImg:C}});var C=function(){e.fillStyle=x(200,230),e.fillRect(0,0,a,o),Z(),nt(),Y()},n=function(c,d){return Math.floor(Math.random()*(d-c)+c)},x=function(c,d){return"rgb(".concat(n(c,d),", ").concat(n(c,d),", ").concat(n(c,d),")")},Z=function(){for(var c="",d=0;d<s;d++){var k=n(w,P),L=P-w+6,G=(a-L*s)/(s+1),tt=(d+1)*G+L*d,ot=n(22,o),et=n(-40,40),at=n(0,p.length),rt=p[at];e.textBaseline="alphabetic",e.font="".concat(k,"px Simhei"),e.fillStyle=x(60,150),e.save(),e.translate(tt,ot),e.rotate(et*Math.PI/180),e.fillText(rt,0,0),e.restore(),c+=rt}F(c)},nt=function(){for(var c=0;c<y;c++){var d=n(0,e.canvas.clientWidth),k=n(0,e.canvas.clientHeight),L=n(0,e.canvas.clientWidth),G=n(0,e.canvas.clientHeight);e.beginPath(),e.moveTo(d,k),e.lineTo(L,G),e.lineWidth=1,e.strokeStyle=x(150,250),e.stroke()}},Y=function(){for(var c=0;c<M;c++){var d=n(0,e.canvas.clientWidth),k=n(0,e.canvas.clientHeight),L=n(1,2);e.beginPath(),e.arc(d,k,L,0,2*Math.PI),e.fillStyle=x(100,200),e.fill()}},q={width:a,height:o,border:"1px solid #d9d9d9"};return Object(h.jsx)("div",{style:q,_nk:"".concat(B,"11"),children:Object(h.jsx)("canvas",{onClick:J,ref:r,width:a-2,height:o-2,_nk:"".concat(B,"21")})})};u.default=D},Z55w:function(v,u,t){"use strict";t.d(u,"logout",function(){return g}),t.d(u,"login",function(){return y}),t.d(u,"register",function(){return A});var N=t("k1fw"),l=t("qLMh"),S=t("9og8"),h=t("9kvl"),E=t("B7OH"),B=t("vty2"),D=t.n(B),f="2bjP";function g(){return I.apply(this,arguments)}function I(){return I=Object(S.a)(Object(l.a)().mark(function i(){var p;return Object(l.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return p=E.c.get(),s.abrupt("return",Object(h.e)("oauth2/revoke",{method:"POST",headers:{Authorization:"Basic dWk6dWk="},params:{token:p}}));case 2:case"end":return s.stop()}},i)})),I.apply(this,arguments)}function y(i){return M.apply(this,arguments)}function M(){return M=Object(S.a)(Object(l.a)().mark(function i(p){return Object(l.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.e)("/v1/api/open/auth/login",{method:"POST",headers:{},data:Object(N.a)({},p)}));case 1:case"end":return s.stop()}},i)})),M.apply(this,arguments)}function A(i){return a.apply(this,arguments)}function a(){return a=Object(S.a)(Object(l.a)().mark(function i(p){return Object(l.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.e)("/v1/api/open/auth/signup",{method:"POST",headers:{},data:Object(N.a)({},p)}));case 1:case"end":return s.stop()}},i)})),a.apply(this,arguments)}function $(){return o.apply(this,arguments)}function o(){return o=Object(S.a)(Object(l.a)().mark(function i(){return Object(l.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(h.e)("system/menu/router",{method:"GET"}));case 1:case"end":return m.stop()}},i)})),o.apply(this,arguments)}},dm4i:function(v,u,t){v.exports=t.p+"static/images/lang-white.svg"},ibdd:function(v,u,t){v.exports=t.p+"static/images/lang.svg"},og4B:function(v,u,t){"use strict";var N=t("qVdP"),l=t("jsC+"),S=t("lUTK"),h=t("BvKs"),E=t("tJVT"),B=t("tL7X"),D=t("B7OH"),f=t("q1tI"),g=t.n(f),I=t("IQRO"),y=t.n(I),M=t("9kvl"),A=t("ZPOE"),a=t("nKUr"),$=t.n(a),o="mTWg",i=function(m){var s=m.color,U=t("ibdd"),w=t("dm4i"),V=Object(f.useState)(""),P=Object(E.a)(V,2),F=P[0],r=P[1],X=Object(f.useState)(),_=Object(E.a)(X,2),e=_[0],z=_[1];Object(f.useEffect)(function(){var n,x=((n=JSON.parse(D.d.get()))===null||n===void 0?void 0:n.roleId)||0;z(x)},[e]),Object(f.useEffect)(function(){r(B.a.getLocal())},[F]);var J=Object(f.useCallback)(function(n){var x=n.key;Object(M.f)(x==="en"?"en-US":"zh-CN")},[]),C=Object(a.jsxs)(h.a,{className:y.a.menu,selectedKeys:[],onClick:J,_nk:"".concat(o,"11"),children:[Object(a.jsx)(h.a.Item,{_nk:"".concat(o,"21"),children:Object(a.jsx)("div",{className:"flex-s-c",_nk:"".concat(o,"31"),children:"\u7B80\u4F53\u4E2D\u6587"})},"cn"),Object(a.jsx)(h.a.Item,{_nk:"".concat(o,"22"),children:Object(a.jsx)("div",{className:"flex-s-c",_nk:"".concat(o,"32"),children:"English"})},"en")]});return e===2||!Object(D.e)()?Object(a.jsx)(l.a,{overlay:C,overlayClassName:y.a.container,_nk:"".concat(o,"41"),children:Object(a.jsxs)("span",{className:"".concat(y.a.action," ").concat(y.a.account," flex-s-c"),_nk:"".concat(o,"51"),children:[Object(a.jsx)("img",{style:{width:"16px",height:"16px",marginRight:"8px"},src:s?w:U,alt:"cn",_nk:"".concat(o,"61")}),Object(a.jsx)("span",{style:{color:s||""},className:"".concat(y.a.name," anticon"),_nk:"".concat(o,"52"),children:A.b.i18n&&F==="zh-CN"?"\u7B80\u4F53\u4E2D\u6587":"English"})]})}):""};u.a=i},vty2:function(v,u){var t="v3EN"}}]);
