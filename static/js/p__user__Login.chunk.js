(window.webpackJsonp=window.webpackJsonp||[]).push([[11,103],{IQRO:function(D,u,e){D.exports={container:"container___1uJsr",menu:"menu___1q5Bj",right:"right___31nBQ",action:"action___3BVYh",search:"search___Banr6",account:"account___2y9w6",avatar:"avatar___WyhZy",dark:"dark___1Nivb"}},ObQG:function(D,u,e){D.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",titleBox:"titleBox___1OZ7L",title:"title___1-xuF","title-desc":"title-desc___1bGDk",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},PdsH:function(D,u,e){"use strict";e.r(u);var w=e("y8nQ"),n=e("Vl3Y"),A=e("miYZ"),h=e("tsqr"),E=e("qLMh"),L=e("k1fw"),O=e("9og8"),K=e("tJVT"),P=e("fOrg"),v=e("+KLJ"),W=e("Z55w"),M=e("B7OH"),i=e("ZPOE"),r=e("tL7X"),d=e("VMEa"),f=e("Qurx"),m=e("tneF"),o=e("q1tI"),p=e.n(o),_=e("P52E"),$=e.n(_),y=e("9kvl"),F=e("Tb/n"),S=e("ObQG"),U=e.n(S),k=e("og4B"),a=e("nKUr"),Z=e.n(a),t="orTG",V=function(s){var I=s.content;return Object(a.jsx)(v.a,{style:{marginBottom:24},message:I,type:"error",showIcon:!0,_nk:"".concat(t,"11")})},ae=function(){var s=Object(y.h)("@@initialState"),I=s.refresh,oe=s.initialState,J=p.a.createRef(),_e=Object(o.useState)(""),Y=Object(K.a)(_e,2),T=Y[0],l=Y[1];r.a.setIntl(Object(y.g)());var c=Object(_.useAliveController)(),N=c.clear,x=Object(o.useState)(!1),z=Object(K.a)(x,2),re=z[0],q=z[1],ne=Object(o.useState)({}),ee=Object(K.a)(ne,2),Q=ee[0],he=ee[1],Ee=Object(o.useState)("account"),Oe=Object(K.a)(Ee,1),se=Oe[0],fe=function(){var B=Object(O.a)(Object(E.a)().mark(function R(j){return Object(E.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return q(!0),C.abrupt("return",Object(W.login)({name:j.name,password:"".concat(j.password)}).then(function(){var b=Object(O.a)(Object(E.a)().mark(function ce(ue){var te,de,me,H;return Object(E.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return console.log("res",ue),te=Object(L.a)({},ue.data),g.next=4,N();case 4:M.d.set(JSON.stringify(te)),M.c.set(te.accessToken),de=y.c.location.query,me=de.redirect,r.a.success("pages.login.success"),H="",g.t0=te.roleId,g.next=g.t0===1?12:g.t0===2?14:g.t0===3?16:18;break;case 12:return H="admin",g.abrupt("break",19);case 14:return H="merchant",g.abrupt("break",19);case 16:return H="agent",g.abrupt("break",19);case 18:return g.abrupt("break",19);case 19:return H||localStorage.clear(),y.c.replace(me||"/".concat(H,"/index")),g.next=23,I();case 23:case"end":return g.stop()}},ce)}));return function(ce){return b.apply(this,arguments)}}()).catch(function(){var b;r.a.error("pages.login.failure"),he({status:"error",type:se}),q(!1),(b=J.current)===null||b===void 0||b.drawCodeImg()}));case 2:case"end":return C.stop()}},R)}));return function(j){return B.apply(this,arguments)}}(),pe=function(){var B=Object(O.a)(Object(E.a)().mark(function R(j){var X;return Object(E.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(console.log(j.captcha.toString().toUpperCase(),T,77777),!(j.captcha.toString().toUpperCase()!==T)){b.next=5;break}return h.default.error("\u8F93\u5165\u7684\u9A8C\u8BC1\u7801\u9519\u8BEF"),(X=J.current)===null||X===void 0||X.drawCodeImg(),b.abrupt("return");case 5:return b.next=7,fe(j);case 7:case"end":return b.stop()}},R)}));return function(j){return B.apply(this,arguments)}}(),ie=Q.status,le=Q.type,ge=function(R){l(R)};return Object(o.useEffect)(function(){document.title="UPay \u767B\u5F55"},[]),Object(a.jsxs)("div",{className:U.a.container,_nk:"".concat(t,"21"),children:[Object(a.jsx)("div",{hidden:!i.b.i18n,style:{padding:"20px 40px"},className:"flex-e-c cp","data-lang":!0,_nk:"".concat(t,"22"),children:y.a&&Object(a.jsx)(k.a,{_nk:"".concat(t,"31")})}),Object(a.jsx)("div",{className:U.a.content,_nk:"".concat(t,"23"),children:Object(a.jsxs)("div",{className:U.a.main,_nk:"".concat(t,"24"),children:[Object(a.jsxs)("div",{className:U.a.titleBox,_nk:"".concat(t,"25"),children:[Object(a.jsx)("span",{className:U.a.title,_nk:"".concat(t,"41"),children:"Paye"}),Object(a.jsx)("span",{className:U.a["title-desc"],_nk:"".concat(t,"42"),children:"\u7BA1\u7406\u540E\u53F0"})]}),Object(a.jsxs)(d.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:r.a.text("pages.login.submit")},render:function(R,j){return j.pop()},submitButtonProps:{loading:re,size:"large",style:{width:"100%"}}},onFinish:function(){var B=Object(O.a)(Object(E.a)().mark(function R(j){return Object(E.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,pe(j);case 2:case"end":return C.stop()}},R)}));return function(R){return B.apply(this,arguments)}}(),_nk:"".concat(t,"51"),children:[ie==="error"&&le==="account"&&Object(a.jsx)(V,{content:r.a.text("pages.login.accountLogin.errorMessage"),_nk:"".concat(t,"61")}),se==="account"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{name:"name",placeholder:r.a.text("pages.login.username.placeholder"),rules:[{required:!0,message:r.a.text("pages.login.username.required")}],_nk:"".concat(t,"71")}),Object(a.jsx)(f.a.Password,{name:"password",placeholder:r.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:r.a.text("pages.login.password.required")}],_nk:"".concat(t,"81")}),Object(a.jsx)(n.a.Item,{_nk:"".concat(t,"82"),children:Object(a.jsxs)("div",{className:"flex-sb-s mb0",_nk:"".concat(t,"26"),children:[Object(a.jsx)(f.a,{valueType:"number",name:"captcha",style:{marginBottom:"0"},placeholder:r.a.text("pages.login.password.placeholder"),rules:[{required:!0,message:r.a.text("pages.login.password.required")}],_nk:"".concat(t,"72")}),Object(a.jsx)(F.default,{onRef:J,width:120,height:42,length:4,change:ge,_nk:"".concat(t,"91")})]})})]}),ie==="error"&&le==="mobile"&&Object(a.jsx)(V,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF",_nk:"".concat(t,"62")}),Object(a.jsxs)("div",{className:"flex-sb-c",style:{marginBottom:24},_nk:"".concat(t,"27"),children:[Object(a.jsx)(m.a,{noStyle:!0,name:"autoLogin",_nk:"".concat(t,"a1"),children:r.a.text("pages.login.rememberMe")}),Object(a.jsx)("a",{onClick:function(){return y.c.push("/user/register")},_nk:"".concat(t,"b1"),children:r.a.text("reg_tip8")})]})]})]})})]})};u.default=ae},"Tb/n":function(D,u,e){"use strict";e.r(u);var w=e("tJVT"),n=e("q1tI"),A=e.n(n),h=e("nKUr"),E=e.n(h),L="13Vp",O=function(P){var v="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",W=6,M=50,i=P.width,r=i===void 0?120:i,d=P.height,f=d===void 0?40:d,m=P.letters,o=m===void 0?v:m,p=P.length,_=p===void 0?4:p,$=P.minFontSize,y=$===void 0?20:$,F=P.maxFontSize,S=F===void 0?30:F,U=P.change,k=Object(n.useRef)(null),a=Object(n.useState)(),Z=Object(w.a)(a,2),t=Z[0],V=Z[1];Object(n.useEffect)(function(){V(k.current.getContext("2d"))},[k]),Object(n.useEffect)(function(){t&&G()},[t]);var ae=function(){G()};Object(n.useImperativeHandle)(P.onRef,function(){return{drawCodeImg:G}});var G=function(){t.fillStyle=I(200,230),t.fillRect(0,0,r,f),oe(),J(),_e()},s=function(l,c){return Math.floor(Math.random()*(c-l)+l)},I=function(l,c){return"rgb(".concat(s(l,c),", ").concat(s(l,c),", ").concat(s(l,c),")")},oe=function(){for(var l="",c=0;c<_;c++){var N=s(y,S),x=S-y+6,z=(r-x*_)/(_+1),re=(c+1)*z+x*c,q=s(22,f),ne=s(-40,40),ee=s(0,o.length),Q=o[ee];t.textBaseline="alphabetic",t.font="".concat(N,"px Simhei"),t.fillStyle=I(60,150),t.save(),t.translate(re,q),t.rotate(ne*Math.PI/180),t.fillText(Q,0,0),t.restore(),l+=Q}U(l)},J=function(){for(var l=0;l<W;l++){var c=s(0,t.canvas.clientWidth),N=s(0,t.canvas.clientHeight),x=s(0,t.canvas.clientWidth),z=s(0,t.canvas.clientHeight);t.beginPath(),t.moveTo(c,N),t.lineTo(x,z),t.lineWidth=1,t.strokeStyle=I(150,250),t.stroke()}},_e=function(){for(var l=0;l<M;l++){var c=s(0,t.canvas.clientWidth),N=s(0,t.canvas.clientHeight),x=s(1,2);t.beginPath(),t.arc(c,N,x,0,2*Math.PI),t.fillStyle=I(100,200),t.fill()}},Y={width:r,height:f,border:"1px solid #d9d9d9"};return Object(h.jsx)("div",{style:Y,_nk:"".concat(L,"11"),children:Object(h.jsx)("canvas",{onClick:ae,ref:k,width:r-2,height:f-2,_nk:"".concat(L,"21")})})};u.default=O},Z55w:function(D,u,e){"use strict";e.d(u,"logout",function(){return P}),e.d(u,"login",function(){return W}),e.d(u,"register",function(){return i});var w=e("k1fw"),n=e("qLMh"),A=e("9og8"),h=e("9kvl"),E=e("B7OH"),L=e("vty2"),O=e.n(L),K="2bjP";function P(){return v.apply(this,arguments)}function v(){return v=Object(A.a)(Object(n.a)().mark(function m(){var o;return Object(n.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return o=E.c.get(),_.abrupt("return",Object(h.e)("oauth2/revoke",{method:"POST",headers:{Authorization:"Basic dWk6dWk="},params:{token:o}}));case 2:case"end":return _.stop()}},m)})),v.apply(this,arguments)}function W(m){return M.apply(this,arguments)}function M(){return M=Object(A.a)(Object(n.a)().mark(function m(o){return Object(n.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(h.e)("/v1/api/open/auth/login",{method:"POST",headers:{},data:Object(w.a)({},o)}));case 1:case"end":return _.stop()}},m)})),M.apply(this,arguments)}function i(m){return r.apply(this,arguments)}function r(){return r=Object(A.a)(Object(n.a)().mark(function m(o){return Object(n.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(h.e)("/v1/api/open/auth/signup",{method:"POST",headers:{},data:Object(w.a)({},o)}));case 1:case"end":return _.stop()}},m)})),r.apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=Object(A.a)(Object(n.a)().mark(function m(){return Object(n.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(h.e)("system/menu/router",{method:"GET"}));case 1:case"end":return p.stop()}},m)})),f.apply(this,arguments)}},ibdd:function(D,u,e){D.exports=e.p+"static/images/lang.svg"},og4B:function(D,u,e){"use strict";var w=e("qVdP"),n=e("jsC+"),A=e("lUTK"),h=e("BvKs"),E=e("tJVT"),L=e("tL7X"),O=e("q1tI"),K=e.n(O),P=e("IQRO"),v=e.n(P),W=e("9kvl"),M=e("ZPOE"),i=e("nKUr"),r=e.n(i),d="mTWg",f=function(){var o=e("ibdd"),p=Object(O.useState)(""),_=Object(E.a)(p,2),$=_[0],y=_[1],F=Object(O.useState)("merchant"),S=Object(E.a)(F,2),U=S[0],k=S[1];Object(O.useEffect)(function(){k("merchant")},[U]),Object(O.useEffect)(function(){y(L.a.getLocal())},[$]);var a=Object(O.useCallback)(function(t){var V=t.key;Object(W.f)(V==="en"?"en-US":"zh-CN")},[]),Z=Object(i.jsxs)(h.a,{className:v.a.menu,selectedKeys:[],onClick:a,_nk:"".concat(d,"11"),children:[Object(i.jsx)(h.a.Item,{_nk:"".concat(d,"21"),children:Object(i.jsx)("div",{className:"flex-s-c",_nk:"".concat(d,"31"),children:"\u7B80\u4F53\u4E2D\u6587"})},"cn"),Object(i.jsx)(h.a.Item,{_nk:"".concat(d,"22"),children:Object(i.jsx)("div",{className:"flex-s-c",_nk:"".concat(d,"32"),children:"English"})},"en")]});return U==="merchant"?Object(i.jsx)(n.a,{overlay:Z,overlayClassName:v.a.container,_nk:"".concat(d,"41"),children:Object(i.jsxs)("span",{className:"".concat(v.a.action," ").concat(v.a.account," flex-s-c"),_nk:"".concat(d,"51"),children:[Object(i.jsx)("img",{style:{width:"16px",height:"16px",marginRight:"8px"},src:o,alt:"cn",_nk:"".concat(d,"61")}),Object(i.jsx)("span",{className:"".concat(v.a.name," anticon"),_nk:"".concat(d,"52"),children:M.b.i18n&&$==="zh-CN"?"\u7B80\u4F53\u4E2D\u6587":"English"})]})}):""};u.a=f},vty2:function(D,u){var e="v3EN"}}]);
