import{f as p,e as h,i as o}from"./index-bEAPwbJM.js";import{f as d}from"./index-B3sZ9j6O.js";import{b as u}from"./validate-riIxJwdE.js";import{E as f}from"./element-BbMnn7tA.js";import{r as c,Z as n}from"./vue-BtEXIrqH.js";const q="data:image/svg+xml,%3csvg%20width='72'%20height='72'%20viewBox='0%200%2072%2072'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_14_24191)'%3e%3crect%20x='4.5'%20y='4.5'%20width='63'%20height='63'%20rx='13.5'%20fill='white'%20stroke='%23E9E9E9'/%3e%3cg%20clip-path='url(%23clip1_14_24191)'%3e%3cpath%20d='M60%2035.9929C60%2038.2279%2058.19%2040.0379%2055.955%2040.0379H42L36%2027.9029L42.475%2016.6879C43.595%2014.7529%2046.065%2014.0929%2048%2015.2079C49.935%2016.3279%2050.595%2018.7979%2049.48%2020.7329L43.005%2031.9479H55.955C58.19%2031.9479%2060%2033.7579%2060%2035.9929Z'%20fill='%231A73E8'/%3e%3cpath%20d='M48.0014%2056.796C46.0664%2057.911%2043.5964%2057.251%2042.4764%2055.316L36.0014%2044.101L29.5264%2055.316C28.4064%2057.251%2025.9364%2057.911%2024.0014%2056.796C22.0664%2055.676%2021.4064%2053.206%2022.5214%2051.271L28.9964%2040.056L36.0014%2039.791L43.0064%2040.056L49.4814%2051.271C50.5964%2053.206%2049.9364%2055.676%2048.0014%2056.796Z'%20fill='%23EA4335'/%3e%3cpath%20d='M36.0014%2027.9029L34.1764%2032.8629L28.9964%2031.9479L22.5214%2020.7329C21.4064%2018.7979%2022.0664%2016.3279%2024.0014%2015.2079C25.9364%2014.0929%2028.4064%2014.7529%2029.5264%2016.6879L36.0014%2027.9029Z'%20fill='%23FBBC04'/%3e%3cpath%20d='M34.955%2031.957L30.26%2040.047H16.045C13.81%2040.047%2012%2038.237%2012%2036.002C12%2033.767%2013.81%2031.957%2016.045%2031.957H34.955Z'%20fill='%2334A853'/%3e%3cpath%20d='M42.9993%2040.051H28.9893L35.9943%2027.916L42.9993%2040.051Z'%20fill='%23185DB7'/%3e%3c/g%3e%3cg%20clip-path='url(%23clip2_14_24191)'%3e%3cpath%20d='M58.8951%2062.6187L59.5416%2063.2651L60.1881%2062.6187L65.3753%2057.4317L66.0268%2058.0832L59.5416%2064.5682L55.9733%2060.9999L56.6247%2060.3486L58.8951%2062.6187ZM65.7181%2057.089C65.718%2057.0891%2065.7179%2057.0892%2065.7178%2057.0892L65.7181%2057.089ZM66.3698%2058.4261C66.3697%2058.426%2066.3696%2058.426%2066.3696%2058.4259L66.3698%2058.4261ZM66.369%2057.7409C66.3693%2057.7406%2066.3696%2057.7404%2066.3698%2057.7401L66.3695%2057.7405L66.369%2057.7409ZM59.8844%2064.911L59.8843%2064.911C59.8844%2064.911%2059.8844%2064.911%2059.8844%2064.911ZM61%2049.0857C54.4196%2049.0857%2049.0857%2054.42%2049.0857%2061C49.0857%2067.58%2054.4196%2072.9143%2061%2072.9143C67.58%2072.9143%2072.9143%2067.58%2072.9143%2061C72.9143%2054.42%2067.58%2049.0857%2061%2049.0857ZM56.9679%2060.0055C56.9678%2060.0056%2056.9676%2060.0057%2056.9675%2060.0059L56.9679%2060.0055Z'%20fill='%233F81FF'%20stroke='white'%20stroke-width='1.82857'/%3e%3cpath%20d='M67.016%2058.3867L59.8453%2065.5573C59.6777%2065.7252%2059.4056%2065.7252%2059.238%2065.5573L54.9841%2061.3034C54.8165%2061.1358%2054.8165%2060.8637%2054.9841%2060.696L56.3211%2059.3591C56.4887%2059.1913%2056.7608%2059.1913%2056.9284%2059.3591L59.5417%2061.9719L65.0717%2056.4422C65.2393%2056.2745%2065.5114%2056.2745%2065.679%2056.4422L67.0161%2057.7791C67.184%2057.9468%2067.184%2058.219%2067.016%2058.3867Z'%20fill='white'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_14_24191'%3e%3crect%20width='72'%20height='72'%20fill='white'/%3e%3c/clipPath%3e%3cclipPath%20id='clip1_14_24191'%3e%3crect%20width='48'%20height='43.4286'%20fill='white'%20transform='translate(12%2014.292)'/%3e%3c/clipPath%3e%3cclipPath%20id='clip2_14_24191'%3e%3crect%20width='25'%20height='26'%20fill='white'%20transform='translate(48%2047)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",g=(t,s,e)=>{s===""?e(new Error("请输入密码")):u(s)?e():e(new Error("密码格式错误"))},L=(t,s,e)=>{s===""?e(new Error("请输入验证码")):e()},w=(t,s,e)=>{s===""?e(new Error("请再次输入密码")):s!==r.password?e(new Error("两次输入的密码不一致")):e()},a=c(!1),m=p(),C=n({password:[{required:!0,validator:g,trigger:"blur"}],rePass:[{required:!0,validator:w,trigger:"blur"}],challengeResult:[{required:!0,validator:L,trigger:"blur"}]}),M=c(),l=JSON.parse(h("user-info")||"{}"),r=n({email:l.email||"79026@qq.com",name:l.name,password:"",rePass:"",challengeResult:"",challengeId:""}),_=async t=>{t&&await t.validate(async(s,e)=>{if(s)try{const i={challengeId:r.challengeId,challengeResult:r.challengeResult,password:r.password};a.value=!0,await d(i),m.logout()}catch(i){f.error("修改密码失败，请稍后再试"),a.value=!1,console.log("submitPass",i)}else console.log("error submit!",e)})};function x(){return{passFormRef:M,passForm:r,passRules:C,submitPass:_,passLoading:a}}function y(t){return o({url:"/otp/issue",method:"get",params:t})}function A(t){return o({url:"/otp/issue",method:"post",data:t})}export{q as _,A as b,y as g,x as u};
