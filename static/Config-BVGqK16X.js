import{_ as j}from"./empty-BiNgvBdS.js";import{l as z,aD as H,aE as J,r as c,e as K,d as Q,ah as n,ap as W,m as u,p as w,q as e,U as o,O as s,S as r,T as m,F as I,a7 as L,M as x,P as X,aF as Y,aG as Z}from"./vue-C87Wc4A0.js";import{b as ee,c as ae,d as le}from"./index-Cap7k8T_.js";import{E as te}from"./element-CD5rsoqi.js";import{_ as oe}from"./index-c78MVIZI.js";import"//at.alicdn.com/t/c/font_4557022_0o7l3b0t8egq.js";import"./vxe-sm_XFqm0.js";const y=_=>(Y("data-v-6ba4bbd1"),_=_(),Z(),_),se={class:"top-balance base-box mt-20"},ce=y(()=>e("div",{class:"title mb-20"},"系统配置",-1)),ne={class:"appid"},ie={class:"order config"},pe={class:"flex flex-wrap items-center mt-20"},ue={class:"teble"},de=y(()=>e("div",{class:"flex-center flex-col h-full",style:{height:"300px"}},[e("span",null,[e("img",{src:j,alt:""})]),e("span",{class:"custom-empty-text"},"暂无数据")],-1)),re=["onClick"],me={class:"modal p-20 w-full"},_e={class:"title flex-center"},ve={class:"w-full mb-20 mt-20"},fe=y(()=>e("div",{class:"item-label mb-14"},"配置名称",-1)),be={class:"w-full mb-20"},ge=y(()=>e("div",{class:"item-label mb-14"},"值",-1)),ye={class:"flex items-end w-full"},he=z({__name:"Config",setup(_){const A=H();J();const C=c(A.query.appId||""),v=c(""),f=c(""),b=c(!1),g=c(!1),G=c(!1);c(!1);const V=c([]),i=c({}),p=c({appID:"",merchantName:"",appName:"",claimGroups:[]}),N=async()=>{try{g.value=!0;const a=await ee(C.value);p.value=a.data,a.data.claimGroups.length>0&&(v.value=a.data.claimGroups[0].groupName),g.value=!1,console.log(a,"res")}catch{g.value=!1}},k=async()=>{try{const a=await ae(C.value);V.value=a.data}catch{}},D=(a,t={})=>{f.value=f,b.value=!0,i.value={...t},console.log(i.value,"record.value")},M=async()=>{try{const a={claims:[{claimLabel:"",claimType:i.value.claimType,claimValue:i.value.claimValue}]};await le(a,p.value.virtualMerchantID),b.value=!1,await N(),await k(),te.success(f.value==="add"?"添加成功":"编辑成功")}catch(a){console.log(a,"addConfig")}},S=K(()=>{var a,t;return((t=(a=p.value.claimGroups)==null?void 0:a.filter(d=>d.groupName===v.value)[0])==null?void 0:t.claims)||[]});return Q(()=>{N(),k()}),(a,t)=>{const d=n("el-col"),B=n("el-row"),T=n("el-button"),E=n("el-tag"),h=n("el-table-column"),U=n("el-table"),q=n("el-option"),F=n("el-select"),P=n("el-input"),$=n("el-dialog"),R=W("loading");return u(),w("div",null,[e("div",se,[ce,o(B,{gutter:20},{default:s(()=>[o(d,{class:"mb-20",xs:24,sm:24,md:12,lg:12,xl:12},{default:s(()=>[r(" 商户名称："+m(p.value.merchantName),1)]),_:1}),o(d,{class:"mb-20",xs:24,sm:24,md:12,lg:12,xl:12},{default:s(()=>[r(" 应用名称："+m(p.value.appName),1)]),_:1}),o(d,{class:"mb-20",span:24},{default:s(()=>[e("div",ne,"APPID: "+m(p.value.appID),1)]),_:1})]),_:1})]),e("div",ie,[o(T,{type:"primary",onClick:t[0]||(t[0]=l=>D())},{default:s(()=>[r("添加配置")]),_:1}),e("div",pe,[(u(!0),w(I,null,L(p.value.claimGroups,l=>(u(),x(E,{type:l.groupName===v.value?"primary":"info",onClick:O=>v.value=l.groupName,class:"cursor-pointer mr-20",key:l.groupName},{default:s(()=>[r(m(l.groupName),1)]),_:2},1032,["type","onClick"]))),128))]),e("div",ue,[X((u(),x(U,{data:S.value,style:{width:"100%"}},{empty:s(()=>[de]),default:s(()=>[o(h,{prop:"claimType",label:"配置名称"}),o(h,{prop:"claimValue",label:"值"}),o(h,{prop:"action",label:"操作",width:"100"},{default:s(l=>[e("div",{class:"action-btn cursor-pointer",onClick:O=>D("edit",l.row)},"编辑",8,re)]),_:1})]),_:1},8,["data"])),[[R,g.value]])])]),o($,{showClose:!1,modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=l=>b.value=l)},{default:s(()=>[e("div",me,[e("div",_e,m(f.value==="add"?"添加配置":"编辑配置"),1),e("div",ve,[fe,o(F,{modelValue:i.value.claimType,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value.claimType=l),filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"请输入或选择配置名称"},{default:s(()=>[(u(!0),w(I,null,L(V.value,l=>(u(),x(q,{key:l.claimType,label:l.claimType,value:l.claimType},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",be,[ge,o(P,{placeholder:"请输入配置名称",type:"textarea",rows:9,modelValue:i.value.claimValue,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.claimValue=l)},null,8,["modelValue"])]),e("div",ye,[o(T,{type:"primary",class:"ml-auto",loading:G.value,onClick:M},{default:s(()=>[r("确定")]),_:1},8,["loading"])])])]),_:1},8,["modelValue"])])}}}),Te=oe(he,[["__scopeId","data-v-6ba4bbd1"]]);export{Te as default};
