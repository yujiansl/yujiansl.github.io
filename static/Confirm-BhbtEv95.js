import{l as T,aD as A,aE as D,r as p,d as B,ah as _,ap as S,m as h,p as k,q as t,T as l,U as s,O as d,S as f,P as E,M as I,u as M,aF as R,aG as q}from"./vue-BtEXIrqH.js";import{p as P,b as V}from"./index-BmuQMldO.js";import{c as b}from"./commonFn-DSVr4W-5.js";import{E as U}from"./element-BbMnn7tA.js";import{_ as F}from"./index-bEAPwbJM.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const m=r=>(R("data-v-64c542a7"),r=r(),q(),r),G={class:"confirm"},H={class:"top-balance base-box flex flex-wrap ml-40 mr-40 mt-20 items-center"},K={class:"balance-item pr-80"},L=m(()=>t("div",{class:"item-title"},"结算账单总额 (USD)",-1)),O={class:"item-price mt-10 mb-8"},W={class:"balance-item pr-80"},Z=m(()=>t("div",{class:"item-title"},"结算订单笔数",-1)),j={class:"item-price mt-10 mb-8"},z={class:"balance-item"},J=m(()=>t("div",{class:"item-title"},"账单范围时间",-1)),Q={class:"mt-10 mb-8"},X={class:"order base-box p-36 ml-40 mr-40 mt-20"},Y={class:"table-wrapper"},$=T({__name:"Confirm",setup(r){const u=A(),w=D(),c=p(!1),i=p(!1),a=p({rows:[],creditNetTotal:"",startsAt:"",totalCount:"",endsAt:""}),g=async()=>{try{c.value=!0;let e=await P(u.query.processNo);e.data&&e.data.sheet&&(a.value=e.data.sheet||{rows:[]}),c.value=!1}catch(e){console.log(e,"getProcessData"),c.value=!1}},v=e=>(e=b(e),(e==null?void 0:e.substring(0,10))||""),y=async()=>{try{i.value=!0;let e=await V(u.query.processNo);U.success("生成账单成功"),console.log(e,"res"),i.value=!1,w.back()}catch{i.value=!1}};return B(()=>{g()}),(e,ee)=>{const x=_("el-button"),o=_("el-table-column"),N=_("el-table"),C=S("loading");return h(),k("div",G,[t("div",H,[t("div",K,[L,t("div",O,l(a.value.creditNetTotal),1)]),t("div",W,[Z,t("div",j,l(a.value.totalCount),1)]),t("div",z,[J,t("div",Q,l(v(a.value.startsAt)+"至"+v(a.value.endsAt)),1)]),s(x,{type:"primary",loading:i.value,style:{height:"50px"},onClick:y,class:"flex-center"},{default:d(()=>[f(" 确认并生成账单 ")]),_:1},8,["loading"])]),t("div",X,[t("div",Y,[E((h(),I(N,{data:a.value.rows,style:{width:"100%"}},{default:d(()=>[s(o,{prop:"orderNo",label:"订单号",width:"300"}),s(o,{prop:"virtualMerchantName",label:"站点名称",width:"150"}),s(o,{prop:"orderAmount",label:"订单金额",width:"260"},{default:d(n=>[f(l(n.row.orderAmount+n.row.orderCurrency.symbol),1)]),_:1}),s(o,{prop:"payWay",label:"支付方式",width:"180"}),s(o,{prop:"orderTime",label:"下单时间",width:"180"},{default:d(n=>[t("div",null,l(M(b)(n.row.orderTime)),1)]),_:1})]),_:1},8,["data"])),[[C,c.value]])])])])}}}),ie=F($,[["__scopeId","data-v-64c542a7"]]);export{ie as default};
