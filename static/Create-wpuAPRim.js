import{F as k}from"./Index-BU8kA-XB.js";import{_ as g}from"./Index.vue_vue_type_script_setup_true_lang-BhDJDWBy.js";import{P as M,e as F,o as u,Q as I,_ as B}from"./index-c78MVIZI.js";import{E as R}from"./element-CD5rsoqi.js";import{l as Z,aL as D,r as f,aK as E,Z as U,b as O,ah as y,m as C,M as P,O as o,p as N,q as m,T as $,U as a,S as _,aF as A,aG as j}from"./vue-C87Wc4A0.js";const G="data:image/svg+xml,%3csvg%20width='70'%20height='70'%20viewBox='0%200%2070%2070'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_7_507)'%3e%3cpath%20d='M34.9999%200C15.6691%200%200%2015.6702%200%2034.9999C0%2054.3297%2015.6691%2069.9999%2034.9999%2069.9999C54.3297%2069.9999%2070%2054.3297%2070%2034.9999C70%2015.6702%2054.3297%200%2034.9999%200ZM54.1418%2028.2413L31.3257%2051.0568C30.7925%2051.5911%2029.9266%2051.5911%2029.3933%2051.0568L15.8582%2037.5217C15.325%2036.9885%2015.325%2036.1226%2015.8582%2035.5889L20.1125%2031.3352C20.6457%2030.8014%2021.5116%2030.8014%2022.0448%2031.3352L30.3596%2039.6488L47.9552%2022.0542C48.4884%2021.5205%2049.3543%2021.5205%2049.8876%2022.0542L54.1419%2026.3079C54.6761%2026.8417%2054.6761%2027.7076%2054.1418%2028.2413Z'%20fill='%2330CA66'/%3e%3cpath%20d='M54.1419%2028.2414L31.3258%2051.0569C30.7926%2051.5912%2029.9267%2051.5912%2029.3935%2051.0569L15.8584%2037.5218C15.3252%2036.9886%2015.3252%2036.1227%2015.8584%2035.589L20.1126%2031.3353C20.6458%2030.8016%2021.5117%2030.8016%2022.045%2031.3353L30.3598%2039.6489L47.9553%2022.0544C48.4885%2021.5206%2049.3545%2021.5206%2049.8878%2022.0544L54.142%2026.308C54.6762%2026.8418%2054.6762%2027.7077%2054.1419%2028.2414Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_7_507'%3e%3crect%20width='70'%20height='70'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function J(i,v){return M({url:`/merchantapp/create${v?"?parentMerchantId="+v:""}`,method:"post",data:i})}const V=i=>(A("data-v-7c2b006e"),i=i(),j(),i),K={key:0,class:"base-box detail-box"},Q={class:"create-title mb-50"},H=V(()=>m("div",{class:"item-desc"},"请确保网址可以正常访问，否则将影响站点认证审核。",-1)),W={class:"flex-center w-full mt-30"},X={key:1,class:"base-box detail-box"},Y=V(()=>m("img",{src:G,class:"auth-img",alt:""},null,-1)),ee=V(()=>m("div",{class:"start-title mt-20 mb-6"},"信息已提交",-1)),le=V(()=>m("div",{class:"start-text mb-125"},[_(" 我们已收到你的信息，审核结果请留意邮箱。"),m("br"),_(" 预计 3 个工作日内完成认证！ ")],-1)),ae={class:"w-full flex-center mb-40"},te=Z({__name:"Create",props:D(["row"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const v=JSON.parse(F("user-info")||"{}"),x=f(!1),z=f({appID:"",appSecret:""}),s=i,c=f(!1),b=E(i,"modelValue"),w=f(),h=f(!1),e=U({name:"",edit:!1,turnover:"",websiteUrl:"",region:"",category:"",timezoneName:"",currency:"",desc:""}),L=U({name:[{required:!0,message:"请输入站点名称",trigger:"blur"}],websiteUrl:[{required:!0,message:"请输入业务/产品网址",trigger:"blur"}],turnover:[{required:!0,message:"请选择营业额",trigger:"change"}],category:[{required:!0,message:"请选择行业类别",trigger:"change"}],currency:[{required:!0,message:"请输入站点名称",trigger:"change"}],timezoneName:[{required:!0,message:"请选择站点时区",trigger:"change"}],region:[{required:!0,message:"请选择业务分布地区",trigger:"change"}]}),T=async d=>{d&&await d.validate(async(l,n)=>{if(l){const r={name:e.name,claims:[{claimType:"turnover",claimValue:e.turnover},{claimType:"currency",claimValue:e.currency},{claimType:"timezone",claimValue:I(e.timezoneName)},{claimType:"timezoneName",claimValue:e.timezoneName},{claimType:"websiteUrl",claimValue:e.websiteUrl},{claimType:"desc",claimValue:e.desc},{claimType:"region",claimValue:e.region},{claimType:"category",claimValue:e.category.toString()}]};c.value&&(r.isRejected="0"),h.value=!0;try{const p=await J(r,v.mer);if(R.success("创建成功"),c.value){location.reload();return}z.value=p.data,x.value=!0}catch{h.value=!1}console.log("submit!")}else console.log("error submit!",n)})},q=()=>{location.reload()};return O(()=>b.value,d=>{var l,n;d&&((l=w.value)==null||l.resetFields()),c.value=!1,s.row.name&&(c.value=!0,e.edit=!0,e.name=s.row.name,e.websiteUrl=u(s.row.claims,"websiteUrl"),e.category=(n=u(s.row.claims,"category"))==null?void 0:n.split(","),e.currency=u(s.row.claims,"currency"),e.timezoneName=u(s.row.claims,"timezoneName"),e.turnover=u(s.row.claims,"turnover"),e.region=u(s.row.claims,"region"),e.desc=u(s.row.claims,"desc"))}),(d,l)=>{const n=y("el-input"),r=y("el-form-item"),p=y("el-button"),S=y("el-form");return C(),P(k,{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=t=>b.value=t)},{default:o(()=>[x.value?(C(),N("div",X,[Y,ee,le,m("div",ae,[a(p,{type:"primary",onClick:q},{default:o(()=>[_("查看信息")]),_:1})])])):(C(),N("div",K,[m("div",Q,$(c.value?"补充资料":"创建新站点"),1),a(S,{ref_key:"siteFormRef",ref:w,"label-position":"top",rules:L,"label-width":"auto",model:e},{default:o(()=>[a(r,{prop:"name",label:"站点名称"},{default:o(()=>[a(n,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.name=t),placeholder:"请输入站点名称",maxlength:"30"},null,8,["modelValue"])]),_:1}),a(r,{prop:"websiteUrl",label:"业务/产品网址"},{default:o(()=>[a(n,{modelValue:e.websiteUrl,"onUpdate:modelValue":l[1]||(l[1]=t=>e.websiteUrl=t),placeholder:"请输入业务/产品网址",maxlength:"150"},null,8,["modelValue"]),H]),_:1}),a(r,{prop:"category",label:"行业类别"},{default:o(()=>[a(g,{type:"category",modelValue:e.category,"onUpdate:modelValue":l[2]||(l[2]=t=>e.category=t),placeholder:"请选择行业类别"},null,8,["modelValue"])]),_:1}),a(r,{prop:"currency",label:"收款币种"},{default:o(()=>[a(g,{type:"currency",modelValue:e.currency,"onUpdate:modelValue":l[3]||(l[3]=t=>e.currency=t),placeholder:"请选择收款币种"},null,8,["modelValue"])]),_:1}),a(r,{prop:"turnover",label:"单月营业额"},{default:o(()=>[a(g,{type:"turnover",modelValue:e.turnover,"onUpdate:modelValue":l[4]||(l[4]=t=>e.turnover=t),placeholder:"请选择单月营业额"},null,8,["modelValue"])]),_:1}),a(r,{prop:"region",label:"业务分布地区"},{default:o(()=>[a(g,{type:"region",modelValue:e.region,"onUpdate:modelValue":l[5]||(l[5]=t=>e.region=t),placeholder:"请选择业务分布地区"},null,8,["modelValue"])]),_:1}),a(r,{prop:"timezoneName",label:"站点时区"},{default:o(()=>[a(g,{type:"timezone",modelValue:e.timezoneName,"onUpdate:modelValue":l[6]||(l[6]=t=>e.timezoneName=t),placeholder:"请选择站点时区"},null,8,["modelValue"])]),_:1}),a(r,{prop:"desc",label:"业务/产品描述 (选填)"},{default:o(()=>[a(n,{type:"textarea",rows:3,modelValue:e.desc,"onUpdate:modelValue":l[7]||(l[7]=t=>e.desc=t),placeholder:`请简单描述你的业务/产品。
举例：我们面向美国经营服装零售业务，售卖产品包括女装和童装。`,maxlength:"150"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[m("div",W,[a(p,{type:"primary",loading:h.value,onClick:l[8]||(l[8]=t=>T(w.value))},{default:o(()=>[_("提交认证")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["rules","model"])]))]),_:1},8,["modelValue"])}}}),me=B(te,[["__scopeId","data-v-7c2b006e"]]);export{me as C,G as _};
