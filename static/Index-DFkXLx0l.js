import{l as G,d as X,r as h,m as z,p as D,q as a,u as N,J as Y,aE as ee,Z as H,z as te,ah as b,F as ae,a7 as oe,T as B,U as u,O as v,P as $,V as O,M as j,R as J,S as K,aF as le,aG as se}from"./vue-BtEXIrqH.js";import{_ as ne}from"./LIKU-logo-BbnHVERV.js";import{_ as Q,f as ie,e as ce,h as re}from"./index-Cfrc5ih1.js";import{l as ue}from"./commonFn-Ei0WKKhK.js";import{E as M}from"./element-BbMnn7tA.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const de=["width","height"],pe="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",fe=6,he=50,me=G({__name:"Captcha",props:["width","height","letters","length","minFontSize","maxFontSize"],emits:["cb"],setup(S,{expose:P,emit:q}){const k=q;X(()=>{e.value=t.value.getContext("2d"),T()});const A=S,{width:c=120,height:m=46,letters:I=pe,length:g=4,minFontSize:F=20,maxFontSize:V=30}=A,t=h(null),e=h(),n=(l,s)=>Math.floor(Math.random()*(s-l)+l),x=(l,s)=>`rgb(${n(l,s)}, ${n(l,s)}, ${n(l,s)})`,w=()=>{let l="";for(let s=0;s<g;s+=1){const y=n(F,V),_=V-F+6,i=(c-_*g)/(g+1),o=(s+1)*i+_*s,r=n(22,m),d=n(-40,40),f=n(0,I.length),C=I[f];e.value.textBaseline="alphabetic",e.value.font=`${y}px Simhei`,e.value.fillStyle=x(60,150),e.value.save(),e.value.translate(o,r),e.value.rotate(d*Math.PI/180),e.value.fillText(C,0,0),e.value.restore(),l+=C}k("cb",l)},Z=()=>{for(let l=0;l<fe;l+=1){const s=n(0,e.value.canvas.clientWidth),y=n(0,e.value.canvas.clientHeight),_=n(0,e.value.canvas.clientWidth),i=n(0,e.value.canvas.clientHeight);e.value.beginPath(),e.value.moveTo(s,y),e.value.lineTo(_,i),e.value.lineWidth=1,e.value.strokeStyle=x(150,250),e.value.stroke()}},W=()=>{for(let l=0;l<he;l+=1){const s=n(0,e.value.canvas.clientWidth),y=n(0,e.value.canvas.clientHeight),_=n(1,2);e.value.beginPath(),e.value.arc(s,y,_,0,2*Math.PI),e.value.fillStyle=x(100,200),e.value.fill()}},T=()=>{e.value.fillStyle=x(200,230),e.value.fillRect(0,0,c,m),w(),Z(),W()},L=()=>{T()};return P({handleClick:L}),(l,s)=>(z(),D("div",{class:"captcha",style:Y({width:N(c)+"px",height:N(m)+"px"})},[a("canvas",{onClick:L,ref_key:"verifyCodeRef",ref:t,width:N(c)-2,height:N(m)-2},null,8,de)],4))}}),ve=Q(me,[["__scopeId","data-v-004ce377"]]),R=S=>(le("data-v-19cd508e"),S=S(),se(),S),_e={class:"login flex-center"},ge={class:"left h-full hidden-md-and-down flex-center flex-wrap flex-col"},xe=R(()=>a("img",{src:ne},null,-1)),we=[xe],ye={class:"flex-1 ml-38px"},Ce={class:"item-title mb-12"},Se={class:"item-text"},ke={class:"right flex-center"},Ie={class:"max-410"},be={class:"top-text"},Ve=R(()=>a("span",null,"登录 LIKU",-1)),ze={class:"relative w-full"},Re={class:"flex w-full justify-end forget-pass cursor-pointer absolute bottom-0 right-0 b--30"},Ae=R(()=>a("div",{id:"cf-turnstile",style:{width:"100%"}},null,-1)),Fe={class:"relative w-full"},Te={class:"flex w-full"},Le={href:"https://t.me/LikuPay",target:"_blank",class:"mt-90 flex-center w-full cursor-pointer contact-btn"},Ee=R(()=>a("span",{class:"ml-5"},"联系客服",-1)),Ue=R(()=>a("div",{class:"copyright mt-86"},"© LIKU Pay 2024",-1)),Ne=G({__name:"Index",setup(S){const P={isLockedOut:"账号已禁用",isNotFound:"账号不存在",isNotAllow:"账号权限不足",incorrectPassword:"密码不正确",requiresTwoFactor:"请二次验证",requiresEmailConfirmed:"请验证邮箱地址"},q=[{title:"全球收单",text:"全球超过 160 多个国家和支付方式",icon:"icon-quanqiushoudan"},{title:"多场景支付",text:"轻松实现多场景支付，满足多样化业务收款需求",icon:"icon-duochangjingzhifu"},{title:"自由结算",text:"财务透明无隐藏费用，支持法币和加密货币实时结算",icon:"icon-ziyoujiesuan1"},{title:"安全稳定",text:"最严密的加密支付架构，为您的资金安全保驾护航",icon:"icon-anquanwending"}],k=h(!1),A=ee(),c=h(!1),m=h("发送验证码"),I=h(!1),g=h(!1),F=h("large"),V=h(),t=H({email:"",password:"",code:"",captcha:"",challengeId:""}),e=h(""),n=h();let x,w;const W=H({email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{validator:(i,o,r)=>{o===""?r(new Error("请输入验证码")):o.toUpperCase()!==e.value?(r(new Error("验证码错误")),n.value.handleClick()):r()},trigger:"blur"}]}),T=i=>{e.value=i},L=async i=>{if(k.value){M.error("正在加载人机验证");return}i&&await i.validate(o=>{if(o){const r={email:t.email,password:t.password,code:t.code,challengeId:t.challengeId,captcha:t.captcha};I.value=!0,ie().login(r).then(d=>{var C;if(console.log(d,"res"),!d.data.id){let E="登录失败，请重试";for(const U in d.data)d.data[U]==="1"&&(E=P[U]);M.error(E);return}const f=JSON.parse(ce("user-info")||"{}");!f.latestLoginAt&&!f.latestLoginAt&&((C=f.profile)!=null&&C.includes("merchant"))?A.push({path:"/merchant/auth"}):A.push({path:"/"})}).catch(()=>{}).finally(()=>{I.value=!1})}})},l=()=>{w&&w(),c.value=!c.value,c.value||s(),t.code=""},s=async()=>{x=()=>{k.value=!0;try{turnstile.render("#cf-turnstile",{sitekey:"0x4AAAAAAAIxM-Ap2BkOCl-B",width:"100%",theme:"light",language:"zh-tw",callback:function(i){t.code=i,k.value=!1}})}catch(i){k.value=!1,c.value=!0,console.error(i,"turnstile is not exist")}},w=()=>{console.debug("_turnstileCb remove");try{turnstile.remove()}catch(i){console.error(i,"turnstile is not exist")}},await ue(),x()},y=async()=>{if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.email)){M({message:"邮箱格式不正确",type:"error"});return}if(g.value)return;g.value=!0,m.value="发送中";const o={challengeType:"EmailConfirmCode",email:t.email};try{const r=await re(o);t.challengeId=r.data.challengeId,M({message:"验证码已发送",type:"success"}),m.value=60;const d=window.setInterval(()=>{m.value--<=0&&(m.value="发送验证码",g.value=!1,window.clearInterval(d))},1e3)}catch(r){console.log("getCaptcha",r)}},_=()=>{window.location.href="https://pay.liku.io"};return X(()=>{c.value||s()}),te(()=>{w&&w()}),(i,o)=>{const r=b("SvgIcon"),d=b("el-input"),f=b("el-form-item"),C=b("el-button"),E=b("router-link"),U=b("el-form");return z(),D("div",_e,[a("div",ge,[a("div",{class:"logo cursor-pointer",onClick:_},we),(z(),D(ae,null,oe(q,p=>a("div",{class:"item flex-center",key:p.title},[u(r,{name:p.icon,size:"60px",color:"#FE9A88"},null,8,["name"]),a("div",ye,[a("div",Ce,B(p.title),1),a("div",Se,B(p.text),1)])])),64))]),a("div",ke,[a("div",Ie,[a("div",be,[Ve,a("span",{onClick:l,class:"cursor-pointer"},B(c.value?"返回":"使用邮箱验证登录"),1)]),u(U,{ref_key:"ruleFormRef",ref:V,style:{"max-width":"450px"},model:t,rules:W,class:"demo-ruleForm",size:F.value},{default:v(()=>[u(f,{prop:"email"},{default:v(()=>[u(d,{modelValue:t.email,"onUpdate:modelValue":o[0]||(o[0]=p=>t.email=p),placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1}),$(u(f,{prop:"password"},{default:v(()=>[a("div",ze,[u(d,{type:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=p=>t.password=p),"show-password":"",placeholder:"请输入密码"},null,8,["modelValue"]),$(a("div",Re," 忘记密码？ ",512),[[O,!c.value]])])]),_:1},512),[[O,!c.value]]),$(u(f,{prop:"code"},{default:v(()=>[Ae]),_:1},512),[[O,!c.value]]),c.value?(z(),j(f,{key:0,prop:"code"},{default:v(()=>[a("div",Fe,[u(d,{modelValue:t.code,"onUpdate:modelValue":o[2]||(o[2]=p=>t.code=p),placeholder:"请输入邮箱验证码"},null,8,["modelValue"]),a("span",{onClick:y,class:"absolute abs-center"},B(m.value),1)])]),_:1})):J("",!0),c.value?(z(),j(f,{key:1,prop:"captcha"},{default:v(()=>[a("div",Te,[u(d,{class:"flex-1",modelValue:t.captcha,"onUpdate:modelValue":o[3]||(o[3]=p=>t.captcha=p),placeholder:"请输入验证码"},null,8,["modelValue"]),u(ve,{ref_key:"captchaRef",ref:n,class:"ml-14",onCb:T},null,512)])]),_:1})):J("",!0),u(f,null,{default:v(()=>[u(C,{type:"primary",loading:I.value,class:"w-full",onClick:o[4]||(o[4]=p=>L(V.value))},{default:v(()=>[K(" 立即登录 ")]),_:1},8,["loading"]),u(E,{class:"mt-20 w-full register-btn",to:{name:"register"}},{default:v(()=>[K(" 没有账号？去注册")]),_:1}),a("a",Le,[u(r,{name:"icon-lianxikefu"}),Ee])]),_:1})]),_:1},8,["model","rules","size"]),Ue])])])}}}),De=Q(Ne,[["__scopeId","data-v-19cd508e"]]);export{De as default};
