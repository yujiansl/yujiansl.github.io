import{l as H,r as p,aE as J,d as K,ah as u,ap as Z,m as V,p as N,q as l,T as m,U as e,O as s,S as w,P as L,u as c,M as Q,I as T,R as X,aF as Y,aG as ee}from"./vue-BtEXIrqH.js";import{u as te}from"./useTable-Br0VH9YA.js";import{f as ae,i as le}from"./index-B3sZ9j6O.js";import{_ as E}from"./Index.vue_vue_type_script_setup_true_lang-CAnY41O0.js";import{F as oe}from"./Index-BgrOBixy.js";import{V as se}from"./index-BauZgp7a.js";import{c as ne}from"./commonFn-DSVr4W-5.js";import{n as ie,E as C}from"./element-BbMnn7tA.js";import{_ as re}from"./index-bEAPwbJM.js";import"./LIKU-logo-BbnHVERV.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const g=v=>(Y("data-v-0ae40164"),v=v(),ee(),v),de={class:"top-balance base-box flex items-center flex-wrap ml-40 mr-40 mt-20"},ce={class:"balance-item pr-80"},ue=g(()=>l("div",{class:"item-title"},"站点总数",-1)),pe={class:"item-price mt-10 mb-8"},me={class:"balance-item pr-80"},_e=g(()=>l("div",{class:"item-title"},"已认证站点",-1)),ve={class:"item-price mt-10 mb-8"},fe={class:"balance-item"},he=g(()=>l("div",{class:"item-title"},"待审核站点",-1)),be={class:"item-price mt-10 mb-8"},ge=g(()=>l("div",{class:"flex-1"},null,-1)),ye={class:"order base-box p-36 ml-40 mr-40 mt-20"},Ve={class:"top-search"},we={class:"table-wrapper"},Ce={class:"flex"},xe=["onClick"],Se=["onClick"],Ie={class:"pager-wrapper mt-32 flex justify-between"},ke={class:"base-box detail-box"},Re={class:"flex-center mt-60"},De=H({__name:"Index",setup(v){p({});const z=J(),U=p(),d=p({}),f=p({}),h=p(!1),n=p({}),x=p({}),{paginationData:_,handleCurrentChange:F,tableData:M,loadingRef:A,handSearch:S}=te({searchData:{},url:"/merchantapp/all",method:"post",onlyPage:!0});function I(){const o={};for(const a in d.value){const i=d.value[a];i&&(o[a]=i)}S(o)}const P=()=>{d.value={}},B=async()=>{if(!n.value.processStatus){C.error("请选择认证审核状态");return}if(!n.value.challengeResult){C.error("请输入验证码");return}try{const o={claims:[{claimType:"approvalReason",claimValue:n.value.reason}],challengeId:n.value.challengeId,challengeResult:n.value.challengeResult,merchantId:x.value.virtualMerchantId};n.value.processStatus==="1"?o.isVerificated="1":o.isVerificated="00",await ae(o),h.value=!1,C.success("认证审核成功"),S()}catch{}},W=(o,a)=>{var i;return(i=o==null?void 0:o.find(b=>b.claimType===a))==null?void 0:i.claimValue},k=(o,a)=>{x.value=o,a==="process"&&(h.value=!0),a==="management"&&(sessionStorage.setItem("siteData",JSON.stringify(o)),z.push({path:"/site/setting"}))},$=async()=>{try{const o=await le("1");f.value=o.data||{}}catch(o){console.log(o,"e")}};return K(()=>{$(),I()}),(o,a)=>{const i=u("el-form-item"),b=u("el-input"),y=u("el-button"),R=u("el-form"),r=u("el-table-column"),q=u("el-pagination"),D=u("el-option"),G=u("el-select"),O=Z("loading");return V(),N("div",null,[l("div",de,[l("div",ce,[ue,l("div",pe,m(f.value.totalCount||0),1)]),l("div",me,[_e,l("div",ve,m(f.value.verifiedCount||0),1)]),l("div",fe,[he,l("div",be,m(f.value.approvingCount||0),1)]),ge]),l("div",ye,[l("div",Ve,[e(R,{inline:!0,model:d.value,class:"demo-form-inline"},{default:s(()=>[e(i,null,{default:s(()=>[e(E,{placeholder:"全部站点状态",modelValue:d.value.merchantEnabled,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value.merchantEnabled=t),type:"account"},null,8,["modelValue"])]),_:1}),e(i,null,{default:s(()=>[e(E,{placeholder:"全部认证状态",modelValue:d.value.merchantVerificated,"onUpdate:modelValue":a[1]||(a[1]=t=>d.value.merchantVerificated=t),type:"accountAuth"},null,8,["modelValue"])]),_:1}),e(i,null,{default:s(()=>[e(b,{modelValue:d.value.merchantName,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value.merchantName=t),placeholder:"请输入站点名称",clearable:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:s(()=>[e(y,{type:"primary",onClick:P},{default:s(()=>[w("重置")]),_:1}),e(y,{type:"primary",onClick:I},{default:s(()=>[w("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),l("div",we,[L((V(),Q(c(ie),{ref_key:"multipleTableRef",ref:U,data:c(M),style:{width:"100%"}},{default:s(()=>[e(r,{prop:"name",label:"站点名称",width:"180"}),e(r,{prop:"orderNo",label:"认证状态",width:"150"},{default:s(t=>[l("div",{class:T(t.row.isVerificated==="1"?"is-auth":"is-no-auth")},m(t.row.isVerificated==="1"?"已认证":"未认证"),3)]),_:1}),e(r,{prop:"bizNo",label:"站点状态",width:"100"},{default:s(t=>[l("div",{class:T(t.row.isEnabled==="1"?"":"disabled-status")},m(t.row.isEnabled==="1"?"启用":"禁用"),3)]),_:1}),e(r,{prop:"parentMerchantName",label:"所属商户",width:"150"}),e(r,{prop:"price",label:"收款币种",width:"100"},{default:s(t=>[l("div",null,m(W(t.row.claimsValue,"currency")),1)]),_:1}),e(r,{prop:"payWay",label:"收单费率",width:"180"}),e(r,{prop:"payWay",label:"结算周期",width:"180"}),e(r,{prop:"payWay",label:"支付通道",width:"180"}),e(r,{prop:"createdAt",label:"加入时间",width:"180"},{default:s(t=>[l("div",null,m(c(ne)(t.row.createdAt)),1)]),_:1}),e(r,{prop:"payWay",label:"备注",width:"180"}),e(r,{prop:"action",label:"操作",fixed:"right",width:"220"},{default:s(t=>[l("div",Ce,[t.row.isVerificated==="0"?(V(),N("div",{key:0,class:"action-btn cursor-pointer mr-20",onClick:j=>k(t.row,"process")},"审核 ",8,xe)):X("",!0),l("div",{class:"action-btn cursor-pointer",onClick:j=>k(t.row,"management")},"管理站点",8,Se)])]),_:1})]),_:1},8,["data"])),[[O,c(A)]])]),l("div",Ie,[e(q,{background:"",layout:c(_).layout,"page-sizes":c(_).pageSizes,total:c(_).total,"page-size":c(_).pageSize,currentPage:c(_).currentPage,onCurrentChange:c(F)},null,8,["layout","page-sizes","total","page-size","currentPage","onCurrentChange"])]),e(oe,{modelValue:h.value,"onUpdate:modelValue":a[8]||(a[8]=t=>h.value=t)},{default:s(()=>[l("div",ke,[e(R,{"label-position":"top","label-width":"auto",model:n.value},{default:s(()=>[e(i,{label:"认证审核操作"},{default:s(()=>[e(G,{modelValue:n.value.processStatus,"onUpdate:modelValue":a[3]||(a[3]=t=>n.value.processStatus=t),placeholder:"请选择审核状态"},{default:s(()=>[e(D,{label:"审核通过",value:"1"}),e(D,{label:"审核不通过",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"驳回理由"},{default:s(()=>[e(b,{modelValue:n.value.reason,"onUpdate:modelValue":a[4]||(a[4]=t=>n.value.reason=t),placeholder:"请输入驳回理由"},null,8,["modelValue"])]),_:1}),e(se,{modelValue:n.value.challengeResult,"onUpdate:modelValue":a[5]||(a[5]=t=>n.value.challengeResult=t),onGetChallengeId:a[6]||(a[6]=t=>n.value.challengeId=t)},null,8,["modelValue"]),l("div",Re,[e(y,{type:"primary",onClick:a[7]||(a[7]=t=>B())},{default:s(()=>[w("提交认证")]),_:1})])]),_:1},8,["model"])])]),_:1},8,["modelValue"])])])}}}),qe=re(De,[["__scopeId","data-v-0ae40164"]]);export{qe as default};
