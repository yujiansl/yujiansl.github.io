import{i as b}from"./index-bEAPwbJM.js";import{t as D}from"./commonFn-DSVr4W-5.js";import{r as l,Z as z}from"./vue-BtEXIrqH.js";const R={total:0,currentPage:1,pageSizes:[15,20,50],pageSize:15,layout:"prev, pager, next"};let c=[];function T(g,d={}){const{url:f,method:m="POST",headers:p,searchData:q,onlyPage:i=!1,condition:u}=g,t=l(!1),s=l([]),e=z({...R,...d}),h=n=>{e.currentPage=n,r()};function P(n=[],a=""){e.currentPage=1,c=n,r(a)}function v(){e.currentPage=1,r()}const r=(n="")=>{if(t.value)return;const a={paging:{pageNumber:e.currentPage||1,pageSize:e.pageSize||15},searchItems:c||[],sorting:{columnNames:["createdAt"],direction:"desc"}};i&&(delete a.searchItems,delete a.sorting,a.condition=c),u&&(a.condition=u),t.value=!0,b({url:n||f,method:m,data:a,headers:p}).then(S=>{const{data:o}=S;return s.value=i?o.items:D(o.rows),e.total=o.paging.totalCount||0,t.value=!1,o}).catch(()=>{s.value=[],e.total=0,e.currentPage=1,t.value=!1})};return{paginationData:e,handleCurrentChange:h,tableData:s,queryTableData:r,handSearch:P,reset:v,loadingRef:t}}export{T as u};
