import{l as Z,r as _,aE as J,d as L,ah as m,ap as Q,m as f,p as v,q as o,T as c,U as t,O as l,S as R,P as W,u,M as X,I as F,R as b,aF as Y,aG as ee}from"./vue-BtEXIrqH.js";import{u as te}from"./useTable-B7hd0WvU.js";import{m as ae,i as le}from"./index-C7XNEq9c.js";import{_ as N}from"./Index.vue_vue_type_script_setup_true_lang-TK6O32Dg.js";import{F as oe}from"./Index-Di390-Cq.js";import{V as se}from"./index-BwQtaG9W.js";import{a as ne}from"./commonFn-Ei0WKKhK.js";import{n as ie,E as S}from"./element-BbMnn7tA.js";import{_ as re}from"./index-Cfrc5ih1.js";import"./LIKU-logo-BbnHVERV.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const C=w=>(Y("data-v-0c64afb2"),w=w(),ee(),w),ce={class:"top-balance base-box flex items-center flex-wrap ml-40 mr-40 mt-20"},de={class:"balance-item pr-80"},ue=C(()=>o("div",{class:"item-title"},"站点总数",-1)),me={class:"item-price mt-10 mb-8"},pe={class:"balance-item pr-80"},_e=C(()=>o("div",{class:"item-title"},"已认证站点",-1)),fe={class:"item-price mt-10 mb-8"},ve={class:"balance-item"},he=C(()=>o("div",{class:"item-title"},"待审核站点",-1)),be={class:"item-price mt-10 mb-8"},we=C(()=>o("div",{class:"flex-1"},null,-1)),ge={class:"order base-box p-36 ml-40 mr-40 mt-20"},ye={class:"top-search"},Ve={class:"table-wrapper"},Ce={key:0},ke={key:0},xe={key:0},Re={key:0},Se={class:"flex"},De=["onClick"],Ie=["onClick"],Te={class:"pager-wrapper mt-32 flex justify-between"},Ee={class:"base-box detail-box"},Fe={class:"flex-center mt-60"},Ne=Z({__name:"Index",setup(w){_({});const z=J(),P=_(),d=_({}),g=_({}),y=_(!1),n=_({}),D=_({}),{paginationData:h,handleCurrentChange:U,tableData:M,loadingRef:A,handSearch:B}=te({searchData:{},url:"/merchantapp/all",method:"post",onlyPage:!0});function k(){const s={};for(const a in d.value){const i=d.value[a];i&&(s[a]=i)}B(s)}const $=()=>{d.value={}},j=async()=>{if(!n.value.processStatus){S.error("请选择认证审核状态");return}if(!n.value.challengeResult){S.error("请输入验证码");return}try{const s={claims:[{claimType:"approvalReason",claimValue:n.value.reason}],challengeResult:n.value.challengeResult,merchantId:D.value.virtualMerchantId};n.value.processStatus==="1"?s.isVerificated="1":s.isRejected="1",await ae(s),y.value=!1,S.success("认证审核成功"),k()}catch(s){console.log(s,"processSubmit")}},p=(s,a)=>{var i;return(i=s==null?void 0:s.find(V=>V.claimType===a))==null?void 0:i.claimValue},I=(s,a)=>{D.value=s,a==="process"&&(y.value=!0),a==="management"&&z.push({path:"/site/setting",query:{id:s.virtualMerchantId}})},q=async()=>{try{const s=await le("1");g.value=s.data||{}}catch(s){console.log(s,"e")}};return L(()=>{q(),k()}),(s,a)=>{const i=m("el-form-item"),V=m("el-input"),x=m("el-button"),T=m("el-form"),r=m("el-table-column"),G=m("el-pagination"),E=m("el-option"),H=m("el-select"),K=Q("loading");return f(),v("div",null,[o("div",ce,[o("div",de,[ue,o("div",me,c(g.value.totalCount||0),1)]),o("div",pe,[_e,o("div",fe,c(g.value.verifiedCount||0),1)]),o("div",ve,[he,o("div",be,c(g.value.approvingCount||0),1)]),we]),o("div",ge,[o("div",ye,[t(T,{inline:!0,model:d.value,class:"demo-form-inline"},{default:l(()=>[t(i,null,{default:l(()=>[t(N,{placeholder:"全部站点状态",modelValue:d.value.merchantEnabled,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value.merchantEnabled=e),type:"account"},null,8,["modelValue"])]),_:1}),t(i,null,{default:l(()=>[t(N,{placeholder:"全部认证状态",modelValue:d.value.merchantVerificated,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value.merchantVerificated=e),type:"accountAuth"},null,8,["modelValue"])]),_:1}),t(i,null,{default:l(()=>[t(V,{modelValue:d.value.merchantName,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value.merchantName=e),placeholder:"请输入站点名称",clearable:""},null,8,["modelValue"])]),_:1}),t(i,null,{default:l(()=>[t(x,{type:"primary",onClick:$},{default:l(()=>[R("重置")]),_:1}),t(x,{type:"primary",onClick:k},{default:l(()=>[R("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),o("div",Ve,[W((f(),X(u(ie),{ref_key:"multipleTableRef",ref:P,data:u(M),style:{width:"100%"}},{default:l(()=>[t(r,{prop:"name",label:"站点名称",width:"180"}),t(r,{prop:"orderNo",label:"认证状态",width:"150"},{default:l(e=>[o("div",{class:F(e.row.isVerificated==="1"?"is-auth":"is-no-auth")},c(e.row.isVerificated==="1"?"已认证":"未认证"),3)]),_:1}),t(r,{prop:"bizNo",label:"站点状态",width:"100"},{default:l(e=>[o("div",{class:F(e.row.isEnabled==="1"?"":"disabled-status")},c(e.row.isEnabled==="1"?"启用":"禁用"),3)]),_:1}),t(r,{prop:"parentMerchantName",label:"所属商户",width:"150"}),t(r,{prop:"currency",label:"收款币种",width:"100"},{default:l(e=>[o("div",null,c(p(e.row.claims,"currency")),1)]),_:1}),t(r,{prop:"serviceFeePercent",label:"收单费率",width:"180"},{default:l(e=>[p(e.row.claims,"serviceFeePercent")?(f(),v("span",Ce,c(p(e.row.claims,"serviceFeePercent")+" ‰"),1)):b("",!0)]),_:1}),t(r,{prop:"settledDays",label:"结算周期",width:"180"},{default:l(e=>[e.row.settledDays?(f(),v("span",ke,c("T + "+e.row.settledDays),1)):b("",!0)]),_:1}),t(r,{prop:"ecomChannel",label:"支付通道",width:"180"},{default:l(e=>[p(e.row.claims,"ecomChannel")?(f(),v("span",xe,c(p(e.row.claims,"ecomChannel")+" 通道"),1)):b("",!0)]),_:1}),t(r,{prop:"createdAt",label:"加入时间",width:"180"},{default:l(e=>[o("div",null,c(u(ne)(e.row.createdAt)),1)]),_:1}),t(r,{prop:"siteRemark",label:"备注",width:"180"},{default:l(e=>[p(e.row.claims,"siteRemark")?(f(),v("span",Re,c(p(e.row.claims,"siteRemark")),1)):b("",!0)]),_:1}),t(r,{prop:"action",label:"操作",fixed:"right",width:"220"},{default:l(e=>[o("div",Se,[o("div",{class:"action-btn cursor-pointer mr-20",onClick:O=>I(e.row,"management")},"管理站点",8,De),e.row.isVerificated==="0"&&e.row.isRejected==="0"?(f(),v("div",{key:0,class:"action-btn cursor-pointer",onClick:O=>I(e.row,"process")},"审核 ",8,Ie)):b("",!0)])]),_:1})]),_:1},8,["data"])),[[K,u(A)]])]),o("div",Te,[t(G,{background:"",layout:u(h).layout,"page-sizes":u(h).pageSizes,total:u(h).total,"page-size":u(h).pageSize,currentPage:u(h).currentPage,onCurrentChange:u(U)},null,8,["layout","page-sizes","total","page-size","currentPage","onCurrentChange"])]),t(oe,{modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value=e)},{default:l(()=>[o("div",Ee,[t(T,{"label-position":"top","label-width":"auto",model:n.value},{default:l(()=>[t(i,{label:"认证审核操作"},{default:l(()=>[t(H,{modelValue:n.value.processStatus,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.processStatus=e),placeholder:"请选择审核状态"},{default:l(()=>[t(E,{label:"审核通过",value:"1"}),t(E,{label:"审核不通过",value:"0"})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"驳回理由"},{default:l(()=>[t(V,{modelValue:n.value.reason,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.reason=e),placeholder:"请输入驳回理由"},null,8,["modelValue"])]),_:1}),t(se,{modelValue:n.value.challengeResult,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.challengeResult=e)},null,8,["modelValue"]),o("div",Fe,[t(x,{type:"primary",onClick:a[6]||(a[6]=e=>j())},{default:l(()=>[R("提交认证")]),_:1})])]),_:1},8,["model"])])]),_:1},8,["modelValue"])])])}}}),Oe=re(Ne,[["__scopeId","data-v-0c64afb2"]]);export{Oe as default};
