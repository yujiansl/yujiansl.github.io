import{u as ve}from"./useTable-B7hd0WvU.js";import{F as ue}from"./Index-Di390-Cq.js";import{d as be,g as he,c as de}from"./index-BqctQlg1.js";import{u as Ve,b as ye,a as we,e as ke,f as Ae}from"./index-BRvIyV96.js";import{a as te}from"./commonFn-Ei0WKKhK.js";import{l as le,aK as Se,Z as N,aE as ie,r as b,aL as ce,b as xe,ah as p,m as g,p as V,U as e,O as t,q as a,S as U,T as v,u as x,F as ae,aF as oe,aG as ne,M as Y,a7 as me,d as Ne,ap as Ue,P as Ce}from"./vue-BtEXIrqH.js";import{b as Re}from"./validate-JA1bY0wI.js";import{V as X}from"./index-BwQtaG9W.js";import{E as I,n as Ee}from"./element-BbMnn7tA.js";import{_ as se}from"./index-Cfrc5ih1.js";import{_ as Ie}from"./Index.vue_vue_type_script_setup_true_lang-TK6O32Dg.js";import"./LIKU-logo-BbnHVERV.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const k=y=>(oe("data-v-ec0e1e41"),y=y(),ne(),y),Te=k(()=>a("div",{class:"delete-confirm-warning"}," 确定删除结算账户吗？ ",-1)),$e={class:"delete-google-otp"},De={class:"delete-confirm-footer"},Pe={key:0,class:"base-box detail-box"},qe={class:"detail-line"},Fe=k(()=>a("span",{class:"detail-line-title"},"谷歌验证器",-1)),Le={key:0,class:"detail-line-value"},ze={key:1,class:"detail-line-value"},Me={class:"detail-line"},Ge=k(()=>a("span",{class:"detail-line-title"},"注册时间",-1)),Be={class:"detail-line-value"},Oe={class:"detail-line"},je=k(()=>a("span",{class:"detail-line-title"},"最后登录时间",-1)),Ke={key:0,class:"detail-line-value"},Ze={key:1,class:"detail-line-value"},He={class:"detail-line"},We=k(()=>a("span",{class:"detail-line-title"},"最后登录IP",-1)),Je={key:0,class:"detail-line-value"},Qe={key:1,class:"detail-line-value"},Xe={class:"flex-center w-full mt-30"},Ye={key:0,class:"verificated flex-center"},et={key:1,class:"not-verificated flex-center"},tt={key:0},lt={key:1,class:"lockout-status-text"},at={key:1,class:"base-box detail-box"},ot=k(()=>a("div",{class:"flex-center w-full mt-30 settlement-account-detail-title"},"结算账户详情",-1)),nt={key:0},st={class:"settlement-account-detail-line"},rt=k(()=>a("span",{class:"settlement-account-field"},"结算币种：",-1)),dt={class:"settlement-account-value"},ut={class:"settlement-account-detail-line"},it=k(()=>a("span",{class:"settlement-account-field"},"银行国家/地区：",-1)),ct={class:"settlement-account-value"},mt={class:"settlement-account-detail-line"},pt=k(()=>a("span",{class:"settlement-account-field"},"银行名称：",-1)),_t={class:"settlement-account-value"},gt={class:"settlement-account-detail-line"},ft=k(()=>a("span",{class:"settlement-account-field"},"银行地址：",-1)),vt={class:"settlement-account-value"},bt={class:"settlement-account-detail-line"},ht=k(()=>a("span",{class:"settlement-account-field"},"结算账户名称：",-1)),Vt={class:"settlement-account-value"},yt={class:"settlement-account-detail-line"},wt=k(()=>a("span",{class:"settlement-account-field"},"银行账号：",-1)),kt={class:"settlement-account-value"},At={class:"settlement-account-detail-line"},St=k(()=>a("span",{class:"settlement-account-field"},"公司地址：",-1)),xt={class:"settlement-account-value"},Nt={key:1},Ut={class:"settlement-account-detail-line"},Ct=k(()=>a("span",{class:"settlement-account-field"},"结算币种：",-1)),Rt={class:"settlement-account-value"},Et={class:"settlement-account-detail-line"},It=k(()=>a("span",{class:"settlement-account-field"},"USDT 钱包地址：",-1)),Tt={class:"settlement-account-value"},$t={class:"settlement-account-detail-line"},Dt=k(()=>a("span",{class:"settlement-account-field"},"钱包名称/备注：",-1)),Pt={class:"settlement-account-value"},qt={class:"flex-center w-full mt-30 settlement-account-return-btn"},Ft=le({__name:"Detail",props:Se({id:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(y){const T=(i,l,r)=>{l===""||Re(l)?r():r(new Error("密码格式错误"))},w=(i,l,r)=>{l===""?r():l!==m.password?r(new Error("两次输入的密码不一致")):r()},F=y,h=N({id:"",agentName:"",nameCode:"",currency:"",payWayName:"",multiply:"",timezone:"",wallet:"",callback:"",payChannel:"",seq:"",email:"",remark:"",account:"",createdAt:"",lastLoginIP:"",lastLoginTime:"",isEnabled:"",isEnableGoogleAuth:""}),m=N({id:"",userId:"",agentName:"",isEnabled:!0,password:"",rePassword:"",remark:"",challengeResult:""}),f=N({agentName:[{required:!0,message:"请输入代理名称",trigger:"blur"}],password:[{required:!1,validator:T,trigger:"change"}],rePassword:[{required:!1,validator:w,trigger:"change"}]}),R=N({id:"",challengeResult:""}),c=ie(),_=b({}),L=b(null),z=b(null),D=ce(y,"modelValue"),P=b(!0),q=b(!1),J=b(),Z=b(),M=b("agentInfo"),G=b(""),S=async i=>{i&&await i.validate((l,r)=>{if(l)try{Ve(m).then(()=>{I.success("保存成功")}).catch(A=>{I.error("操作失败"),console.error(A)})}catch(A){console.error(A)}else console.e("error submit!",r)})},o=()=>{const i={agentId:F.id,pageNo:1,pageSize:15},l=new URLSearchParams(Object.entries(i)).toString();we(l).then(r=>{r.data.results&&(L.value=r.data.results)}).catch(r=>{console.error(r)})},u=()=>{const i=[];i.push({columnName:"luAgent",value:F.id}),he({searchItems:i}).then(r=>{z.value=r.data.rows}).catch(r=>{console.error(r)})},s=(i,l)=>{i.paneName==="relativeSites"&&!L.value&&o(),i.paneName==="settlementAccount"&&!z.value&&u()},B=i=>{G.value=i.currency.value,_.value=i,P.value=!1},O=i=>{P.value=!0},j=()=>{q.value=!0},$=async i=>{i&&await i.validate((l,r)=>{if(l)try{R.id=_.value.id.value,be(R).then(A=>{I.success("删除成功"),setTimeout(()=>{window.location.reload()},1e3)}).catch(A=>{I.error("操作失败"),console.log(A)})}catch(A){console.error(A)}else console.e("error submit!",r)})},H=i=>i==="1"?"正常":"禁用",W=i=>i==="1"?"已认证":"未认证",C=i=>{const l={virtualMerchantId:i};c.push({path:"/site/setting",query:l})},n=async()=>{const i={id:F.id,account:"yes"},l=new URLSearchParams(Object.entries(i)).toString();ye(l).then(r=>{h.email=r.data.email,h.isEnableGoogleAuth=r.data.isEnableGoogleAuth,h.createdAt=r.data.createdAt,h.lastLoginIP=r.data.lastLoginIP,h.lastLoginTime=r.data.lastLoginTime,m.id=r.data.id,m.userId=r.data.userId,m.agentName=r.data.agentName,m.remark=r.data.remark,m.isEnabled=r.data.isEnabled}).catch(r=>{console.error(r)})};return xe(N(D),i=>{i&&n()}),(i,l)=>{const r=p("el-form"),A=p("el-button"),pe=p("el-dialog"),Q=p("el-input"),K=p("el-form-item"),_e=p("el-switch"),ee=p("el-tab-pane"),E=p("el-table-column"),re=p("el-table"),ge=p("el-tabs");return g(),V(ae,null,[e(pe,{modelValue:q.value,"onUpdate:modelValue":l[3]||(l[3]=d=>q.value=d),center:"",style:{width:"480px"}},{footer:t(()=>[a("div",De,[e(A,{type:"primary",onClick:l[1]||(l[1]=d=>$(Z.value))},{default:t(()=>[U(" 确定删除 ")]),_:1}),e(A,{onClick:l[2]||(l[2]=d=>q.value=!1)},{default:t(()=>[U("取消")]),_:1})])]),default:t(()=>[Te,a("div",$e,[e(r,{ref_key:"deleteSettlementAccountFormRef",ref:Z,"label-position":"top","label-width":"auto",model:R},{default:t(()=>[e(X,{modelValue:R.challengeResult,"onUpdate:modelValue":l[0]||(l[0]=d=>R.challengeResult=d)},null,8,["modelValue"])]),_:1},8,["model"])])]),_:1},8,["modelValue"]),e(ue,{modelValue:D.value,"onUpdate:modelValue":l[13]||(l[13]=d=>D.value=d),title:"代理设置"},{default:t(()=>[P.value?(g(),V("div",Pe,[e(ge,{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=d=>M.value=d),class:"modal-tabs",onTabClick:s},{default:t(()=>[e(ee,{label:"账户信息",name:"agentInfo"},{default:t(()=>[e(r,{ref_key:"agentFormRef",ref:J,"label-position":"top",rules:f,"label-width":"auto",model:m,class:"mt-24"},{default:t(()=>[e(K,{prop:"email",label:"登录邮箱"},{default:t(()=>[e(Q,{modelValue:h.email,"onUpdate:modelValue":l[4]||(l[4]=d=>h.email=d),placeholder:"请输入登录邮箱",maxlength:"50",disabled:""},null,8,["modelValue"])]),_:1}),e(K,{prop:"agentName",label:"代理名称"},{default:t(()=>[e(Q,{modelValue:m.agentName,"onUpdate:modelValue":l[5]||(l[5]=d=>m.agentName=d),placeholder:"请输入代理名称",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(K,{prop:"password",label:"密码"},{default:t(()=>[e(Q,{modelValue:m.password,"onUpdate:modelValue":l[6]||(l[6]=d=>m.password=d),placeholder:"请输入密码",type:"password",minlength:"8",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(K,{prop:"rePassword",label:"确认密码"},{default:t(()=>[e(Q,{modelValue:m.rePassword,"onUpdate:modelValue":l[7]||(l[7]=d=>m.rePassword=d),placeholder:"请再次确认密码",type:"password",minlength:"8",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(K,{prop:"remark",label:"代理备注"},{default:t(()=>[e(Q,{modelValue:m.remark,"onUpdate:modelValue":l[8]||(l[8]=d=>m.remark=d),placeholder:"备注信息仅管理员可见",type:"textarea",rows:3,maxlength:"50"},null,8,["modelValue"])]),_:1}),e(K,{prop:"isEnabled",label:"账号状态"},{default:t(()=>[e(_e,{modelValue:m.isEnabled,"onUpdate:modelValue":l[9]||(l[9]=d=>m.isEnabled=d),"inline-prompt":"","active-text":"正常","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),e(X,{modelValue:m.challengeResult,"onUpdate:modelValue":l[10]||(l[10]=d=>m.challengeResult=d)},null,8,["modelValue"]),a("div",qe,[Fe,h.isEnableGoogleAuth?(g(),V("span",Le,"已启用")):(g(),V("span",ze,"未启用"))]),a("div",Me,[Ge,a("span",Be,v(x(te)(h.createdAt)),1)]),a("div",Oe,[je,h.lastLoginTime!="0001-01-01 00:00:00"?(g(),V("span",Ke,v(x(te)(h.lastLoginTime)),1)):(g(),V("span",Ze,"无"))]),a("div",He,[We,h.lastLoginIP?(g(),V("span",Je,v(h.lastLoginIP),1)):(g(),V("span",Qe,"无"))]),e(K,null,{default:t(()=>[a("div",Xe,[e(A,{type:"primary",onClick:l[11]||(l[11]=d=>S(J.value))},{default:t(()=>[U("保存")]),_:1})])]),_:1})]),_:1},8,["rules","model"])]),_:1}),e(ee,{label:"关联站点",name:"relativeSites"},{default:t(()=>[e(re,{data:L.value,style:{width:"100%"}},{default:t(()=>[e(E,{prop:"merchant",label:"站点名称",width:"160"}),e(E,{prop:"isVerificated",label:"认证状态",width:"100"},{default:t(d=>[d.row.isVerificated==="1"?(g(),V("div",Ye,v(W(d.row.isVerificated)),1)):(g(),V("div",et,v(W(d.row.isVerificated)),1))]),_:1}),e(E,{prop:"currency",label:"收款币种",width:"80"}),e(E,{prop:"isEnabled",label:"状态",width:"80"},{default:t(d=>[d.row.isEnabled==="1"?(g(),V("div",tt,v(H(d.row.isEnabled)),1)):(g(),V("div",lt,v(H(d.row.isEnabled)),1))]),_:1}),e(E,{prop:"agentRate",label:"佣金费率",width:"80"}),e(E,{label:"操作",width:"120"},{default:t(d=>[e(A,{link:"",type:"primary",size:"small",onClick:fe=>C(d.row.id)},{default:t(()=>[U(" 管理站点 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(ee,{label:"结算账户",name:"settlementAccount"},{default:t(()=>[e(re,{data:z.value,style:{width:"100%"}},{default:t(()=>[e(E,{prop:"accountName.value",label:"结算账户名称",width:"120"}),e(E,{prop:"currency.value",label:"账户币种",width:"120"}),e(E,{prop:"account.value",label:"收款账户",width:"240"}),e(E,{label:"操作",width:"130"},{default:t(d=>[e(A,{link:"",type:"primary",size:"small",onClick:fe=>B(d.row)},{default:t(()=>[U(" 管理 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])):(g(),V("div",at,[ot,G.value=="USD"?(g(),V("div",nt,[a("div",st,[rt,a("span",dt,v(_.value.currency.value),1)]),a("div",ut,[it,a("span",ct,v(_.value.region.value),1)]),a("div",mt,[pt,a("span",_t,v(_.value.bankName.value),1)]),a("div",gt,[ft,a("span",vt,v(_.value.bankAddress.value),1)]),a("div",bt,[ht,a("span",Vt,v(_.value.accountName.value),1)]),a("div",yt,[wt,a("span",kt,v(_.value.account.value),1)]),a("div",At,[St,a("span",xt,v(_.value.companyAddress.value),1)])])):(g(),V("div",Nt,[a("div",Ut,[Ct,a("span",Rt,v(_.value.currency.value),1)]),a("div",Et,[It,a("span",Tt,v(_.value.account.value),1)]),a("div",$t,[Dt,a("span",Pt,v(_.value.accountName.value),1)])])),a("div",qt,[e(A,{onClick:O},{default:t(()=>[U("返回")]),_:1})]),a("div",{class:"flex-center w-full del-btn cursor-pointer mb-20",onClick:j},"删除结算账户 ")]))]),_:1},8,["modelValue"])],64)}}}),Lt=se(Ft,[["__scopeId","data-v-ec0e1e41"]]),zt=y=>(oe("data-v-4d44e39c"),y=y(),ne(),y),Mt={class:""},Gt={class:"flex-center w-full mt-30"},Bt={class:"mt-24"},Ot=zt(()=>a("div",{class:"select-currency"},[a("span",{class:"select-currency-flag"},"*"),a("span",{class:"select-currency-title"},"选择结算币种")],-1)),jt={class:"flex-center w-full mt-30"},Kt={class:"flex-center w-full mt-30"},Zt=le({__name:"Create",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(y){ie();const T=b("USD"),w=b(""),F=[{value:"USD",label:"USD"},{value:"USDT",label:"USDT"}],h=ce(y,"modelValue"),m=b(),f=N({agentName:"",email:"",isEnabled:!0,password:"",rePassword:"",remark:"",challengeResult:""}),R=N({agentName:[{required:!0,message:"请输入代理名称",trigger:"blur"}],email:[{required:!0,message:"请输入登录邮箱",trigger:"blur",type:"email"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],rePassword:[{required:!0,message:"请输入确认密码",trigger:"change"}]}),c=N({id:"",role:"",currency:"USD",type:"10",region:"",bankName:"",bankAddress:"",account:"",accountName:"",companyAddress:"",remark:"",challengeResult:""}),_=N({id:"",role:"",currency:"USDT",type:"20",currency:"",account:"",accountName:"",challengeResult:""}),L=N({account:[{required:!0,message:"请输入USDT(TRC20)钱包地址",trigger:"blur"}],accountName:[{required:!0,message:"请输入钱包名称/备注",trigger:"blur"}]}),z=N({region:[{required:!0,message:"请选择银行账户开户国家",trigger:"change"}],bankName:[{required:!0,message:"请输入银行名称",trigger:"blur"}],bankAddress:[{required:!0,message:"请输入银行地址",trigger:"blur"}],account:[{required:!0,message:"请输入完整的银行账号",trigger:"blur"}],accountName:[{required:!0,message:"请输入结算账户名称",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入公司所在地址",trigger:"blur"}]}),D=b(),P=b(),q=async S=>{S&&await S.validate((o,u)=>{if(o)try{ke(f).then(s=>{w.value=s.data.id,I.success("保存成功")}).catch(s=>{I.error("操作失败"),console.error(s)})}catch(s){console.error(s)}else console.error("error submit!",u)})},J=async S=>{S&&await S.validate((o,u)=>{if(o)try{c.currency=T,c.role="agent",c.id=w.value,de(c).then(()=>{I.success("保存成功")}).catch(s=>{I.error("操作失败"),console.error(s)})}catch(s){console.error(s)}else console.error("error submit!",u)})},Z=async S=>{S&&await S.validate((o,u)=>{if(o)try{_.currency=T,_.role="agent",c.id=w.value,de(_).then(()=>{I.success("保存成功")}).catch(s=>{I.error("操作失败"),console.error(s)})}catch(s){console.error(s)}else console.error("error submit!",u)})},M=b("agentInfo"),G=(S,o)=>{};return(S,o)=>{const u=p("el-input"),s=p("el-form-item"),B=p("el-switch"),O=p("el-button"),j=p("el-form"),$=p("el-tab-pane"),H=p("el-option"),W=p("el-select"),C=p("el-tabs");return g(),Y(ue,{modelValue:h.value,"onUpdate:modelValue":o[22]||(o[22]=n=>h.value=n),title:"创建新代理"},{default:t(()=>[e(C,{modelValue:M.value,"onUpdate:modelValue":o[21]||(o[21]=n=>M.value=n),class:"base-box detail-box tabs-title",onTabClick:G},{default:t(()=>[e($,{label:"账户信息",name:"agentInfo"},{default:t(()=>[a("div",Mt,[e(j,{ref_key:"agentFormRef",ref:m,"label-position":"top",rules:R,"label-width":"auto",model:f,class:"mt-24"},{default:t(()=>[e(s,{prop:"email",label:"登录邮箱"},{default:t(()=>[e(u,{modelValue:f.email,"onUpdate:modelValue":o[0]||(o[0]=n=>f.email=n),placeholder:"请输入登录邮箱",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(s,{prop:"agentName",label:"代理名称"},{default:t(()=>[e(u,{modelValue:f.agentName,"onUpdate:modelValue":o[1]||(o[1]=n=>f.agentName=n),placeholder:"请输入代理名称",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(s,{prop:"password",label:"密码"},{default:t(()=>[e(u,{modelValue:f.password,"onUpdate:modelValue":o[2]||(o[2]=n=>f.password=n),placeholder:"请输入密码",type:"password",minlength:"8",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(s,{prop:"rePassword",label:"确认密码"},{default:t(()=>[e(u,{modelValue:f.rePassword,"onUpdate:modelValue":o[3]||(o[3]=n=>f.rePassword=n),placeholder:"请再次确认密码",type:"password",minlength:"8",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(s,{prop:"remark",label:"代理备注"},{default:t(()=>[e(u,{modelValue:f.remark,"onUpdate:modelValue":o[4]||(o[4]=n=>f.remark=n),placeholder:"备注信息仅管理员可见",type:"textarea",rows:3,maxlength:"50"},null,8,["modelValue"])]),_:1}),e(s,{prop:"isEnabled",label:"账号状态"},{default:t(()=>[e(B,{modelValue:f.isEnabled,"onUpdate:modelValue":o[5]||(o[5]=n=>f.isEnabled=n),"inline-prompt":"","active-text":"正常","inactive-text":"禁用"},null,8,["modelValue"])]),_:1}),e(X,{modelValue:f.challengeResult,"onUpdate:modelValue":o[6]||(o[6]=n=>f.challengeResult=n)},null,8,["modelValue"]),e(s,null,{default:t(()=>[a("div",Gt,[e(O,{type:"primary",onClick:o[7]||(o[7]=n=>q(m.value))},{default:t(()=>[U("保存")]),_:1})])]),_:1})]),_:1},8,["rules","model"])])]),_:1}),e($,{label:"结算账户",name:"settlementAccount"},{default:t(()=>[a("div",Bt,[Ot,e(W,{class:"select-currency-input",modelValue:T.value,"onUpdate:modelValue":o[8]||(o[8]=n=>T.value=n)},{default:t(()=>[(g(),V(ae,null,me(F,n=>e(H,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),T.value==="USD"?(g(),Y(j,{key:0,ref_key:"settlementAccountFormRef",ref:D,"label-position":"top",rules:z,"label-width":"auto",model:c},{default:t(()=>[e(s,{prop:"region",label:"银行国家/地区"},{default:t(()=>[e(Ie,{modelValue:c.region,"onUpdate:modelValue":o[9]||(o[9]=n=>c.region=n),type:"region",placeholder:"请选择银行账户开户国家"},null,8,["modelValue"])]),_:1}),e(s,{prop:"bankName",label:"银行名称"},{default:t(()=>[e(u,{modelValue:c.bankName,"onUpdate:modelValue":o[10]||(o[10]=n=>c.bankName=n),placeholder:"请输入银行名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(s,{prop:"bankAddress",label:"银行地址"},{default:t(()=>[e(u,{modelValue:c.bankAddress,"onUpdate:modelValue":o[11]||(o[11]=n=>c.bankAddress=n),placeholder:"请输入银行地址",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(s,{prop:"accountName",label:"结算账户名称"},{default:t(()=>[e(u,{modelValue:c.accountName,"onUpdate:modelValue":o[12]||(o[12]=n=>c.accountName=n),placeholder:"请输入结算账户名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(s,{prop:"account",label:"银行账号"},{default:t(()=>[e(u,{modelValue:c.account,"onUpdate:modelValue":o[13]||(o[13]=n=>c.account=n),placeholder:"请输入完整的银行账号",maxlength:"64"},null,8,["modelValue"])]),_:1}),e(s,{prop:"companyAddress",label:"公司地址"},{default:t(()=>[e(u,{modelValue:c.companyAddress,"onUpdate:modelValue":o[14]||(o[14]=n=>c.companyAddress=n),placeholder:"请输入公司所在地址",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(X,{modelValue:c.challengeResult,"onUpdate:modelValue":o[15]||(o[15]=n=>c.challengeResult=n)},null,8,["modelValue"]),e(s,null,{default:t(()=>[a("div",jt,[e(O,{type:"primary",onClick:o[16]||(o[16]=n=>J(D.value))},{default:t(()=>[U("保存")]),_:1})])]),_:1})]),_:1},8,["rules","model"])):(g(),Y(j,{key:1,ref_key:"trcSettlementAccountFormRef",ref:P,"label-position":"top",rules:L,"label-width":"auto",model:_},{default:t(()=>[e(s,{prop:"account",label:"USDT钱包地址"},{default:t(()=>[e(u,{modelValue:_.account,"onUpdate:modelValue":o[17]||(o[17]=n=>_.account=n),placeholder:"请输入USDT(TRC20)钱包地址",maxlength:"64"},null,8,["modelValue"])]),_:1}),e(s,{prop:"accountName",label:"钱包名称/备注"},{default:t(()=>[e(u,{modelValue:_.accountName,"onUpdate:modelValue":o[18]||(o[18]=n=>_.accountName=n),placeholder:"请输入钱包名称备注",maxlength:"30"},null,8,["modelValue"])]),_:1}),e(X,{modelValue:_.challengeResult,"onUpdate:modelValue":o[19]||(o[19]=n=>_.challengeResult=n)},null,8,["modelValue"]),e(s,null,{default:t(()=>[a("div",Kt,[e(O,{type:"primary",onClick:o[20]||(o[20]=n=>Z(P.value))},{default:t(()=>[U("保存 ")]),_:1})])]),_:1})]),_:1},8,["rules","model"]))])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),Ht=se(Zt,[["__scopeId","data-v-4d44e39c"]]),Wt=y=>(oe("data-v-451c1e71"),y=y(),ne(),y),Jt={class:"top-section base-box flex items-center ml-40 mr-40 mt-20"},Qt={class:"pr-80"},Xt=Wt(()=>a("div",{class:"item-title"},"代理总数",-1)),Yt={class:"item-price mt-10 mb-8"},el={class:"order base-box p-36 ml-40 mr-40 mt-20"},tl={class:"top-search"},ll={class:"table-wrapper"},al={key:0},ol={key:1,class:"lockout-status-text"},nl={class:"flex"},sl=["onClick"],rl={class:"pager-wrapper mt-32 flex justify-between"},dl=le({__name:"Index",setup(y){const T=b(),w=N({isEnabled:"",agentName:""}),F=[{label:"禁用",value:"0"},{label:"正常",value:"1"}],h=b(!1),m=b(!1);b({});const f=b(0),R=b(""),{paginationData:c,handleCurrentChange:_,handleSizeChange:L,tableData:z,queryTableData:D,loadingRef:P,handSearch:q,reset:J}=ve({searchData:{},url:"/agent/list",method:"post"});function Z(){const u=[];w.isEnabled&&u.push({columnName:"isEnabled",value:w.isEnabled}),w.agentName&&u.push({columnName:"agentName",value:w.agentName}),q(u)}function M(){w.agentName="",w.isEnabled=""}const G=u=>u==="1"?"正常":"禁用",S=async()=>{try{const u=await Ae();f.value=u.data.totalCount}catch(u){console.error(u)}},o=u=>{R.value=u,h.value=!0};return Ne(()=>{D(),S()}),(u,s)=>{const B=p("el-button"),O=p("el-option"),j=p("el-select"),$=p("el-form-item"),H=p("el-input"),W=p("el-form"),C=p("el-table-column"),n=p("el-pagination"),i=Ue("loading");return g(),V("div",null,[a("div",Jt,[a("div",Qt,[Xt,a("div",Yt,v(f.value),1)]),e(B,{type:"primary",onClick:s[0]||(s[0]=l=>m.value=!0),class:"flex-center create-button"},{default:t(()=>[U(" 创建新代理 ")]),_:1})]),a("div",el,[a("div",tl,[e(W,{inline:!0,model:w,class:"demo-form-inline"},{default:t(()=>[e($,null,{default:t(()=>[e(j,{modelValue:w.isEnabled,"onUpdate:modelValue":s[1]||(s[1]=l=>w.isEnabled=l),placeholder:"全部账户状态",clearable:""},{default:t(()=>[(g(),V(ae,null,me(F,l=>e(O,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e($,null,{default:t(()=>[e(H,{modelValue:w.agentName,"onUpdate:modelValue":s[2]||(s[2]=l=>w.agentName=l),placeholder:"请输入代理名称",clearable:""},null,8,["modelValue"])]),_:1}),e($,null,{default:t(()=>[e(B,{type:"primary",onClick:M},{default:t(()=>[U("重置")]),_:1})]),_:1}),e($,null,{default:t(()=>[e(B,{type:"primary",onClick:Z},{default:t(()=>[U("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),a("div",ll,[Ce((g(),Y(x(Ee),{ref_key:"multipleTableRef",ref:T,data:x(z),style:{width:"100%"}},{default:t(()=>[e(C,{prop:"id",label:"代理ID",width:"180"}),e(C,{prop:"agentName",label:"代理名称",width:"180"}),e(C,{prop:"merchantNum",label:"关联站点",width:"100"}),e(C,{prop:"isEnabled",label:"账号状态",width:"100"},{default:t(l=>[l.row.isEnabled==="1"?(g(),V("div",al,v(G(l.row.isEnabled)),1)):(g(),V("div",ol,v(G(l.row.isEnabled)),1))]),_:1}),e(C,{prop:"remark",label:"备注",width:"240"}),e(C,{prop:"createdAt",label:"注册时间",width:"180"},{default:t(l=>[a("div",null,v(x(te)(l.row.createdAt)),1)]),_:1}),e(C,{prop:"action",label:"操作",fixed:"right",width:"100"},{default:t(l=>[a("div",nl,[a("div",{class:"action-btn cursor-pointer mr-20",onClick:r=>o(l.row.id)},"代理设置",8,sl)])]),_:1})]),_:1},8,["data"])),[[i,x(P)]])]),a("div",rl,[e(n,{background:"",layout:x(c).layout,"page-sizes":x(c).pageSizes,total:x(c).total,"page-size":x(c).pageSize,currentPage:x(c).currentPage,onSizeChange:x(L),onCurrentChange:x(_)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])]),e(Lt,{modelValue:h.value,"onUpdate:modelValue":s[3]||(s[3]=l=>h.value=l),id:R.value},null,8,["modelValue","id"]),e(Ht,{modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=l=>m.value=l)},null,8,["modelValue"])])])}}}),kl=se(dl,[["__scopeId","data-v-451c1e71"]]);export{kl as default};
