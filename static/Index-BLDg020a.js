import{l as te,d as le,r as d,m as L,p as j,q as a,u as M,J as oe,aE as se,aD as ne,Z as G,z as ie,ah as I,F as re,a7 as ce,T as W,U as c,O as h,P as K,V as X,M as Q,R as Y,S as ee,a2 as J,aF as ue,aG as de}from"./vue-C87Wc4A0.js";import{_ as pe}from"./LIKU-logo-CHqxCLOK.js";import{_ as ae,f as me,e as ve,l as fe,h as he}from"./index-c78MVIZI.js";import{P as ge,a as _e,S as xe}from"./Service-CHaiRPXv.js";import{E as D}from"./element-CD5rsoqi.js";import"//at.alicdn.com/t/c/font_4557022_0o7l3b0t8egq.js";import"./vxe-sm_XFqm0.js";import"./Index-BU8kA-XB.js";const we=["width","height"],ye="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",Ce=6,Se=50,Ve=te({__name:"Captcha",props:["width","height","letters","length","minFontSize","maxFontSize"],emits:["cb"],setup(y,{expose:O,emit:R}){const F=R;le(()=>{e.value=g.value.getContext("2d"),A()});const z=y,{width:C=120,height:f=46,letters:S=ye,length:V=4,minFontSize:x=20,maxFontSize:p=30}=z,g=d(null),e=d(),n=(s,i)=>Math.floor(Math.random()*(i-s)+s),k=(s,i)=>`rgb(${n(s,i)}, ${n(s,i)}, ${n(s,i)})`,P=()=>{let s="";for(let i=0;i<V;i+=1){const w=n(x,p),_=p-x+6,T=(C-_*V)/(V+1),H=(i+1)*T+_*i,B=n(22,f),Z=n(-40,40),u=n(0,S.length),t=S[u];e.value.textBaseline="alphabetic",e.value.font=`${w}px Simhei`,e.value.fillStyle=k(60,150),e.value.save(),e.value.translate(H,B),e.value.rotate(Z*Math.PI/180),e.value.fillText(t,0,0),e.value.restore(),s+=t}F("cb",s)},o=()=>{for(let s=0;s<Ce;s+=1){const i=n(0,e.value.canvas.clientWidth),w=n(0,e.value.canvas.clientHeight),_=n(0,e.value.canvas.clientWidth),T=n(0,e.value.canvas.clientHeight);e.value.beginPath(),e.value.moveTo(i,w),e.value.lineTo(_,T),e.value.lineWidth=1,e.value.strokeStyle=k(150,250),e.value.stroke()}},U=()=>{for(let s=0;s<Se;s+=1){const i=n(0,e.value.canvas.clientWidth),w=n(0,e.value.canvas.clientHeight),_=n(1,2);e.value.beginPath(),e.value.arc(i,w,_,0,2*Math.PI),e.value.fillStyle=k(100,200),e.value.fill()}},A=()=>{e.value.fillStyle=k(200,230),e.value.fillRect(0,0,C,f),P(),o(),U()},b=()=>{A()};return O({handleClick:b}),(s,i)=>(L(),j("div",{class:"captcha",style:oe({width:M(C)+"px",height:M(f)+"px"})},[a("canvas",{onClick:b,ref_key:"verifyCodeRef",ref:g,width:M(C)-2,height:M(f)-2},null,8,we)],4))}}),ke=ae(Ve,[["__scopeId","data-v-004ce377"]]),q=y=>(ue("data-v-8d5ee6ec"),y=y(),de(),y),be={class:"login flex-center"},Ie={class:"left h-full hidden-md-and-down flex-center flex-wrap flex-col position-relative"},Re=q(()=>a("div",{class:"logo cursor-pointer"},[a("img",{src:pe})],-1)),Fe={class:"flex-1 ml-38px"},ze={class:"item-title mb-12"},Ae={class:"item-text"},Te=q(()=>a("div",{class:"copyright flex-center"},"© 2024 NewFriend International (HK) Limited",-1)),Le={class:"right flex-center"},qe={class:"max-410"},Pe={class:"top-text"},Ue=q(()=>a("span",null,"登录 LikuPay",-1)),Be={class:"relative w-full"},Ee={class:"flex w-full justify-end forget-pass cursor-pointer absolute bottom-0 right-0 b--30"},Ne=q(()=>a("div",{id:"cf-turnstile",style:{width:"100%"}},null,-1)),$e={class:"relative w-full"},Me={class:"flex w-full"},We={class:"menu-list mt-86 flex-center flex-wrap"},De=q(()=>a("a",{class:"cursor-pointer menu-item",href:"https://t.me/LikuPay",target:"_blank"},"联系客服",-1)),Oe=te({__name:"Index",setup(y){const O={isLockedOut:"账号已禁用",isNotFound:"账号不存在",isNotAllow:"账号权限不足",incorrectPassword:"密码不正确",requiresTwoFactor:"请二次验证",requiresEmailConfirmed:"请验证邮箱地址"},R=d(!1),F=d(!1),z=d(!1),C=[{title:"全球收单",text:"超过 160 个国家和支付方式",icon:"icon-quanqiushoudan"},{title:"免开户费",text:"0开户费 0汇损 0结汇手续费",icon:"icon-miankaihufei"},{title:"自由结算",text:"财务透明 无隐藏费用 实时结算",icon:"icon-ziyoujiesuan1"},{title:"安全稳定",text:"金融级加密方式 保护资金安全",icon:"icon-anquanwending"}],f=d(!1),S=se(),V=ne(),{query:x}=V;console.log("query, ",V);const p=d(!1),g=d("发送验证码"),e=d(!1),n=d(!1),k=d("large"),P=d(),o=G({email:"",password:"",code:"",captcha:"",challengeId:""}),U=d(""),A=d();let b,s;const w=G({email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}],captcha:[{validator:(u,t,m)=>{t===""?m(new Error("请输入验证码")):t.toUpperCase()!==U.value?(m(new Error("验证码错误")),A.value.handleClick()):m()},trigger:"blur"}]}),_=u=>{U.value=u},T=async u=>{if(f.value){D.error("正在加载人机验证");return}u&&await u.validate(t=>{if(t){const m={email:o.email,password:o.password,code:o.code,challengeId:o.challengeId,captcha:o.captcha};e.value=!0,me().login(m).then(r=>{var E,N;if(!(r!=null&&r.data.id)){let $="登录失败，请重试";for(const l in r==null?void 0:r.data)(r==null?void 0:r.data[l])==="1"&&($=O[l]);o.password="",D.error($),setTimeout(()=>{e.value=!1,b()},1e3);return}const v=JSON.parse(ve("user-info")||"{}");x.redirect&&x.redirect.includes("/site/index?vid=")&&((E=v.profile)!=null&&E.includes("merchant"))?S.push({path:x.redirect,query:{vid:x.redirect.split("?vid=")[1]}}):!v.latestLoginAt&&!v.latestLoginAt&&((N=v.profile)!=null&&N.includes("merchant"))?S.push({path:"/merchant/auth"}):S.push({path:"/"})}).catch(()=>{e.value=!1})}})},H=()=>{f.value=!1,s&&s(),p.value=!p.value,p.value||B(),o.code=""},B=async()=>{b=()=>{f.value=!0;try{turnstile.render("#cf-turnstile",{sitekey:"0x4AAAAAAAIxM-Ap2BkOCl-B",width:"100%",theme:"light",language:"zh-tw",callback:function(u){o.code=u,f.value=!1}})}catch(u){f.value=!1,p.value=!0,console.error(u,"turnstile is not exist")}},s=()=>{console.debug("_turnstileCb remove");try{turnstile.remove()}catch(u){console.error(u,"turnstile is not exist")}},await fe(),b()},Z=async()=>{if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o.email)){D({message:"邮箱格式不正确",type:"error"});return}if(n.value)return;n.value=!0,g.value="发送中";const t={challengeType:"EmailConfirmCode",email:o.email};try{const m=await he(t);o.challengeId=m.data.challengeId,D({message:"验证码已发送",type:"success"}),g.value=60;const r=window.setInterval(()=>{g.value--<=0&&(g.value="发送验证码",n.value=!1,window.clearInterval(r))},1e3)}catch(m){console.log("getCaptcha",m)}};return le(()=>{console.log("202405311113 1148"),p.value||B()}),ie(()=>{s&&s()}),(u,t)=>{const m=I("SvgIcon"),r=I("el-input"),v=I("el-form-item"),E=I("el-button"),N=I("router-link"),$=I("el-form");return L(),j("div",be,[a("div",Ie,[Re,(L(),j(re,null,ce(C,l=>a("div",{class:"item flex-center",key:l.title},[c(m,{name:l.icon,size:"60px",color:"#B3BFCA"},null,8,["name"]),a("div",Fe,[a("div",ze,W(l.title),1),a("div",Ae,W(l.text),1)])])),64)),Te]),a("div",Le,[a("div",qe,[a("div",Pe,[Ue,a("span",{onClick:H,class:"cursor-pointer",style:{color:"#798098"}},W(p.value?"使用密码验证登录":"使用邮箱验证登录"),1)]),c($,{ref_key:"ruleFormRef",ref:P,style:{"max-width":"450px"},model:o,rules:w,class:"demo-ruleForm",size:k.value},{default:h(()=>[c(v,{prop:"email"},{default:h(()=>[c(r,{modelValue:o.email,"onUpdate:modelValue":t[0]||(t[0]=l=>o.email=l),placeholder:"请输入邮箱地址",maxlength:"30"},null,8,["modelValue"])]),_:1}),c(v,{prop:"password"},{default:h(()=>[a("div",Be,[c(r,{type:"password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=l=>o.password=l),"show-password":"",placeholder:"请输入密码"},null,8,["modelValue"]),K(a("div",Ee,null,512),[[X,!p.value]])])]),_:1}),K(c(v,{prop:"code"},{default:h(()=>[Ne]),_:1},512),[[X,!p.value]]),p.value?(L(),Q(v,{key:0,prop:"code"},{default:h(()=>[a("div",$e,[c(r,{modelValue:o.code,"onUpdate:modelValue":t[2]||(t[2]=l=>o.code=l),placeholder:"请输入邮箱验证码",maxlength:"8"},null,8,["modelValue"]),a("span",{onClick:Z,class:"absolute abs-center"},W(g.value),1)])]),_:1})):Y("",!0),p.value?(L(),Q(v,{key:1,prop:"captcha"},{default:h(()=>[a("div",Me,[c(r,{class:"flex-1",modelValue:o.captcha,"onUpdate:modelValue":t[3]||(t[3]=l=>o.captcha=l),placeholder:"请输入验证码",maxlength:"8"},null,8,["modelValue"]),c(ke,{ref_key:"captchaRef",ref:A,class:"ml-14",onCb:_},null,512)])]),_:1})):Y("",!0),c(v,null,{default:h(()=>[c(E,{type:"primary",loading:e.value,class:"w-full",onClick:t[4]||(t[4]=l=>T(P.value))},{default:h(()=>[ee(" 立即登录 ")]),_:1},8,["loading"]),c(N,{class:"mt-20 w-full register-btn",to:{name:"register"}},{default:h(()=>[ee("免费注册商户账号")]),_:1})]),_:1})]),_:1},8,["model","rules","size"])]),a("div",We,[a("a",{class:"cursor-pointer menu-item",onClick:t[5]||(t[5]=J(l=>z.value=!0,["stop"]))},"服务条款"),a("a",{class:"cursor-pointer menu-item",onClick:t[6]||(t[6]=J(l=>F.value=!0,["stop"]))},"隐私政策"),a("a",{class:"cursor-pointer menu-item",onClick:t[7]||(t[7]=J(l=>R.value=!0,["stop"]))},"反洗钱和反恐怖政策"),De])]),c(ge,{modelValue:R.value,"onUpdate:modelValue":t[8]||(t[8]=l=>R.value=l)},null,8,["modelValue"]),c(_e,{modelValue:F.value,"onUpdate:modelValue":t[9]||(t[9]=l=>F.value=l)},null,8,["modelValue"]),c(xe,{modelValue:z.value,"onUpdate:modelValue":t[10]||(t[10]=l=>z.value=l)},null,8,["modelValue"])])}}}),Ye=ae(Oe,[["__scopeId","data-v-8d5ee6ec"]]);export{Ye as default};
