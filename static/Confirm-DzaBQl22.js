import{l as D,aD as k,aE as B,r as m,d as S,ah as u,ap as R,m as p,p as b,q as t,T as l,U as s,O as d,S as E,P as I,M,u as _,R as V,aF as q,aG as P}from"./vue-BtEXIrqH.js";import{p as U,b as F}from"./index-DRaevwyq.js";import{c as w,a as y}from"./commonFn-Ei0WKKhK.js";import{E as G}from"./element-BbMnn7tA.js";import{_ as H}from"./index-Cfrc5ih1.js";import"//at.alicdn.com/t/c/font_4557022_266y8yxi6v9.js";import"./vxe-EK889JN8.js";const v=c=>(q("data-v-8f07a26e"),c=c(),P(),c),K={class:"confirm"},L={class:"top-balance base-box flex flex-wrap ml-40 mr-40 mt-20 items-center"},O={class:"balance-item pr-80"},W=v(()=>t("div",{class:"item-title"},"结算账单总额 (USD)",-1)),Z={class:"item-price mt-10 mb-8"},j={class:"balance-item pr-80"},z=v(()=>t("div",{class:"item-title"},"结算订单笔数",-1)),J={class:"item-price mt-10 mb-8"},Q={class:"balance-item"},X=v(()=>t("div",{class:"item-title"},"账单范围时间",-1)),Y={class:"mt-10 mb-8"},$={class:"order base-box p-36 ml-40 mr-40 mt-20"},ee={class:"table-wrapper"},te={key:0},oe=D({__name:"Confirm",setup(c){const h=k(),g=B(),n=m(!1),i=m(!1),a=m({rows:[],settlementTotal:"",startsAt:"",totalCount:"",endsAt:""}),C=async()=>{try{n.value=!0;let e=await U(h.query.processNo);e.data&&e.data.sheet&&(a.value=e.data.sheet||{rows:[]}),n.value=!1}catch(e){console.log(e,"getProcessData"),n.value=!1}},f=e=>(e=y(e),(e==null?void 0:e.substring(0,10))||""),x=async()=>{try{i.value=!0;let e=await F(h.query.processNo);G.success("生成账单成功"),console.log(e,"res"),i.value=!1,g.back()}catch{i.value=!1}};return S(()=>{C()}),(e,ae)=>{const A=u("el-button"),r=u("el-table-column"),N=u("el-table"),T=R("loading");return p(),b("div",K,[t("div",L,[t("div",O,[W,t("div",Z,l(a.value.settlementTotal),1)]),t("div",j,[z,t("div",J,l(a.value.totalCount),1)]),t("div",Q,[X,t("div",Y,l(f(a.value.startsAt)+"至"+f(a.value.endsAt)),1)]),s(A,{type:"primary",loading:i.value,style:{height:"50px"},onClick:x,class:"flex-center"},{default:d(()=>[E(" 确认并生成账单 ")]),_:1},8,["loading"])]),t("div",$,[t("div",ee,[I((p(),M(N,{data:a.value.rows,style:{width:"100%"}},{default:d(()=>[s(r,{prop:"orderNo",label:"订单号",width:"300"}),s(r,{prop:"virtualMerchantName",label:"站点名称",width:"150"}),s(r,{prop:"orderAmount",label:"订单金额",width:"260"},{default:d(o=>[_(w)(o.row.orderAmount,o.row.orderCurrency.multiply)?(p(),b("span",te,l(_(w)(o.row.orderAmount,o.row.orderCurrency.multiply)+" "+o.row.orderCurrency.symbol),1)):V("",!0)]),_:1}),s(r,{prop:"payWay",label:"支付方式",width:"180"}),s(r,{prop:"orderTime",label:"下单时间",width:"180"},{default:d(o=>[t("div",null,l(_(y)(o.row.orderTime)),1)]),_:1})]),_:1},8,["data"])),[[T,n.value]])])])])}}}),me=H(oe,[["__scopeId","data-v-8f07a26e"]]);export{me as default};
