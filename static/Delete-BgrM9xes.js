import{s as $,_ as z}from"./Index.vue_vue_type_script_setup_true_lang-BhDJDWBy.js";import{F as E}from"./Index-BU8kA-XB.js";import{V as h}from"./index-BZHf1ii5.js";import{c as q,d as J}from"./index-Cwe4D9Ts.js";import{E as x}from"./element-CD5rsoqi.js";import{l as P,aL as D,aK as M,r as S,Z as U,b as W,ah as y,m as f,M as g,O as a,q as s,U as o,p as Q,F as X,a7 as Y,R as H,S as R,aF as O,aG as L}from"./vue-C87Wc4A0.js";import{_ as G}from"./index-c78MVIZI.js";const C=m=>(O("data-v-5276c258"),m=m(),L(),m),ee={class:"base-box detail-box tabs-title"},le=C(()=>s("div",{class:"select-currency"},[s("span",{class:"select-currency-flag"},"*"),s("span",{class:"select-currency-title"},"选择结算币种")],-1)),te=C(()=>s("div",{class:"input-tips"},"国际银行账户号码 (IBAN) : 前 2 位应为国家代码",-1)),oe=C(()=>s("div",{class:"input-tips"},"9 位数美国银行代码",-1)),ae=C(()=>s("div",{class:"input-tips"},"不支持 PO 或 GPO Box 类型的地址",-1)),re=C(()=>s("div",{class:"enterprise-label mt-40 mb-30"},"企业信息",-1)),ne=C(()=>s("div",{class:"input-tips"},"PIN Code / PostCode / ZIP Code",-1)),se={class:"flex-center w-full mt-30"},ue=C(()=>s("div",{class:"trc-account-tips"}," 请务必正确填写收款 USDT (TRC20)波场钱包地址，如填写有误导致资产丢失，平台既不负责！ ",-1)),de={class:"flex-center w-full mt-30"},me=P({__name:"Create",props:D({id:{},role:{},companyName:{}},{modelValue:{},modelModifiers:{}}),emits:D(["refresh"],["update:modelValue"]),setup(m,{emit:I}){const c=m,N=I,p=M(m,"modelValue"),A=S(!1),b=S("USD"),u=S(),k=S(),V=[{value:"USD",label:"USD (美元)"},{value:"USDT",label:"USDT (TRC20)"}],t=U({id:"",role:"",currency:"USD",type:"10",region:"",bankName:"",bankAddress:"",account:"",accountName:"",companyAddress:"",city:"",province:"",postCode:"",remark:"",challengeResult:""}),r=U({id:"",role:"",currency:"USDT",type:"20",currency:"",account:"",accountName:"",challengeResult:""}),Z=U({account:[{required:!0,message:"请输入USDT (TRC20)钱包地址",trigger:"blur"}],accountName:[{required:!0,message:"请输入钱包名称/备注",trigger:"blur"}]}),F=U({region:[{required:!0,message:"请选择银行账户开户国家",trigger:"change"}],bankName:[{required:!0,message:"请输入银行名称",trigger:"blur"}],bankAddress:[{required:!0,message:"请输入SWIFT Code",trigger:"blur"}],account:[{required:!0,message:"请输入美元银行账号",trigger:"blur"}],accountName:[{required:!0,message:"请输入结算账户名称",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入收款人地址",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],province:[{required:!0,message:"请输入州/省",trigger:"blur"}],postCode:[{required:!0,message:"请输入邮编",trigger:"blur"}]}),K=async n=>{n&&(c.companyName&&(t.accountName=c.companyName),await n.validate((e,_)=>{if(e)try{A.value=!0,t.currency=b.value,t.role=c.role,t.id=c.id,q(t).then(()=>{x.success("保存成功"),N("refresh"),p.value=!1}).catch(v=>{A.value=!1,console.error(v)})}catch(v){console.error(v)}else console.error("error submit!",_)}))},j=async n=>{n&&await n.validate((e,_)=>{if(e)try{A.value=!0,r.currency=b.value,r.role=c.role,r.id=c.id,q(r).then(()=>{x.success("保存成功"),N("refresh"),p.value=!1}).catch(v=>{A.value=!1,console.error(v)})}catch(v){A.value=!1,console.error(v)}else console.error("error submit!",_)})},T=n=>{if(n==="请输入IBAN"){F.bankAddress=[{required:!0,message:n,trigger:"blur"}];return}if(n==="请输入ACH 汇款路由号"){F.bankAddress=[{required:!0,message:n,trigger:"blur"}];return}F.bankAddress=[{required:!0,message:"请输入SWIFT Code",trigger:"blur"}]};return W(t,n=>{n.region&&($[n.region]||x.error("当前国家/地区不支持结算"),t.bankName=$[n.region])},{deep:!0}),W(()=>p.value,n=>{var e,_;n||((e=u.value)==null||e.resetFields(),(_=k.value)==null||_.resetFields())}),(n,e)=>{const _=y("el-option"),v=y("el-select"),d=y("el-form-item"),i=y("el-input"),w=y("el-button"),B=y("el-form");return f(),g(E,{modelValue:p.value,"onUpdate:modelValue":e[21]||(e[21]=l=>p.value=l),title:"新增结算收款账户"},{default:a(()=>[s("div",ee,[le,o(v,{class:"select-currency-input",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l)},{default:a(()=>[(f(),Q(X,null,Y(V,l=>o(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),b.value==="USD"?(f(),g(B,{key:0,ref_key:"settlementAccountFormRef",ref:u,"label-position":"top",rules:F,"label-width":"auto",model:t},{default:a(()=>[o(d,{prop:"region",label:"银行国家/地区"},{default:a(()=>[o(z,{modelValue:t.region,"onUpdate:modelValue":e[1]||(e[1]=l=>t.region=l),type:"settlementRegion",placeholder:"请选择银行账户开户国家"},null,8,["modelValue"])]),_:1}),t.bankName==="IBAN"?(f(),g(d,{key:0,prop:"bankAddress",label:"IBAN"},{default:a(()=>[o(i,{modelValue:t.bankAddress,"onUpdate:modelValue":e[2]||(e[2]=l=>t.bankAddress=l),placeholder:"请输入IBAN",maxlength:"32",onBlur:e[3]||(e[3]=l=>T("请输入IBAN"))},null,8,["modelValue"]),te]),_:1})):t.bankName==="ACH"?(f(),g(d,{key:1,prop:"bankAddress",label:"ACH 汇款路由号"},{default:a(()=>[o(i,{modelValue:t.bankAddress,"onUpdate:modelValue":e[4]||(e[4]=l=>t.bankAddress=l),placeholder:"请输入ACH 汇款路由号",maxlength:"9",onBlur:e[5]||(e[5]=l=>T("请输入ACH 汇款路由号"))},null,8,["modelValue"]),oe]),_:1})):t.bankName==="SWIFT"?(f(),g(d,{key:2,prop:"bankAddress",label:"SWIFT Code"},{default:a(()=>[o(i,{modelValue:t.bankAddress,"onUpdate:modelValue":e[6]||(e[6]=l=>t.bankAddress=l),placeholder:"请输入SWIFT Code",maxlength:"11",onBlur:e[7]||(e[7]=l=>T("请输入SWIFT Code"))},null,8,["modelValue"])]),_:1})):H("",!0),t.bankName==="SWIFT"||t.bankName==="ACH"?(f(),g(d,{key:3,prop:"account",label:"美元银行账号"},{default:a(()=>[o(i,{modelValue:t.account,"onUpdate:modelValue":e[8]||(e[8]=l=>t.account=l),placeholder:"请输入美元银行账号",maxlength:"64"},null,8,["modelValue"])]),_:1})):H("",!0),o(d,{prop:"accountName",label:"结算账户名称"},{default:a(()=>[c.companyName?(f(),g(i,{key:0,modelValue:c.companyName,"onUpdate:modelValue":e[9]||(e[9]=l=>c.companyName=l),placeholder:"请输入结算账户名称",maxlength:"60",disabled:""},null,8,["modelValue"])):(f(),g(i,{key:1,modelValue:t.accountName,"onUpdate:modelValue":e[10]||(e[10]=l=>t.accountName=l),placeholder:"请输入结算账户名称",maxlength:"60"},null,8,["modelValue"]))]),_:1}),o(d,{prop:"companyAddress",label:"收款人地址"},{default:a(()=>[o(i,{modelValue:t.companyAddress,"onUpdate:modelValue":e[11]||(e[11]=l=>t.companyAddress=l),placeholder:"请输入收款人地址",maxlength:"60"},null,8,["modelValue"]),ae]),_:1}),re,o(d,{prop:"city",label:"城市"},{default:a(()=>[o(i,{modelValue:t.city,"onUpdate:modelValue":e[12]||(e[12]=l=>t.city=l),placeholder:"请输入城市",maxlength:"60"},null,8,["modelValue"])]),_:1}),o(d,{prop:"province",label:"州/省"},{default:a(()=>[o(i,{modelValue:t.province,"onUpdate:modelValue":e[13]||(e[13]=l=>t.province=l),placeholder:"请输入州/省",maxlength:"60"},null,8,["modelValue"])]),_:1}),o(d,{prop:"postCode",label:"邮编"},{default:a(()=>[o(i,{modelValue:t.postCode,"onUpdate:modelValue":e[14]||(e[14]=l=>t.postCode=l),placeholder:"请输入邮编",maxlength:"60"},null,8,["modelValue"]),ne]),_:1}),o(h,{modelValue:t.challengeResult,"onUpdate:modelValue":e[15]||(e[15]=l=>t.challengeResult=l)},null,8,["modelValue"]),o(d,null,{default:a(()=>[s("div",se,[o(w,{type:"primary",onClick:e[16]||(e[16]=l=>K(u.value))},{default:a(()=>[R("保存")]),_:1})])]),_:1})]),_:1},8,["rules","model"])):(f(),g(B,{key:1,ref_key:"trcSettlementAccountFormRef",ref:k,"label-position":"top",rules:Z,"label-width":"auto",model:r},{default:a(()=>[o(d,{prop:"account",label:"USDT钱包地址"},{default:a(()=>[o(i,{modelValue:r.account,"onUpdate:modelValue":e[17]||(e[17]=l=>r.account=l),placeholder:"请输入USDT (TRC20)钱包地址",maxlength:"64"},null,8,["modelValue"]),ue]),_:1}),o(d,{prop:"accountName",label:"钱包名称/备注"},{default:a(()=>[o(i,{modelValue:r.accountName,"onUpdate:modelValue":e[18]||(e[18]=l=>r.accountName=l),placeholder:"请输入钱包名称备注",maxlength:"50"},null,8,["modelValue"])]),_:1}),o(h,{modelValue:r.challengeResult,"onUpdate:modelValue":e[19]||(e[19]=l=>r.challengeResult=l)},null,8,["modelValue"]),o(d,null,{default:a(()=>[s("div",de,[o(w,{type:"primary",onClick:e[20]||(e[20]=l=>j(k.value))},{default:a(()=>[R("保存 ")]),_:1})])]),_:1})]),_:1},8,["rules","model"]))])]),_:1},8,["modelValue"])}}}),Ce=G(me,[["__scopeId","data-v-5276c258"]]),ce=m=>(O("data-v-e3090414"),m=m(),L(),m),ie=ce(()=>s("div",{class:"delete-confirm-warning"},"确定删除结算账户吗？",-1)),pe={class:"delete-google-otp"},fe={class:"delete-confirm-footer"},ge=P({__name:"Delete",props:D({id:{},role:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const I=m,c=M(m,"modelValue"),N=S(),p=U({id:"",challengeResult:""}),A=async b=>{b&&await b.validate((u,k)=>{if(u)try{p.id=I.id,J(p).then(V=>{x.success("删除成功"),setTimeout(()=>{window.location.reload()},1e3)}).catch(V=>{x.error("操作失败"),console.log(V)})}catch(V){console.error(V)}else console.error("error submit!",k)})};return(b,u)=>{const k=y("el-form"),V=y("el-button"),t=y("el-dialog");return f(),g(t,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=r=>c.value=r),center:"",style:{width:"480px"}},{footer:a(()=>[s("div",fe,[o(V,{type:"primary",onClick:u[1]||(u[1]=r=>A(N.value))},{default:a(()=>[R(" 确定删除 ")]),_:1}),o(V,{onClick:u[2]||(u[2]=r=>c.value=!1)},{default:a(()=>[R("取消")]),_:1})])]),default:a(()=>[ie,s("div",pe,[o(k,{ref_key:"deleteSettlementAccountFormRef",ref:N,"label-position":"top","label-width":"auto",model:p},{default:a(()=>[o(h,{modelValue:p.challengeResult,"onUpdate:modelValue":u[0]||(u[0]=r=>p.challengeResult=r)},null,8,["modelValue"])]),_:1},8,["model"])])]),_:1},8,["modelValue"])}}}),Ne=G(ge,[["__scopeId","data-v-e3090414"]]);export{Ce as C,Ne as D};
