import{d as e,r as a,x as l,c as s,w as t,i as u,G as o,I as n,M as d,K as c,o as f,y as m,a as i,u as p,h as r,g as v,R as y,z as _,W as w,n as h,a0 as V,Z as x,ay as z,a8 as P,D as g,a1 as k,_ as C}from"./index-CK4DGatK.js";const U=C(e({__name:"changePwd",setup(e){const C=a(),U=a(!1),Z=a(),b=a(!1),A=a(),I=a(!1),T=l((()=>o("hasPwd"))),$=()=>{const e=T.value&&!C.value?"请输入现有密码":Z.value?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,16}$/.test(Z.value)?A.value?Z.value!=A.value?"两次密码不一致":"":"请再次输入新密码":"新密码格式不正确":"请输入新密码";e?V({title:e,icon:"none"}):(x({title:"提交中"}),uni.$u.http.post(z.changePwd,{olderPassword:C.value,newPassword:Z.value}).then((()=>{P("hasPwd",!0),(new g).showToast("修改成功"),setTimeout((()=>{k()}),1500)})).catch((()=>{})))};return(e,a)=>{const l=r,o=y,V=n(c("up-icon"),d),x=u,z=w;return f(),s(x,{class:"page font-regular"},{default:t((()=>[p(T)?(f(),s(x,{key:0,class:"form-item"},{default:t((()=>[i(l,null,{default:t((()=>[v("旧密码")])),_:1}),i(o,{modelValue:p(C),"onUpdate:modelValue":a[0]||(a[0]=e=>_(C)?C.value=e:null),type:p(U)?"text":"password",placeholder:"请输入现有密码"},null,8,["modelValue","type"]),i(V,{name:p(U)?"eye-fill":"eye-off",size:"20",onClick:a[1]||(a[1]=e=>U.value=!p(U))},null,8,["name"])])),_:1})):m("",!0),i(x,{class:"form-item"},{default:t((()=>[i(l,null,{default:t((()=>[v("新密码")])),_:1}),i(o,{modelValue:p(Z),"onUpdate:modelValue":a[2]||(a[2]=e=>_(Z)?Z.value=e:null),type:p(b)?"text":"password",placeholder:"请输入新密码"},null,8,["modelValue","type"]),i(V,{name:p(b)?"eye-fill":"eye-off",size:"20",onClick:a[3]||(a[3]=e=>b.value=!p(b))},null,8,["name"])])),_:1}),i(x,{class:"form-item"},{default:t((()=>[i(l,null,{default:t((()=>[v("确认密码")])),_:1}),i(o,{modelValue:p(A),"onUpdate:modelValue":a[4]||(a[4]=e=>_(A)?A.value=e:null),type:p(I)?"text":"password",placeholder:"请再次输入新密码"},null,8,["modelValue","type"]),i(V,{name:p(I)?"eye-fill":"eye-off",size:"20",onClick:a[5]||(a[5]=e=>I.value=!p(I))},null,8,["name"])])),_:1}),i(x,{class:"tips"},{default:t((()=>[v("密码规则：由 8-16 位的大小写字母、数字组成")])),_:1}),i(z,{class:h(["next-btn",{disabled:!p(Z)||!p(A)}]),onClick:$},{default:t((()=>[v(" 确定 ")])),_:1},8,["class"])])),_:1})}}}),[["__scopeId","data-v-52f2c8ae"]]);export{U as default};
