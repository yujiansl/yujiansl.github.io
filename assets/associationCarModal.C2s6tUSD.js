import{d as e,aY as a,x as s,r as t,m as i,c as r,w as c,u as l,I as o,ah as d,K as u,o as n,a as v,i as m,g as p,t as h,a5 as f,b as x,e as T,F as y,n as g,y as I,k as w,P as C,Q as _,D as k,_ as b}from"./index-CK4DGatK.js";import{_ as M}from"./car_default.CyENNAub.js";const S=b(e({__name:"associationCarModal",props:{associationModal:{type:Object,default:()=>({show:!1,carPricingId:"",purchaseId:"",orderList:[],hasVin:"",status:"purchaseOrder",isDirect:!1,disableItem:!1,cacheVin:""})},associationModalModifiers:{}},emits:a(["confirm"],["update:associationModal"]),setup(e,{emit:a}){const b=a,S={purchaseOrder:{confirmText:"立即绑定",cancelText:"暂不绑定",titleText:"发现采购订单"},carExist:{confirmText:"查看车辆详情",cancelText:"关闭",titleText:"当前车辆已存在"},detailPurchaseOrder:{confirmText:"确定",cancelText:"取消",titleText:"发现采购订单",currentBindText:"当前绑定"}},B=s((()=>{var e;return null==(e=F.value.orderList.find((e=>e.currentBind)))?void 0:e.currentBind})),D=t([]),F=i(e,"associationModal"),N=s((()=>"carExist"!=F.value.status)),P=s((()=>S[F.value.status])),O=()=>{var e,a;return N.value?F.value.purchaseId?(null==(a=F.value.item)?void 0:a.currentBind)?j():void b("confirm",B.value):(new k).showToast("请先选择采购订单"):(_(`/pages/carManage/details/index?id=${null==(e=F.value)?void 0:e.orderList[0].carProductId}`),void(F.value.show=!1))},L=e=>{const a=D.value[e];if(!a)return!1;const s=a.$el||a,t=s.querySelector(".full-w"),i=s.querySelector(".fit-content-w");return!(!t||!i)&&i.clientWidth>t.clientWidth-60},j=()=>{F.value.show=!1,F.value.isDirect=!1,F.value.purchaseId="",F.value.carPricingId="",F.value.item={}};return(e,a)=>{const s=m,t=C,i=f,_=o(u("u-modal"),d);return n(),r(_,{class:"association-modal",show:F.value.show,confirmText:l(P).confirmText,cancelText:l(P).cancelText,onCancel:j,confirmColor:F.value.purchaseId?"#3C73FF":"#4E5969",showCancelButton:"",onConfirm:O},{default:c((()=>[v(s,{class:"purchase-modal"},{default:c((()=>[v(s,{class:"purchase-title SC-Medium"},{default:c((()=>[p(h(l(P).titleText),1)])),_:1}),v(i,{class:"purchase-list","scroll-y":""},{default:c((()=>[(n(!0),x(y,null,T(F.value.orderList,((e,a)=>(n(),r(s,{class:g(["w-full position-relative",{"purchase-item-active":[e.id,e.purchaseId].includes(F.value.purchaseId)&&l(N),"purchase-item":l(N)}]),key:a,onClick:a=>(e=>{F.value.purchaseId=e.id||e.purchaseId,F.value.carPricingId=e.pricingId,F.value.item=e})(e)},{default:c((()=>{var i;return[e.currentBind?(n(),x("div",{key:0,class:"position-bind"},"当前绑定")):I("",!0),v(s,{class:"purchase-item-top"},{default:c((()=>{var s;return[(null==e?void 0:e.coverUrl)?(n(),r(t,{key:0,src:null==e?void 0:e.coverUrl,mode:"aspectFill"},null,8,["src"])):(n(),r(t,{key:1,src:M,mode:"aspectFill"})),w("div",{class:"purchase-item-info"},[l(N)?(n(),x("div",{key:0,ref_for:!0,ref:e=>l(D)[a]=e,class:g([{"has-padding-top":L(a)&&e.currentBind},"purchase-item-title SC-Semibold"])},[w("div",{class:"full-w"}),w("div",{class:"fit-content-w text-over-hidden"},h(e.carModelName),1)],2)):I("",!0),w("div",{class:g([{"text-over-hidden":l(N)},"purchase-item-title SC-Semibold"])},h(e.carModelFullName),3),w("div",{class:"purchase-item-tags"},[e.uetoDateStr||e.registerDate?(n(),x("div",{key:0,class:"purchase-item-tag"},h(null==(s=e.uetoDateStr||e.registerDate)?void 0:s.slice(0,7)),1)):I("",!0),e.mileage?(n(),x("div",{key:1,class:"purchase-item-tag"},h(e.mileage+"万公里"),1)):I("",!0),e.bodyColor?(n(),x("div",{key:2,class:"purchase-item-tag"},h(e.bodyColor),1)):I("",!0)]),w("div",{class:"purchase-item-info-text text-over-hidden"},"VIN: "+h(e.vinNo),1)])]})),_:2},1024),l(N)?(n(),x("div",{key:1,class:"purchase-item-info-text mb-8rpx"}," 评估师： "+h(e.createByName||e.pricingCreateUserName||"-"),1)):I("",!0),l(N)?(n(),x("div",{key:2,class:"purchase-item-info-text"}," 采购日期： "+h((null==(i=e.purchaseTime||e.purchaseOrderTime)?void 0:i.slice(0,16))||"-"),1)):I("",!0)]})),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["show","confirmText","cancelText","confirmColor"])}}}),[["__scopeId","data-v-ff68038b"]]);export{S as a};
