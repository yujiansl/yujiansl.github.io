import{d as l,c as a,o as e,i as u,w as t,a as s,P as n,g as o,t as d,u as r,V as c,W as i,_ as f,r as _,B as p,E as m,X as v,Y as b,I as g,M as T,K as k,b as y,y as h,F as x,h as N,Q as D,Z as C,a0 as I,a1 as S}from"./index-CK4DGatK.js";const w=""+new URL("check-error-BVBRv8lX.png",import.meta.url).href,E=f(l({__name:"noDetails",props:{errorText:{type:String,default:"该条数据已下架，如有疑问，请联系管理员"}},setup:l=>(f,_)=>{const p=n,m=u,v=i;return e(),a(m,{class:"no-details"},{default:t((()=>[s(p,{src:w}),s(m,null,{default:t((()=>[o(d(l.errorText),1)])),_:1}),s(v,{onClick:_[0]||(_[0]=l=>("toTab"in f?f.toTab:r(c))("/pages/index/index"))},{default:t((()=>[o("返回首页")])),_:1})])),_:1})}}),[["__scopeId","data-v-0ebd3547"]]),P=f(l({__name:"codeResult",setup(l){const c=_({}),f=_(""),w=_(!1),P=_(""),B=_("");p((l=>{console.log(l,123),O(l.qrStr)})),m((()=>{v("couponData"),b("couponData",(l=>{const{label:a,val:e}=l;P.value=a,B.value=e}))}));const O=l=>{f.value="",uni.$u.http.get(`/product/couponDistributionDetail/sweepCouponInfo?qrStr=${l}`,{custom:{noShowToast:!0}}).then((l=>{l.data?c.value=l.data:f.value="无法识别二维码信息"})).catch((l=>{var a;f.value=(null==(a=null==l?void 0:l.data)?void 0:a.message)||(null==l?void 0:l.message)}))},R=()=>{C({title:"提交中",mask:!0}),uni.$u.http.post("/product/couponDistributionDetail/verification",{id:c.value.id,orderType:1,orderId:B.value}).then((()=>{I({title:"核销成功",icon:"none",mask:!0}),setTimeout((()=>{V()}),1500)}))},V=()=>{S()};return(l,_)=>{const p=u,m=N,v=g(k("up-icon"),T),b=i,C=n;return e(),a(p,{id:"public",class:"public-account"},{default:t((()=>{var u;return[(null==(u=r(c))?void 0:u.id)?(e(),y(x,{key:0},[s(p,{class:"content"},{default:t((()=>[s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("编码：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).couponNo||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("优惠券名称：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).couponName||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("有效期：")])),_:1}),s(p,{class:"blue"},{default:t((()=>[o(d(r(c).validityEndTime?r(c).validityEndTime.substring(0,10):"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("金额：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).couponOfferValue||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("状态：")])),_:1}),s(p,{class:"blue"},{default:t((()=>[o(d(r(c).couponStatusName||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("绑定车辆：")])),_:1}),s(p,{class:"blue"},{default:t((()=>[o(d(r(c).vinNo||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("优惠券类型：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).couponTypeName||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("优惠券类别：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).couponOfferTypeName||"-"),1)])),_:1})])),_:1}),s(p,null,{default:t((()=>[s(p,null,{default:t((()=>[o("说明详情：")])),_:1}),s(p,null,{default:t((()=>[o(d(r(c).remark||"-"),1)])),_:1})])),_:1}),s(p,{class:"form-box"},{default:t((()=>[s(p,{class:"form-item"},{default:t((()=>[s(p,null,{default:t((()=>[s(m,null,{default:t((()=>[o("*")])),_:1}),o("销售订单")])),_:1}),s(p,{class:"form-vals"},{default:t((()=>[s(p,null,{default:t((()=>[o(d(r(P)),1)])),_:1}),s(v,{onClick:_[0]||(_[0]=a=>("toPage"in l?l.toPage:r(D))("/pages/sells/sellList?type=PAYMENT_ING&isOrder=1&isCoupon=1")),name:"arrow-right"})])),_:1})])),_:1})])),_:1})])),_:1}),s(p,{class:"bottom-btn"},{default:t((()=>[s(b,{disabled:"已使用"==r(c).couponStatusName,onClick:R},{default:t((()=>[o("立即核销")])),_:1},8,["disabled"])])),_:1})],64)):r(f)?(e(),a(E,{key:1,errorText:r(f)},null,8,["errorText"])):h("",!0),r(w)?(e(),a(p,{key:2,class:"send-success"},{default:t((()=>[s(C,{src:"./static/index/correct.png"}),s(p,null,{default:t((()=>[o("赠送成功")])),_:1}),s(b,{onClick:V},{default:t((()=>[o("返回首页")])),_:1})])),_:1})):h("",!0)]})),_:1})}}}),[["__scopeId","data-v-c5969900"]]);export{P as default};
