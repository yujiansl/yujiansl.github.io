import{d as e,r as a,a9 as s,B as t,Z as l,a2 as i,c as o,w as d,i as u,o as c,a as r,P as n,h as f,g as _,t as m,u as v,ad as p,b as g,F as j,e as y,_ as b}from"./index-CK4DGatK.js";import{_ as L}from"./icon_ios.BWID3z2o.js";import{L as h}from"./ListLoadRefreshView.CnNC2lkG.js";import{u as C}from"./useQuery.3dd8K18V.js";import{o as I}from"./omit.DzeQdT5l.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const w=b(e({__name:"deviceDetail",setup(e){const b=C(),w=a({}),x=a(),B=s({current:1,size:10,total:0});t((e=>{w.value=JSON.parse(e.params),"null"==w.value.deviceCode&&(w.value.deviceCode=""),k()}));const D=()=>{B.current=1,k()},R=()=>{B.current++,k()},T=a([]),k=async()=>{var e;try{l({title:"加载中"});const e={...I(B,"total"),userId:b.value.id,deviceInfo:w.value.deviceInfo,deviceCode:w.value.deviceCode},a=await uni.$u.http.get("product/applyBind/getUserLoginByDevicePage",{params:e});B.total=a.data.count;const s=a.data.results;T.value=1===B.current?s:[...T.value,...s]}finally{i(),null==(e=x.value)||e.loadFinish()}};return(e,a)=>{const s=n,t=f,l=u;return c(),o(l,{class:"device-detail"},{default:d((()=>[r(l,{class:"info"},{default:d((()=>[r(l,{class:"device-item"},{default:d((()=>[r(s,{src:L,class:"img"}),r(l,{class:"right"},{default:d((()=>[r(l,{class:"top"},{default:d((()=>[r(t,{class:"name"},{default:d((()=>[_(m(v(w).deviceInfo||"-"),1)])),_:1})])),_:1}),r(l,{class:"device-id"},{default:d((()=>[r(t,null,{default:d((()=>[_("设备ID：")])),_:1}),r(t,null,{default:d((()=>[_(m(v(w).deviceCode||"-"),1)])),_:1})])),_:1}),r(l,{class:"bottom"},{default:d((()=>[r(t,{class:"status pre"},{default:d((()=>[_("上次登录")])),_:1}),r(t,null,{default:d((()=>[_(m(v(w).latestLoginTime),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(l,{class:"title"},{default:d((()=>[_("登录记录")])),_:1}),r(h,p({ref_key:"listLoadRef",ref:x,class:"scroll-view-box"},v(B),{istop:!1,onLoadMore:R,onLoadRefresh:D}),{default:d((()=>[r(l,{class:"device-list"},{default:d((()=>[(c(!0),g(j,null,y(v(T),((e,a)=>(c(),o(l,{key:a,class:"device-item"},{default:d((()=>[r(s,{src:L,class:"img"}),r(l,{class:"right"},{default:d((()=>[r(l,{class:"top"},{default:d((()=>[r(t,{class:"name"},{default:d((()=>[_(m(e.ip),1)])),_:2},1024)])),_:2},1024),r(l,{class:"bottom"},{default:d((()=>[r(t,null,{default:d((()=>[_(m(e.latestLoginTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},16)])),_:1})}}}),[["__scopeId","data-v-e5b43e57"]]);export{w as default};
