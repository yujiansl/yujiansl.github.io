import{d as e,r as a,a9 as s,q as t,I as r,M as l,K as o,c as i,o as u,w as c,a as n,i as d,b as f,e as m,n as p,u as v,y as _,g as b,t as k,F as h,_ as y,B as g,E as j,X as C,Y as S,D as w,$ as I,a2 as L,ad as D,s as x}from"./index-CK4DGatK.js";import{U as B,a as R}from"./u-dropdown-item.B66HFyYv.js";import{B as T}from"./brandDrop.WDU7kvw8.js";import{L as q}from"./ListLoadRefreshView.CnNC2lkG.js";import{D as U}from"./listItem.Dt6aurFb.js";import{o as z}from"./omit.DzeQdT5l.js";import"./index.HDA2F_3Q.js";import"./time._VqwKl0d.js";import"./car_default.CyENNAub.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const O=y(e({__name:"filter",props:{status:{type:Number,default:0},reChecker:{type:Number,default:null}},emits:["search"],setup(e,{expose:y,emit:g}){const j=g,C=a(),S=a(),w=s({orders:"createTimeDesc",carBrandId:"",carSeriesId:"",boutiqueCarSource:""}),I=a([{label:"入库时间降序",id:"createTimeDesc"},{label:"入库时间升序",id:"createTimeAsc"}]),L=a([{label:"全部",id:""},{label:"是",id:"1"},{label:"否",id:"0"}]);t((()=>{C.value.highlight(0,w.orders)}));const D=e=>{1==e&&S.value.open()},x=()=>{var e;null==(e=C.value)||e.close()},q=()=>{j("search",w),x()},U=(e,a,s)=>{C.value.highlight(s,a.id),w[e]=a.id,q()},z=(e,a)=>{w.carBrandId=e,w.carSeriesId=a,C.value.highlight(1,a||e),q()};return y({close:x}),(e,a)=>{const s=d,t=r(o("up-icon"),l);return u(),i(B,{ref_key:"uDropdownRef",ref:C,class:"drop",borderRadius:"20rpx",onOpen:D},{default:c((()=>[n(R,{title:"排序"},{default:c((()=>[n(s,{class:"item-list"},{default:c((()=>[(u(!0),f(h,null,m(v(I),((e,a)=>(u(),i(s,{key:a,class:p({active:v(w).orders==e.id}),onClick:a=>U("orders",e,0)},{default:c((()=>[n(s,null,{default:c((()=>[b(k(e.label),1)])),_:2},1024),v(w).orders==e.id?(u(),i(t,{key:0,name:"checkbox-mark",color:"#ff5719",size:"20"})):_("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),n(R,{title:"品牌"},{default:c((()=>[n(T,{ref_key:"brandDropRef",ref:S,onSearch:z,pBrand:v(w).carBrandId,pSeries:v(w).carSeriesId},null,8,["pBrand","pSeries"])])),_:1}),n(R,{title:"精品车"},{default:c((()=>[n(s,{class:"item-list"},{default:c((()=>[(u(!0),f(h,null,m(v(L),((e,a)=>(u(),i(s,{key:a,class:p({active:v(w).boutiqueCarSource==e.id}),onClick:a=>U("boutiqueCarSource",e,2)},{default:c((()=>[n(s,null,{default:c((()=>[b(k(e.label),1)])),_:2},1024),v(w).boutiqueCarSource==e.id?(u(),i(t,{key:0,name:"checkbox-mark",color:"#ff5719",size:"20"})):_("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},512)}}}),[["__scopeId","data-v-2bf2cbed"]]),A=y(e({__name:"storageList",setup(e){const s=a([{name:"待入厅",value:"waitCarStock"},{name:"已入厅",value:"completeCarStock"}]),t=a(),r=a([]),l=a(),o=a({current:1,size:5,total:0,status:"waitCarStock",orders:"createTimeDesc"});g((e=>{o.value.status=e.type,y()})),j((()=>{C("refreshList"),S("refreshList",(()=>{B()}))}));const y=async()=>{var e;(new w).showLoading("加载中");try{const e={...z(o.value,"total")},a=await I().get("product/carPricing/page",{params:e});o.value.total=a.data.count;const s=a.data.results.map((e=>({...e,photoUrl:e.coverUrl,...e.carPricingInfo})));r.value=1===o.value.current?s:[...r.value,...s]}finally{1==o.value.current&&l.value.initTop(),null==(e=l.value)||e.loadFinish(),L()}},B=()=>{o.value.current=1,y()},R=()=>{o.value.current++,y()},T=e=>{Object.assign(o.value,e),o.value.current=1,y()};return(e,a)=>{const g=d;return u(),i(g,{class:"page f-c-s"},{default:c((()=>[n(g,{class:"tabs"},{default:c((()=>[(u(!0),f(h,null,m(v(s),((e,a)=>(u(),i(g,{key:a,class:p({active:e.value==v(o).status}),onClick:a=>{var s;(s=e.value)!=o.value.status&&(o.value={current:1,size:5,total:0,status:"waitCarStock",orders:"createTimeDesc"},o.value.status="",x((()=>{o.value.status=s,y()})))}},{default:c((()=>[b(k(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),""!==v(o).status?(u(),i(O,{key:0,ref_key:"filterRef",ref:t,status:v(o).status,onSearch:T},null,8,["status"])):_("",!0),n(g,{class:"total"},{default:c((()=>[b("共 "+k(v(o).total)+" 个",1)])),_:1}),n(q,D({ref_key:"listLoadRef",ref:l,class:"scroll-view-box"},v(o),{istop:!1,onLoadMore:R,onLoadRefresh:B}),{"list-cont":c((()=>[(u(!0),f(h,null,m(v(r),((e,a)=>(u(),i(U,{key:a,item:e,pageKey:"storage",onConfirm:B},null,8,["item"])))),128))])),_:1},16)])),_:1})}}}),[["__scopeId","data-v-f61e7ef4"]]);export{A as default};
