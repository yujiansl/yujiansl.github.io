import{d as a,r as e,B as s,E as t,c as l,w as o,i as c,o as r,a as u,b as n,y as i,R as d,u as p,h as m,g as f,F as h,P as k,e as y,t as _,a5 as v,a0 as g,D as w,$ as j,a2 as C,_ as F}from"./index-CK4DGatK.js";import{_ as S}from"./ljt.oTiZI4wC.js";import{N as b}from"./NavBar.DSs5OGCU.js";import{c as q}from"./carListItem.hYH6YShY.js";import"./time._VqwKl0d.js";import"./image.DobRSNlT.js";const P=F(a({__name:"searchCarQuick",setup(a){const F=e("");s((a=>{F.value=a.quick}));const P=e({keyword:""}),V=e([]),A=e(),I=e({total:0});const N=()=>{I.value.current=1,async function(){var a,e,s;(new w).showLoading("加载中");try{const e={keyword:P.value.keyword},s=await j().get("product/carProductApp/searchForSale",{params:e});I.value.total=null==(a=s.data)?void 0:a.length,V.value=s.data}finally{1==I.value.current&&(null==(e=A.value)||e.initTop()),null==(s=A.value)||s.loadFinish(),C()}}()},$=e([]),x=()=>{uni.$u.http.get("product/carProductApp/searchForSaleHistory").then((a=>{$.value=a.data}))},B=()=>{uni.$u.http.get("/product/carProductApp/delSearchForSaleHistory").then((a=>{0==a.code&&(g({title:"清除成功",icon:"none"}),x())}))};return t((()=>{x()})),(a,e)=>{const s=d,t=m,g=c,w=k,j=v;return r(),l(g,{class:"page f-c-s"},{default:o((()=>{var a,c;return[u(b,{isSearch:!0,title:"搜索"},{title:o((()=>[u(g,{class:"search-input f-r-s"},{default:o((()=>[u(s,{modelValue:p(P).keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>p(P).keyword=a),focus:!0,placeholder:"VIN码/车辆编号"},null,8,["modelValue"]),u(g,{class:"search-btn",onClick:N},{default:o((()=>[u(t,null,{default:o((()=>[f("搜 索")])),_:1})])),_:1})])),_:1})])),_:1}),!p(I).total&&p($).length?(r(),n(h,{key:0},[u(g,{class:"history"},{default:o((()=>[u(g,{class:"title"},{default:o((()=>[f("搜索记录")])),_:1}),u(w,{class:"img",src:S,onClick:B})])),_:1}),u(g,{class:"h-content"},{default:o((()=>[(r(!0),n(h,null,y(p($),((a,e)=>(r(),l(g,{class:"tag",key:e,onClick:e=>(a=>{P.value.keyword=a,N()})(a)},{default:o((()=>[f(_(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})],64)):i("",!0),(null==(a=p(V))?void 0:a.length)?(r(),l(j,{key:1,ref:"scrollRefs",class:"scroll-view","scroll-y":""},{default:o((()=>[(r(!0),n(h,null,y(p(V),((a,e)=>(r(),l(q,{key:e,item:a,quick:p(F),from:"search-quick",onConfirm:N},null,8,["item","quick"])))),128))])),_:1},512)):i("",!0),(null==(c=p(V))?void 0:c.length)?i("",!0):(r(),l(g,{key:2,class:"no-content"},{default:o((()=>[u(w,{src:"https://sjmc.obs.cn-north-4.myhuaweicloud.com/static/service/no_car_s.png",class:"pic",mode:"aspectFit"}),u(g,null,{default:o((()=>[f("无相关内容")])),_:1})])),_:1}))]})),_:1})}}}),[["__scopeId","data-v-626717b4"]]);export{P as default};
