import{d as e,aY as a,m as l,x as t,I as i,M as o,K as r,b as s,o as n,y as u,F as c,e as d,a as m,k as g,c as f,P as p,u as v,t as h,_ as y,r as L,a9 as C,au as _,B as I,p as k,E as b,X as P,Y as V,D as N,a3 as M,a4 as x,v as O,q as w,G as F,w as j,z as B,Z as D,a2 as U,i as S,at as $,a6 as T,a5 as Y,g as J,f as q,h as R,R as A,Q as E,n as z,aj as G,W as K,s as Q,a8 as Z,C as W,a1 as X,ar as H}from"./index-CK4DGatK.js";import{_ as ee}from"./camera.DDOxr1zP.js";import{_ as ae}from"./card.DgxD9h_f.js";import{_ as le}from"./photo.s3UpHRXl.js";import{C as te}from"./colorPop.BYxZ8ilX.js";import{I as ie}from"./inventory.A8ArFd58.js";import{I as oe,S as re}from"./scan-upload.q-LlmoOx.js";import{d as se,g as ne}from"./customer.BR_0pqR6.js";import{c as ue}from"./carSelect-emit.CejlvgP5.js";import{_ as ce}from"./close-btn.mZjD6hdt.js";import{A as de}from"./avatar.hGMRw2TZ.js";import{f as me}from"./fixPriceSelect-emit.BQjwsz_q.js";import{i as ge}from"./carVerify.BfKp_ULT.js";import{u as fe}from"./useQuery.3dd8K18V.js";import{a as pe}from"./index.HDA2F_3Q.js";import{d as ve}from"./debounce.BkVTat1y.js";import"./UploadFile.BBuXxkzB.js";import"./dev.3CSglq9A.js";import"./index.BP9c-u7r.js";import"./image.DobRSNlT.js";import"./play.dJbs8fP_.js";import"./vuedraggable.umd.DwpyKIuh.js";import"./event.CJk5hinv.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";const he=y(e({__name:"FixPriceTag",props:a({list:{},edit:{type:Boolean,default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:a(["add"],["update:modelValue"]),setup(e,{emit:a}){const y=e,L=l(e,"modelValue"),C=a,_=t((()=>y.list.filter((e=>L.value.includes(e.id)))));return(e,a)=>{const l=p,t=i(r("up-icon"),o);return n(),s("div",{class:"fix-price-tag"},[(n(!0),s(c,null,d(v(_),(e=>(n(),s("div",{class:"tag",key:e.id},[m(l,{class:"avatar",src:e.avatar||v(de),mode:"scaleToFill"},null,8,["src"]),g("span",{class:"name"},h(e.name),1),y.edit&&e.needClose?(n(),f(l,{key:0,src:ce,class:"close-btn",onClick:a=>function(e){const a=L.value.findIndex((a=>a===e.id));-1!=a&&L.value.splice(a,1)}(e)},null,8,["onClick"])):u("",!0)])))),128)),y.edit?(n(),s("div",{key:0,class:"add-tag",onClick:a[0]||(a[0]=e=>C("add"))},[m(t,{name:"plus",size:"14",color:"#3c73ff",bold:""}),g("span",null,"添加")])):u("",!0)])}}}),[["__scopeId","data-v-d478139c"]]),ye=y(e({__name:"addFix",setup(e){const a=fe(),l=t((()=>!!a.value.id)),y=L([]),ce=L([]),de=L(),ye=L(),Le=L(),Ce=L(),_e=C({imageList:[{tagName:"车辆照片",imageList:[]}],allOtherImageList:{imageList:[{tagName:"车辆照片",imageList:[]}],carImageFront:[{tagName:"车辆行驶证照片",imageList:[]}],carImageBack:[{tagName:"车辆行驶证照片",imageList:[]}],idCardFront:[{tagName:"车主身份证",imageList:[]}],idCardBack:[{tagName:"车主身份证",imageList:[]}],maintenance:[{tagName:"维保照片",imageList:[]}],insurance:[{tagName:"出险照片",imageList:[]}]},carBrandId:"",carSeriesId:"",carModelId:"",factoryData:"",uetoDate:"",bodyColor:"",bodyColorValue:"",interiorColor:"",interiorColorValue:"",mileage:"",remark:"",budgetaryPrice:"",pricingPriceMin:"",pricingPriceMax:"",scene:0,haveUeto:!0,keyNum:null,carNature:"Full",enquiry:0,sceneImageList:[],pricingCustomerPhone:"",pricingCustomerName:"",carCome:"1",invitePricingUserList:[],vinNo:"",engine:""}),Ie=C({carModelFullName:"",carModelGuidePrice:"",displacement:"",sameCarBrand:"",sameCarSeries:"",sameCarModel:"",yearModel:""}),ke=L([]),be=L(!1),Pe=L([]),Ve=L(),Ne=L(!1),Me=L(),xe=async()=>{D({title:"加载中",mask:!0}),await async function(){const e=(await uni.$u.http.get("/product/carPricing/queryRaterList")).data||{},a=e.leaderUser;a&&(a.isLeader=!0);const t=e.raterUserList||[];ke.value=[a,...t].filter(Boolean).map((e=>({...e,id:e.userId,needClose:!e.isLeader}))),l.value||(_e.invitePricingUserList=[null==a?void 0:a.userId])}(),await(async()=>{if(!l.value)return;const e=(await uni.$u.http.get(`/product/carPricing/${a.value.id}`)).data||{},t={...e,...e.carPricingInfo,...e.stockInfoVo,pricingPriceMin:e.editPricingPriceMin,pricingPriceMax:e.editPricingPriceMax,allOtherImageList:{imageList:[{tagName:"车辆照片",imageList:e.imageList||[]},...e.imageTagList],carImageFront:[{tagName:"车辆行驶证照片",imageList:e.pricingVehicleLicenseFrontPhoto?[e.pricingVehicleLicenseFrontPhoto]:[]}],carImageBack:[{tagName:"车辆行驶证照片",imageList:e.pricingVehicleLicenseBackPhoto?[e.pricingVehicleLicenseBackPhoto]:[]}],idCardFront:[{tagName:"车主身份证",imageList:e.pricingIdCardFrontPhoto?[e.pricingIdCardFrontPhoto]:[]}],idCardBack:[{tagName:"车主身份证",imageList:e.pricingIdCardBackPhoto?[e.pricingIdCardBackPhoto]:[]}],maintenance:[{tagName:"维保照片",imageList:e.pricingMaintenanceList?[...e.pricingMaintenanceList]:[]}],insurance:[{tagName:"出险照片",imageList:e.pricingInsuranceList?[...e.pricingInsuranceList]:[]}]}};Object.assign(_e,t),Object.assign(Ie,t),_e.invitePricingUserList=(e.carPricingInviteUserList||[]).map((e=>e.userId)),_e.imageList=[{tagName:"车辆照片",imageList:e.imageList||[]},...e.imageTagList]})(),U()};const Oe=e=>{_e.pricingCustomerName=e.name,_e.pricingCustomerPhone=e.realPhone,be.value=!1,Ne.value=!1},we=ve((()=>{be.value=!1,se({value:_e.pricingCustomerName,elRef:Me,visible:Ne,list:Pe,subKey:"phone",length:1,requestFn:ne})}),300);async function Fe(){Ne.value=!1,await se({value:_e.pricingCustomerPhone,elRef:Ve,visible:be,list:Pe,subKey:"phone",length:11,requestFn:ne})}const je=()=>{setTimeout((()=>{be.value=!1,Ne.value=!1,Pe.value=[]}),100)};L((new Date).toISOString().slice(0,7));const Be=L(!1),De=L(""),Ue=L(""),Se=L(_().subtract(50,"year").valueOf()),$e=(e,a)=>{Be.value=!0,De.value=e,Se.value=_().subtract(50,"year").valueOf(),"uetoDate"==e&&(Se.value=Ie.yearModel?_(Ie.yearModel+"").subtract(1,"year").valueOf():_().subtract(50,"year").valueOf()),Ue.value=a||_().format("YYYY-MM")},Te=e=>{Q((()=>{_e[De.value]=_(e.value).valueOf(),Be.value=!1}))};function Ye(e){return e?_(e).format("YYYY-MM"):""}const Je=new Map([["year","年"],["month","月"]]);function qe(e,a){return`${a}${Je.get(e)}`}const Re=L([]),Ae=L([{key:"Full",value:"全款"},{key:"Mortgage",value:"按揭"}]),Ee=L([{key:1,value:"是"},{key:0,value:"否"}]),ze=L();I((()=>{uni.$u.http.get("admin/dict/type/car_come").then((e=>{Re.value=e.data.map((e=>({key:e.value,value:e.label})))}))})),ue.onEvent((({data:e})=>{Qe(e)}));const Ge=e=>{Q((()=>{_e.vinNo=e.detail.value.replace(/[^a-zA-Z0-9]/g,"")}))},Ke=L(!1);k((()=>{_e.vinNo,0!==_e.vinNo.length?Ke.value=!ge(_e.vinNo):Ke.value=!1})),b((()=>{P("sellData"),V("sellData",(e=>{const{name:a,realPhone:l}=e;_e.pricingCustomerName=a,_e.pricingCustomerPhone=l})),P("addPhoto"),console.log("事件监听"),V("addPhoto",(async e=>{var a,l,t,i,o,r,s,n,u,c,d,m,g,f,p;console.log("事件触发",e.value),e.type?_e.allOtherImageList=e.value:_e.imageList=e.value.imageList;const v=[],h=null==(o=null==(i=null==(t=null==(l=null==(a=e.value)?void 0:a.carImageFront)?void 0:l[0])?void 0:t.imageList)?void 0:i[0])?void 0:o.attachmentUrl;if(h)v.push(ma(h,"front"));else{const a=null==(c=null==(u=null==(n=null==(s=null==(r=e.value)?void 0:r.carImageBack)?void 0:s[0])?void 0:n.imageList)?void 0:u[0])?void 0:c.attachmentUrl;a&&v.push(ma(a,"back"))}const y=null==(p=null==(f=null==(g=null==(m=null==(d=e.value)?void 0:d.idCardFront)?void 0:m[0])?void 0:g.imageList)?void 0:f[0])?void 0:p.attachmentUrl;y&&v.push(ca(y));const L=new N;L.showLoading("识别中");try{await Promise.all(v)}finally{L.hideLoading()}})),a.value.customerId&&Ze()}));const Qe=e=>{const{brandId:a,brandName:l,seriesId:t,seriesName:i,modelId:o,modelName:r,carYear:s}=e;_e.carBrandId=a,_e.carSeriesId=t,_e.carModelId=o,Ie.carModelFullName=`${l} ${i} ${r}`,s&&(_e.factoryData=_(`${s}0101`).valueOf()),_e.uetoDate="",We()},Ze=()=>{uni.$u.http.get("/crm/customer/purchase",{params:{customerId:a.value.customerId,clueId:a.value.clueId}}).then((e=>{const{modelId:a,modelName:t,factoryDate:i,registrationTime:o,colorSource:r,colorSourceValue:s,kilometres:n,priceMin:u,description:c}=e.data;Qe({...e.data}),_e.factoryData=i,_e.uetoDate=o,_e.bodyColor=r,_e.bodyColorValue=s,_e.mileage=n,_e.budgetaryPrice=u,_e.remark=c,l.value&&Xe()}))},We=()=>{uni.$u.http.get("product/carPricing/getStockInfo",{params:{carModelId:_e.carModelId}}).then((e=>{Object.assign(Ie,e.data)}))},Xe=()=>{_e.carModelId?uni.$u.http.get("product/common/model/color",{params:{carModelId:_e.carModelId}}).then((e=>{const a=e.data;y.value=[...a.bodyColors,{name:"其他颜色",value:""}],ce.value=[...a.interiorColors,{name:"其他颜色",value:""}]})):console.error("getColor, carModelId is null")},He=(e,a,l)=>{Ie.carModelFullName?(ye.value=e,Le.value=a,Ce.value=l,de.value.open(),Xe()):(new N).showToast("请先选择车型")},ea=e=>{_e[1==ye.value?"bodyColor":"interiorColor"]=e.bodyColor,_e[1==ye.value?"bodyColorValue":"interiorColorValue"]=e.bodyColorValue,Le.value=e.bodyColorValue,Ce.value=e.bodyColor},aa=e=>{var a;let l=[];return e.forEach((e=>{l=l.concat(e.imageList||[])})),(null==(a=l[0])?void 0:a.attachmentUrl)||""},la=t((()=>aa(_e.allOtherImageList.imageList))),ta=t((()=>{const{carImageFront:e,carImageBack:a,idCardFront:l,idCardBack:t}=_e.allOtherImageList;return aa([...e||[],...a||[],...l||[],...t||[]])})),ia=t((()=>{const{maintenance:e,insurance:a}=_e.allOtherImageList;return aa([...e||[],...a||[]])})),oa=e=>{const a=F("fixImageList")?JSON.parse(F("fixImageList")):{};_e.imageList.length&&(a.imageList=_e.imageList),a.allOtherImageList=Object.assign({},_e.allOtherImageList),Z("fixImageList",JSON.stringify(a)),E(`/pages/fixPrice/photoManage?multiType=${e}&showTab=true`)},ra=()=>{X()},sa=()=>{var e,t,i,o,r,s,n,u,c,d,m,g,f,p,v,h,y,L,C,_,I,k,b,P,V,M,O,w,F,j,B,D,U,S,$,T,Y,J,q;const R=(null==(i=null==(t=null==(e=ze.value)?void 0:e.getFileFields())?void 0:t.all)?void 0:i.map((e=>e.id)))||[],A=(e=>{const{carModelId:a,haveUeto:l,uetoDate:t,bodyColor:i,mileage:o,budgetaryPrice:r,pricingPriceMin:s,pricingPriceMax:n,imageList:u,remark:c,scene:d,pricingCustomerPhone:m}=_e;return a?1!=l||t?i?o?s&&n?c?Ke.value?"VIN码不正确":"":"请输入详细车况":"请输入评估价格":"请输入真实公里":"请选择车身颜色":"请选择首次上牌":"请选择车型"})();if(A)return void(new N).showToast(A);(new N).showLoading("提交中");const E=JSON.parse(JSON.stringify(_e));E.factoryData=Ye(E.factoryData),E.uetoDate=Ye(E.uetoDate),E.imageList=null==(r=null==(o=_e.allOtherImageList.imageList[0])?void 0:o.imageList)?void 0:r.map((e=>e.id)),E.imageTagList=null==(n=null==(s=_e.allOtherImageList.imageList)?void 0:s.slice(1))?void 0:n.map((e=>({tagName:e.tagName,imageList:e.imageList.map((e=>e.id))}))),E.sceneImageList=R,E.id=a.value.id,E.pricingMaintenanceList=null==(c=null==(u=_e.allOtherImageList.maintenance[0])?void 0:u.imageList)?void 0:c.map((e=>e.id||"")),E.pricingInsuranceList=null==(m=null==(d=_e.allOtherImageList.insurance[0])?void 0:d.imageList)?void 0:m.map((e=>e.id||"")),E.pricingVehicleLicenseFrontPhoto=null==(f=null==(g=_e.allOtherImageList.carImageFront[0])?void 0:g.imageList)?void 0:f.map((e=>e.id||""))[0],E.pricingVehicleLicenseBackPhoto=null==(v=null==(p=_e.allOtherImageList.carImageBack[0])?void 0:p.imageList)?void 0:v.map((e=>e.id||""))[0],E.pricingIdCardFrontPhoto=null==(y=null==(h=_e.allOtherImageList.idCardFront[0])?void 0:h.imageList)?void 0:y.map((e=>e.id||""))[0],E.pricingIdCardBackPhoto=null==(C=null==(L=_e.allOtherImageList.idCardBack[0])?void 0:L.imageList)?void 0:C.map((e=>e.id||""))[0],delete E.allOtherImageList;const z=l.value?"/product/carPricing/editCarPricing":"/product/carPricing";E.pricingVehicleLicenseFrontPhoto=(null==(P=null==(b=null==(k=null==(I=null==(_=_e.allOtherImageList)?void 0:_.carImageFront)?void 0:I[0])?void 0:k.imageList)?void 0:b[0])?void 0:P.id)||0,E.pricingVehicleLicenseBackPhoto=(null==(F=null==(w=null==(O=null==(M=null==(V=_e.allOtherImageList)?void 0:V.carImageBack)?void 0:M[0])?void 0:O.imageList)?void 0:w[0])?void 0:F.id)||0,E.pricingIdCardFrontPhoto=(null==(S=null==(U=null==(D=null==(B=null==(j=_e.allOtherImageList)?void 0:j.idCardFront)?void 0:B[0])?void 0:D.imageList)?void 0:U[0])?void 0:S.id)||0,E.pricingIdCardBackPhoto=(null==(q=null==(J=null==(Y=null==(T=null==($=_e.allOtherImageList)?void 0:$.idCardBack)?void 0:T[0])?void 0:Y.imageList)?void 0:J[0])?void 0:q.id)||0,uni.$u.http.post(z,E).then((()=>{(new N).showToast(l.value?"编辑成功":"新增成功"),H("refreshList"),setTimeout((()=>{x("__fixPriceTemp__"),X()}),1e3)}))},na=(e,a,l)=>{Q((()=>{_e[a]=pe(e,l),"keyNum"==a&&(_e[a]>10&&(_e[a]=10),_e[a]<=0&&(_e[a]=null))}))},ua=e=>{const a=_e.pricingPriceMin,l=_e.pricingPriceMax;if(a&&l&&parseFloat(a)>parseFloat(l))return(new N).showToast("最高价必须大于最低价"),void Q((()=>{"pricingPriceMin"==e?_e.pricingPriceMin="":_e.pricingPriceMax=""}))};M((()=>{x("fixImageList")})),b((()=>{P("useTemplate"),V("useTemplate",(e=>{_e.remark=(_e.remark??"")+" "+e.data.content,_e.remark&&_e.remark.length>1e3&&(_e.remark=_e.remark.slice(0,1e3))}))}));const ca=async e=>{if(!e)return;const a=await uni.$u.http.get("/product/ocr/idCard/info",{params:{image:e,side:"front"}}),l=a.data;_e.pricingCustomerName=l.name||"",await da(a.data.number)},da=async e=>{if(console.log("idcard",e),!/^\d{17}(\d|x)$/.test(e))return void we();const a=await uni.$u.http.get("/product/userRealNameInfo/getPhoneByIdCard/"+e);_e.pricingCustomerPhone=a.data||"",a.data||we()},ma=async(e,a)=>{var l,t,i,o;if(!e)return;const r=await uni.$u.http.get("/product/ocr/getVehicleLicense",{params:{image:e,side:a}});_e.vinNo=(null==(l=r.data)?void 0:l.vin)||_e.vinNo,_e.engine=(null==(t=r.data)?void 0:t.engineNo)||_e.engine,_e.uetoDate=(null==(i=r.data)?void 0:i.registerDate)?_(null==(o=r.data)?void 0:o.registerDate).valueOf():_e.uetoDate},ga=async e=>{var a;const l=new N,t=null==(a=null==e?void 0:e.image)?void 0:a[0].attachmentUrl;if(!t)return;l.showLoading("识别中...");try{(async()=>{_e.allOtherImageList||(_e.allOtherImageList={}),_e.allOtherImageList.carImageFront||(_e.allOtherImageList.carImageFront=[{tagName:"车辆行驶证照片",imageList:[]}]),_e.allOtherImageList.carImageFront[0].imageList=(null==e?void 0:e.image)||[];const a=JSON.parse(F("fixImageList")||"{}");console.log("当前存储的fixImageList",JSON.parse(JSON.stringify(a))),a.allOtherImageList=_e.allOtherImageList,Z("fixImageList",JSON.stringify(a))})(),await ma(t,"front")}catch(i){return}finally{l.hideLoading()}};return me.onEvent((({data:e})=>{_e.invitePricingUserList=e})),O(_e,(()=>{Z("__fixPriceTemp__",JSON.stringify({form:_e,showForm:Ie}))})),w((()=>{xe();const e=JSON.parse(F("__fixPriceTemp__")||"{}");e.form&&Object.assign(_e,e.form),e.showForm&&Object.assign(Ie,e.showForm),_e.carModelId&&We()})),(e,a)=>{const t=S,L=p,C=R,I=A,k=i(r("up-icon"),o),b=i(r("up-input"),T),P=G,V=K,N=Y,M=i(r("up-datetime-picker"),$);return n(),s(c,null,[m(t,{class:"page f-c-s"},{default:j((()=>[m(N,{"scroll-y":"",class:"scroll-view-box","enable-flex":"",style:{height:"100%"}},{default:j((()=>[m(t,{class:"content scroll-view-box"},{default:j((()=>[m(t,{class:"photo-box"},{default:j((()=>[m(t,{class:"title"},{default:j((()=>[J("照片资料")])),_:1}),m(t,{class:"photo-item"},{default:j((()=>[m(t,{onClick:a[0]||(a[0]=e=>oa(1)),style:q(`background-image:url(${v(la)})`)},{default:j((()=>[m(L,{src:ee}),m(C,null,{default:j((()=>[J("车辆照片")])),_:1})])),_:1},8,["style"]),m(t,{onClick:a[1]||(a[1]=e=>oa(2)),style:q(`background-image:url(${v(ta)})`)},{default:j((()=>[m(L,{src:ae}),m(C,null,{default:j((()=>[J("证件照片")])),_:1})])),_:1},8,["style"]),m(t,{onClick:a[2]||(a[2]=e=>oa(3)),style:q(`background-image:url(${v(ia)})`)},{default:j((()=>[m(L,{src:le}),m(C,null,{default:j((()=>[J("其他照片")])),_:1})])),_:1},8,["style"])])),_:1})])),_:1}),m(t,{class:"form-box"},{default:j((()=>[g("div",{class:"form-item input-complete",ref_key:"phoneFormItemRef",ref:Ve},[m(t,null,{default:j((()=>[J("客户手机号")])),_:1}),m(I,{modelValue:v(_e).pricingCustomerPhone,"onUpdate:modelValue":a[3]||(a[3]=e=>v(_e).pricingCustomerPhone=e),type:"number",placeholder:"请输入",maxlength:"11",onInput:Fe,onBlur:je},null,8,["modelValue"]),m(k,{onClick:a[4]||(a[4]=a=>("toPage"in e?e.toPage:v(E))(`/pages/carManage/sellUserList?keyword=${v(_e).pricingCustomerName??""}&title=选择客户&isCustomer=1`)),name:"arrow-right"}),v(be)?(n(),f(oe,{key:0,list:v(Pe),onItemClick:Oe},null,8,["list"])):u("",!0)],512),g("div",{class:"form-item input-complete",ref_key:"customerNameFormItemRef",ref:Me},[m(t,null,{default:j((()=>[J("客户姓名")])),_:1}),m(I,{onInput:v(we),ignoreCompositionEvent:!1,modelValue:v(_e).pricingCustomerName,"onUpdate:modelValue":a[5]||(a[5]=e=>v(_e).pricingCustomerName=e),placeholder:"请输入",onBlur:je},null,8,["onInput","modelValue"]),v(Ne)?(n(),f(oe,{key:0,list:v(Pe),onItemClick:Oe},null,8,["list"])):u("",!0)],512),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 车型 ")])),_:1}),m(t,{class:"f-b-c",onClick:a[6]||(a[6]=a=>("toPage"in e?e.toPage:v(E))("/pages/assess/carSelect?selectType=model"))},{default:j((()=>[m(t,{class:z({placeholder:!v(Ie).carModelFullName})},{default:j((()=>[J(h(v(Ie).carModelFullName||"请选择"),1)])),_:1},8,["class"]),m(k,{name:"arrow-right"})])),_:1})])),_:1}),m(t,{class:"form-item disable-item"},{default:j((()=>[m(t,{class:"inventory-title"},{default:j((()=>[J("库存情况")])),_:1}),v(_e).carModelId?(n(),f(ie,{key:0,info:{sameCarModel:v(Ie).sameCarModel,sameCarSeries:v(Ie).sameCarSeries,sameCarBrand:v(Ie).sameCarBrand,sameCarBrandList:v(Ie).sameCarBrandList,sameCarSeriesList:v(Ie).sameCarSeriesList,sameCarModelList:v(Ie).sameCarModelList,carBrandId:v(Ie).carBrandId,carSeriesId:v(Ie).carSeriesId,carModelId:v(Ie).carModelId}},null,8,["info"])):(n(),f(t,{key:1},{default:j((()=>[J("-")])),_:1}))])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("车辆来源")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[(n(!0),s(c,null,d(v(Re),((e,a)=>(n(),f(C,{key:a,class:z({active:v(_e).carCome==e.key}),onClick:a=>v(_e).carCome=e.key},{default:j((()=>[J(h(e.value),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("车辆性质")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[(n(!0),s(c,null,d(v(Ae),((e,a)=>(n(),f(C,{key:a,class:z({active:v(_e).carNature==e.key}),onClick:a=>v(_e).carNature=e.key},{default:j((()=>[J(h(e.value),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(t,{class:"form-item disable-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("新车指导价")])),_:1}),m(I,{modelValue:v(Ie).carModelGuidePrice,"onUpdate:modelValue":a[7]||(a[7]=e=>v(Ie).carModelGuidePrice=e),type:"number",placeholder:"0.00",disabled:""},null,8,["modelValue"]),J(" 万元 ")])),_:1}),m(t,{class:"form-item disable-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("车辆排量")])),_:1}),J(" "+h(v(Ie).displacement||"-"),1)])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("出厂日期")])),_:1}),m(t,{class:z({placeholder:!v(_e).factoryData}),onClick:a[8]||(a[8]=e=>$e("factoryData",v(_e).factoryData))},{default:j((()=>[J(h(Ye(v(_e).factoryData)||"请选择"),1)])),_:1},8,["class"]),m(k,{name:"arrow-right"})])),_:1}),m(t,{class:"form-item error-item","data-error-msg":v(Ke)?"VIN码不正确":""},{default:j((()=>[m(t,null,{default:j((()=>[J("VIN码")])),_:1}),m(t,{class:"tab-box vin-box",style:{"justify-content":"space-between"}},{default:j((()=>[m(I,{modelValue:v(_e).vinNo,"onUpdate:modelValue":a[9]||(a[9]=e=>v(_e).vinNo=e),modelModifiers:{trim:!0},placeholder:"输入VIN码识别品牌车型",style:{"text-transform":"uppercase"},maxlength:"17",onInput:Ge,class:"car-input"},null,8,["modelValue"]),m(re,{maxCount:1,onSuccess:ga})])),_:1})])),_:1},8,["data-error-msg"]),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("发动机号")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[m(I,{modelValue:v(_e).engine,"onUpdate:modelValue":a[10]||(a[10]=e=>v(_e).engine=e),placeholder:"请输入",maxlength:"8",class:"car-input"},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("是否上牌")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[(n(!0),s(c,null,d(v(Ee),((e,a)=>(n(),f(C,{key:a,class:z({active:v(_e).haveUeto==e.key}),onClick:a=>v(_e).haveUeto=e.key},{default:j((()=>[J(h(e.value),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),v(_e).haveUeto?(n(),f(t,{key:0,class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 首次上牌 ")])),_:1}),m(t,{class:z({placeholder:!v(_e).uetoDate}),onClick:a[11]||(a[11]=e=>$e("uetoDate",v(_e).uetoDate))},{default:j((()=>[J(h(Ye(v(_e).uetoDate)||"请选择"),1)])),_:1},8,["class"]),m(k,{name:"arrow-right"})])),_:1})):u("",!0),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 车身颜色 ")])),_:1}),m(t,{class:"f-b-c",onClick:a[12]||(a[12]=e=>He(1,v(_e).bodyColorValue,v(_e).bodyColor))},{default:j((()=>[m(t,{class:z([{none:!v(_e).bodyColor},"f-r-a"])},{default:j((()=>[v(_e).bodyColorValue?(n(),f(C,{key:0,class:"color-box",style:q(`background:${v(_e).bodyColorValue}`)},null,8,["style"])):u("",!0),J(" "+h(v(_e).bodyColorValue?v(_e).bodyColor:v(_e).bodyColor?"其他颜色":"请选择"),1)])),_:1},8,["class"]),m(k,{name:"arrow-right"})])),_:1})])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("内饰颜色")])),_:1}),m(t,{class:"f-b-c",onClick:a[13]||(a[13]=e=>He(2,v(_e).interiorColorValue,v(_e).interiorColor))},{default:j((()=>[m(t,{class:z([{none:!v(_e).interiorColor},"f-r-a"])},{default:j((()=>[v(_e).interiorColorValue?(n(),f(C,{key:0,class:"color-box",style:q(`background:${v(_e).interiorColorValue}`)},null,8,["style"])):u("",!0),J(" "+h(v(_e).interiorColorValue?v(_e).interiorColor:v(_e).interiorColor?"其他颜色":"请选择"),1)])),_:1},8,["class"]),m(k,{name:"arrow-right"})])),_:1})])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 真实公里 ")])),_:1}),m(I,{type:"digit",modelValue:v(_e).mileage,"onUpdate:modelValue":a[14]||(a[14]=e=>v(_e).mileage=e),modelModifiers:{trim:!0},placeholder:"请输入",onInput:a[15]||(a[15]=e=>na(e.detail.value,"mileage","float"))},null,8,["modelValue"]),J(" 万公里 ")])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J("钥匙")])),_:1}),m(I,{type:"digit",modelValue:v(_e).keyNum,"onUpdate:modelValue":a[16]||(a[16]=e=>v(_e).keyNum=e),modelModifiers:{trim:!0},placeholder:"请输入",onInput:a[17]||(a[17]=e=>na(e.detail.value,"keyNum","int"))},null,8,["modelValue"]),J(" 把 ")])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 预估价格 ")])),_:1}),m(t,{class:"customs"},{default:j((()=>[m(t,null,{default:j((()=>[m(b,{type:"digit",inputAlign:"center",placeholder:"最低价",border:"bottom",modelValue:v(_e).pricingPriceMin,"onUpdate:modelValue":[a[18]||(a[18]=e=>v(_e).pricingPriceMin=e),a[19]||(a[19]=e=>na(e,"pricingPriceMin","wanyuan"))],onBlur:a[20]||(a[20]=e=>ua("pricingPriceMin"))},null,8,["modelValue"])])),_:1}),m(C,null,{default:j((()=>[J("-")])),_:1}),m(t,null,{default:j((()=>[m(b,{type:"digit",inputAlign:"center",placeholder:"最高价",border:"bottom",modelValue:v(_e).pricingPriceMax,"onUpdate:modelValue":[a[21]||(a[21]=e=>v(_e).pricingPriceMax=e),a[22]||(a[22]=e=>na(e,"pricingPriceMax","wanyuan"))],onBlur:a[23]||(a[23]=e=>ua("pricingPriceMax"))},null,8,["modelValue"])])),_:1})])),_:1}),J(" 万元 ")])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[J(" 客户预期价 ")])),_:1}),m(I,{modelValue:v(_e).budgetaryPrice,"onUpdate:modelValue":a[24]||(a[24]=e=>v(_e).budgetaryPrice=e),modelModifiers:{trim:!0},type:"digit",placeholder:"请输入",onInput:a[25]||(a[25]=e=>na(e.detail.value,"budgetaryPrice","wanyuan"))},null,8,["modelValue"]),J(" 万元 ")])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 是否现场 ")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[(n(!0),s(c,null,d(v(Ee),((e,a)=>(n(),f(C,{key:a,class:z({active:v(_e).scene==e.key}),onClick:()=>{v(_e).scene=e.key,Q((()=>{W({scrollTop:2e3,duration:100})}))}},{default:j((()=>[J(h(e.value),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(t,{class:"form-item"},{default:j((()=>[m(t,null,{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 是否询价 ")])),_:1}),m(t,{class:"tab-box"},{default:j((()=>[(n(!0),s(c,null,d(v(Ee),(e=>(n(),f(C,{key:e.key,class:z({active:v(_e).enquiry==e.key}),onClick:a=>v(_e).enquiry=e.key},{default:j((()=>[J(h(e.value),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m(t,{class:"form-textarea"},{default:j((()=>[g("div",{class:"label"},[m(t,{class:"area-title"},{default:j((()=>[m(C,null,{default:j((()=>[J("*")])),_:1}),J(" 详细车况 ")])),_:1}),m(t,{class:"template-tag",onClick:a[26]||(a[26]=a=>("toPage"in e?e.toPage:v(E))("/pages/myTemplate/index"))},{default:j((()=>[J("我的模版")])),_:1})]),m(P,{modelValue:v(_e).remark,"onUpdate:modelValue":a[27]||(a[27]=e=>v(_e).remark=e),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"]),m(t,{class:"limit"},{default:j((()=>{var e;return[J(h((null==(e=v(_e).remark)?void 0:e.length)||0)+"/1000",1)]})),_:1})])),_:1}),m(t,{class:"form-item flex-col"},{default:j((()=>[g("div",{class:"label flex-col"},[m(t,{class:"area-title"},{default:j((()=>[v(l)?u("",!0):(n(),f(C,{key:0,class:"star"},{default:j((()=>[J("*")])),_:1})),J(" 定价师 ")])),_:1}),m(t,{class:"desc"},{default:j((()=>[J("默认由上级领导进行定价，可添加其他定价师进行定价")])),_:1})]),m(he,{class:"mt-16",list:v(ke),modelValue:v(_e).invitePricingUserList,"onUpdate:modelValue":a[28]||(a[28]=e=>v(_e).invitePricingUserList=e),edit:!v(l),onAdd:a[29]||(a[29]=a=>("toPage"in e?e.toPage:v(E))(`/pages/assess/fixPriceSelect?checkIds=${v(_e).invitePricingUserList.join(",")}`))},null,8,["list","modelValue","edit"])])),_:1})])),_:1})])),_:1}),m(t,{class:"bottom-btn"},{default:j((()=>[m(V,{onClick:ra},{default:j((()=>[J("取消")])),_:1}),m(V,{class:"save-btn",onClick:a[30]||(a[30]=e=>sa())},{default:j((()=>[J("确定")])),_:1})])),_:1})])),_:1})])),_:1}),m(te,{ref_key:"colorPop",ref:de,colorData:1==v(ye)?v(y):v(ce),colorValue:v(Le),colorName:v(Ce),onSureColor:ea,title:1==v(ye)?"车身颜色":"内饰颜色"},null,8,["colorData","colorValue","colorName","title"]),m(M,{show:v(Be),modelValue:v(Ue),"onUpdate:modelValue":a[31]||(a[31]=e=>B(Ue)?Ue.value=e:null),mode:"year-month","value-format":"YYYY-MM",confirmColor:"#ff5719",maxDate:v(_)().valueOf(),minDate:v(Se),formatter:qe,onCancel:a[32]||(a[32]=e=>Be.value=!1),onConfirm:Te},null,8,["show","modelValue","maxDate","minDate"])],64)}}}),[["__scopeId","data-v-f6d1da44"]]);export{ye as default};
