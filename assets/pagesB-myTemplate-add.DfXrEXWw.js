import{d as a,x as e,r as t,q as l,b as n,a as s,u as o,w as u,i as d,o as i,g as c,h as m,R as r,aj as f,t as p,W as v,a1 as _,a0 as h,Z as g,ar as x,_ as V}from"./index-CK4DGatK.js";import{N as b}from"./NavBar.DSs5OGCU.js";import{u as j}from"./useQuery.3dd8K18V.js";const y=V(a({__name:"add",setup(a){const V=j(),y=e((()=>!!V.value.id)),T=t({});function k(){_()}return l((()=>{y.value&&async function(){const a=await uni.$u.http.get("/product/convenientTemplate/"+V.value.id);T.value=(null==a?void 0:a.data)||{}}()})),(a,e)=>{const t=m,l=d,_=r,V=f,j=v;return i(),n("div",{class:"page f-c-s"},[s(b,{title:o(y)?"编辑模版":"新建模版"},null,8,["title"]),s(l,{class:"content"},{default:u((()=>[s(l,{class:"form-box"},{default:u((()=>[s(l,{class:"form-item"},{default:u((()=>[s(l,null,{default:u((()=>[c("模板名称"),s(t,null,{default:u((()=>[c("*")])),_:1})])),_:1}),s(_,{class:"temp-name",modelValue:o(T).name,"onUpdate:modelValue":e[0]||(e[0]=a=>o(T).name=a),modelModifiers:{trim:!0},placeholder:"请输入",maxlength:20},null,8,["modelValue"])])),_:1}),s(l,{class:"form-textarea"},{default:u((()=>[s(l,{class:"area-title"},{default:u((()=>[c("模板内容"),s(t,null,{default:u((()=>[c("*")])),_:1})])),_:1}),s(V,{modelValue:o(T).content,"onUpdate:modelValue":e[1]||(e[1]=a=>o(T).content=a),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"]),s(l,{class:"limit"},{default:u((()=>{var a;return[c(p((null==(a=o(T).content)?void 0:a.length)||0)+"/1000",1)]})),_:1})])),_:1})])),_:1})])),_:1}),s(l,{class:"bottom-btn"},{default:u((()=>[s(j,{onClick:k},{default:u((()=>[c("取消")])),_:1}),s(j,{class:"save-btn",onClick:e[2]||(e[2]=a=>async function(){T.value.name?(T.value.content||h({title:"请输入模板内容",icon:"none"}),g({title:"提交中",mask:!0}),await uni.$u.http.post("/product/convenientTemplate/saveOrUpdate",{id:T.value.id,name:T.value.name,content:T.value.content,templateType:"generic",templateFrom:"app"}),h({title:"保存成功",icon:"none"}),setTimeout((()=>{k(),x("refresh")}),1e3)):h({title:"请输入模板名称",icon:"none"})}())},{default:u((()=>[c("确定")])),_:1})])),_:1})])}}}),[["__scopeId","data-v-f4ad1f53"]]);export{y as default};
