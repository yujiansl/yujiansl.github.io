import{d as a,x as e,r as l,a9 as t,q as s,G as i,c as u,w as o,i as c,I as d,am as r,K as n,M as m,ac as p,o as f,a as _,y as L,O as g,u as v,b as h,F as I,e as O,g as y,t as T,T as k,P as x,h as S,R as b,z as F,W as C,n as A,a0 as j,ar as H,a1 as P,_ as E}from"./index-CK4DGatK.js";import{U as N,_ as B}from"./UploadFile.BBuXxkzB.js";import{_ as R}from"./close.Dhgi5Ijg.js";import{N as V}from"./NavBar.DSs5OGCU.js";import{W as w}from"./WFooter.yvz07YFu.js";import{u as D}from"./useQuery.3dd8K18V.js";import"./dev.3CSglq9A.js";import"./index.BP9c-u7r.js";import"./image.DobRSNlT.js";import"./play.dJbs8fP_.js";import"./vuedraggable.umd.DwpyKIuh.js";const Y=E(a({__name:"photoManage",setup(a){const E=D(),Y=e((()=>1==+E.value.idPhotoHide)),M=l(!1),z=l(""),U=l("car"),W=l(0),q=t({allOtherImageList:{}}),Q=e((()=>[{name:"车辆照片",value:"car"},...Y.value?[]:[{name:"证件照片",value:"certificate"}],{name:"其他照片",value:"other"}])),G=a=>{W.value=a.index,U.value=a.value},J=(a,e,l)=>{q.allOtherImageList[l].forEach(((l,t)=>{t==e&&(l.el=a)}))};s((()=>{const a=i("fixImageList")?JSON.parse(i("fixImageList")):{};q.allOtherImageList=a.allOtherImageList,E.value.multiType?(W.value=E.value.multiType-1,U.value=Q.value[E.value.multiType-1].value):(W.value=0,U.value=Q.value[0].value)}));const K=()=>{z.value?q.allOtherImageList.imageList.some((a=>a.tagName==z.value))?j({title:"分类名称已存在",icon:"none"}):(q.allOtherImageList.imageList.push({tagName:z.value,imageList:[]}),M.value=!1,z.value=""):j({title:"请输入分类名称",icon:"none"})},X=()=>{(()=>{for(const a in q.allOtherImageList)q.allOtherImageList[a].forEach((a=>{var e,l;a.imageList=(null==(l=null==(e=a.el)?void 0:e.getFileFields())?void 0:l.all)||[]}))})(),E.value.multiType?H("addPhoto",{type:E.value.multiType,value:q.allOtherImageList}):H("addPhoto",q.allOtherImageList),P()};return(a,e)=>{const l=d(n("up-tabs"),r),t=c,s=d(n("up-icon"),m),i=x,j=S,H=b,P=C,D=d(n("u-popup"),p);return f(),u(t,{class:"page"},{default:o((()=>[_(V,{title:"照片管理"}),"true"==v(E).showTab||1==v(E).showTab?(f(),u(l,{key:0,list:v(Q),current:v(W),lineColor:"#DD4F33",activeStyle:{color:"#20283D",fontSize:"32rpx"},inactiveStyle:{color:"#999",fontSize:"32rpx"},onClick:G,scrollable:!1},null,8,["list","current"])):L("",!0),g(_(t,{class:"content"},{default:o((()=>[(f(!0),h(I,null,O(v(q).allOtherImageList.imageList,((a,e)=>(f(),u(t,{class:"video-box",key:e},{default:o((()=>[_(t,{class:"video-item"},{default:o((()=>[_(t,{class:"title"},{default:o((()=>[_(t,null,{default:o((()=>[y(T(a.tagName),1)])),_:2},1024),v(E).detail||0!=v(W)?L("",!0):(f(),u(t,{key:0,class:"add",onClick:a=>(a=>{0===a?M.value=!0:q.allOtherImageList.imageList.splice(a,1)})(e)},{default:o((()=>[_(s,{name:0===e?"plus-circle":"minus-circle",color:"#de6728",class:"u-m-r-10"},null,8,["name"]),y(" "+T(0===e?"添加分类":"删除"),1)])),_:2},1032,["onClick"]))])),_:2},1024),_(N,{ref_for:!0,ref:a=>J(a,e,"imageList"),carAttachmentType:"CLASSIFY_OTHER_PHOTOS",accept:"all","max-count":99,uploadList:a.imageList,detail:v(E).detail},null,8,["uploadList","detail"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),[[k,"car"==v(U)]]),g(_(t,{class:"content"},{default:o((()=>[_(t,{class:"video-box"},{default:o((()=>[_(t,{class:"video-item"},{default:o((()=>[_(t,{class:"title"},{default:o((()=>[_(t,null,{default:o((()=>[y("车辆行驶证照片"),v(E).detail?L("",!0):(f(),u(t,{key:0,class:"sub-title"},{default:o((()=>[y("首张请上传VIN码页")])),_:1}))])),_:1})])),_:1}),_(t,{class:"photo-grid"},{default:o((()=>[(f(!0),h(I,null,O(v(q).allOtherImageList.carImageFront,((a,e)=>(f(),u(N,{key:e,ref_for:!0,ref:a=>J(a,e,"carImageFront"),carAttachmentType:"VehicleLicense",accept:"all","max-count":1,uploadList:a.imageList,detail:v(E).detail},null,8,["uploadList","detail"])))),128)),(f(!0),h(I,null,O(v(q).allOtherImageList.carImageBack,((a,e)=>(f(),u(N,{key:e,ref_for:!0,ref:a=>J(a,e,"carImageBack"),carAttachmentType:"VehicleLicense",accept:"all","max-count":1,uploadList:a.imageList,detail:v(E).detail},null,8,["uploadList","detail"])))),128))])),_:1})])),_:1}),_(t,{class:"video-item"},{default:o((()=>[_(t,{class:"title"},{default:o((()=>[_(t,null,{default:o((()=>[y("车主身份证"),v(E).detail?L("",!0):(f(),u(t,{key:0,class:"sub-title"},{default:o((()=>[y("首张请上传头像面")])),_:1}))])),_:1})])),_:1}),_(t,{class:"photo-grid"},{default:o((()=>[(f(!0),h(I,null,O(v(q).allOtherImageList.idCardFront,((a,e)=>(f(),u(N,{key:e,ref_for:!0,ref:a=>J(a,e,"idCardFront"),carAttachmentType:"CLASSIFY_OTHER_PHOTOS",accept:"all","max-count":1,uploadList:a.imageList,detail:v(E).detail},{uploadIcon:o((()=>[_(i,{class:"upload-icon",mode:"aspectFill",src:B}),_(j,{class:"uploadIconText"},{default:o((()=>[y("身份证头像面")])),_:1})])),_:2},1032,["uploadList","detail"])))),128)),(f(!0),h(I,null,O(v(q).allOtherImageList.idCardBack,((a,e)=>(f(),u(N,{key:e,ref_for:!0,ref:a=>J(a,e,"idCardBack"),carAttachmentType:"CLASSIFY_OTHER_PHOTOS",accept:"all","max-count":1,uploadList:a.imageList,detail:v(E).detail},{uploadIcon:o((()=>[_(i,{class:"upload-icon",mode:"aspectFill",src:B}),_(j,{class:"uploadIconText"},{default:o((()=>[y("身份证国徽面")])),_:1})])),_:2},1032,["uploadList","detail"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},512),[[k,"certificate"==v(U)]]),g(_(t,{class:"content"},{default:o((()=>[_(t,{class:"video-box"},{default:o((()=>[(f(!0),h(I,null,O(v(q).allOtherImageList.maintenance,((a,e)=>(f(),u(t,{class:"video-item",key:e},{default:o((()=>[_(t,{class:"title"},{default:o((()=>[_(t,null,{default:o((()=>[y("维保照片"),v(E).detail?L("",!0):(f(),u(t,{key:0,class:"sub-title"},{default:o((()=>[y("按住照片拖动可排序，支持上传多张")])),_:1}))])),_:1})])),_:1}),_(N,{ref_for:!0,ref:a=>J(a,e,"maintenance"),carAttachmentType:"CLASSIFY_OTHER_PHOTOS",accept:"all","max-count":99,uploadList:a.imageList,detail:v(E).detail},null,8,["uploadList","detail"])])),_:2},1024)))),128)),(f(!0),h(I,null,O(v(q).allOtherImageList.insurance,((a,e)=>(f(),u(t,{class:"video-item",key:e},{default:o((()=>[_(t,{class:"title"},{default:o((()=>[_(t,null,{default:o((()=>[y("出险照片"),v(E).detail?L("",!0):(f(),u(t,{key:0,class:"sub-title"},{default:o((()=>[y("按住照片拖动可排序，支持上传多张")])),_:1}))])),_:1})])),_:1}),_(N,{ref_for:!0,ref:a=>J(a,e,"insurance"),carAttachmentType:"CLASSIFY_OTHER_PHOTOS",accept:"all","max-count":99,uploadList:a.imageList,detail:v(E).detail},null,8,["uploadList","detail"])])),_:2},1024)))),128))])),_:1})])),_:1},512),[[k,"other"==v(U)]]),_(D,{mode:"center",round:12,closeOnClickOverlay:!0,show:v(M),safeAreaInsetBottom:!1},{default:o((()=>[_(t,{class:"pop-box"},{default:o((()=>[_(t,{class:"head"},{default:o((()=>[_(t,{class:"place"}),_(t,null,{default:o((()=>[y("添加分类")])),_:1}),_(i,{onClick:e[0]||(e[0]=a=>M.value=!1),class:"place",src:R,mode:"aspectFill"})])),_:1}),_(t,{class:"content"},{default:o((()=>[_(t,{class:"label"},{default:o((()=>[y("分类名称"),_(j,null,{default:o((()=>[y("*")])),_:1})])),_:1}),_(H,{modelValue:v(z),"onUpdate:modelValue":e[1]||(e[1]=a=>F(z)?z.value=a:null),modelModifiers:{trim:!0},placeholder:"请输入",maxlength:"10",class:"pop-input"},null,8,["modelValue"]),_(P,{onClick:K,class:A(["pop-button",{active:v(z)}])},{default:o((()=>[y("提交")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["show"]),v(E).detail?L("",!0):(f(),u(w,{key:1},{default:o((()=>[_(P,{class:"ok-btn",onClick:X},{default:o((()=>[y("确定")])),_:1})])),_:1}))])),_:1})}}}),[["__scopeId","data-v-0b9af69b"]]);export{Y as default};
