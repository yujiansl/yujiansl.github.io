import{d as e,b as a,F as s,e as l,o as t,a as i,k as c,c as o,y as n,u as r,P as d,t as u,_ as m,aY as v,m as p,r as f,x as k,q as x,Z as _,a2 as h,w as b,z as y,I as C,b9 as g,K as V,bz as I}from"./index-CK4DGatK.js";import{N as j}from"./NavBar.DSs5OGCU.js";import{f as P}from"./fixPriceSelect-emit.BQjwsz_q.js";import{_ as F}from"./close-btn.mZjD6hdt.js";import{A as N}from"./avatar.hGMRw2TZ.js";import{u as S}from"./useQuery.3dd8K18V.js";import"./event.CJk5hinv.js";const L=m(e({__name:"FixPriceUserTag",props:{list:{}},emits:["close"],setup(e,{emit:m}){const v=e,p=m;return(e,m)=>{const f=d;return t(),a("div",{class:"fix-price-user-tag"},[(t(!0),a(s,null,l(v.list,((e,s)=>(t(),a("div",{class:"tag",key:e.id},[i(f,{class:"avatar",src:e.avatar||r(N),mode:"scaleToFill"},null,8,["src"]),c("div",{class:"name one-ell"},u(e.name),1),e.needClose?(t(),o(f,{key:0,src:F,onClick:a=>p("close",{item:e,index:s}),class:"close-btn"},null,8,["onClick"])):n("",!0)])))),128))])}}}),[["__scopeId","data-v-8ba8812a"]]),T=m(e({__name:"FixPriceCheckList",props:v({list:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const m=e,v=p(e,"modelValue");return(e,p)=>{const f=d;return t(),a("div",{class:"fix-price-check-list"},[(t(!0),a(s,null,l(m.list,(e=>(t(),a("div",{class:"list-item",onClick:a=>function(e){const a=v.value.findIndex((a=>a===e.id));a>-1&&!e.needClose||(a>-1?v.value.splice(a,1):v.value.push(e.id))}(e),key:e.id},[c("div",{class:"left"},[i(f,{class:"avatar",src:e.avatar||r(N),mode:"scaleToFill"},null,8,["src"]),c("div",{class:"name-box"},[c("div",{class:"name"},u(e.name),1),e.postNameStr?(t(),a("div",{key:0,class:"post"},u(e.postNameStr),1)):n("",!0)])]),v.value.includes(e.id)?(t(),o(f,{key:0,class:"check-img",src:"./static/assess/check.png",mode:"scaleToFill"})):n("",!0)],8,["onClick"])))),128))])}}}),[["__scopeId","data-v-69c956ef"]]),U=m(e({__name:"fixPriceSelect",setup(e){const s=S(),l=f([]),o=f([]),n=f(""),d=k((()=>n.value?o.value.filter((e=>e.name&&e.name.includes(n.value)||e.postNameStr&&e.postNameStr.includes(n.value))):o.value)),u=k((()=>o.value.filter((e=>l.value.includes(e.id)))));function m({item:e}){const a=e.id,s=l.value.findIndex((e=>e===a));l.value.splice(s,1)}function v(){P.emitEvent({data:l.value,queryData:s.value}),I()}return x((()=>{var e;!async function(){_({title:"加载中",mask:!0});const e=(await uni.$u.http.get("/product/carPricing/queryRaterList")).data||{},a=e.leaderUser;a&&(a.isLeader=!0);const s=e.raterUserList||[];o.value=[a,...s].filter(Boolean).map((e=>({...e,id:e.userId,needClose:!e.isLeader}))),h()}(),l.value=((null==(e=s.value.checkIds)?void 0:e.split(","))||[]).filter(Boolean)})),(e,s)=>{const o=C(V("up-search"),g);return t(),a("div",{class:"page"},[i(j,{title:"邀请定价师"},{right:b((()=>[c("div",{class:"nav-btn",onClick:v},"确认")])),_:1}),c("div",{class:"head-box"},[i(o,{placeholder:"搜姓名或岗位",modelValue:r(n),"onUpdate:modelValue":s[0]||(s[0]=e=>y(n)?n.value=e:null),"show-action":!0,actionText:"搜索"},null,8,["modelValue"]),i(L,{list:r(u),onClose:m},null,8,["list"])]),c("div",{class:"body"},[i(T,{list:r(d),modelValue:r(l),"onUpdate:modelValue":s[1]||(s[1]=e=>y(l)?l.value=e:null)},null,8,["list","modelValue"])])])}}}),[["__scopeId","data-v-84fbd6f2"]]);export{U as default};
