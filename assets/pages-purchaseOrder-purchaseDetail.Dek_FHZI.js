import{b as e,p as a}from"./index.HDA2F_3Q.js";import{t}from"./index.BP9c-u7r.js";import{d as l,a9 as r,I as n,M as u,K as s,c,o,i,f as d,w as m,b as p,e as f,a as y,g as _,t as h,u as v,au as g,y as I,h as k,F as C,Q as P,_ as b,r as A,A as N,E as T,Z as D,a2 as w,s as L,x as $,am as x,aP as O,aQ as j,ad as M,P as S,S as B,W as R,ai as U,a0 as F,D as E,bG as K,ar as V,a8 as Y,an as z}from"./index-CK4DGatK.js";import{_ as Q}from"./camera.DDOxr1zP.js";import{_ as q}from"./card.DgxD9h_f.js";import{_ as G}from"./photo.s3UpHRXl.js";import{N as H}from"./NavBar.DSs5OGCU.js";import{L as J}from"./listItem.De6Dqo0z.js";import{R as Z}from"./refuse.BEcO0WCW.js";import{u as W}from"./useQuery.3dd8K18V.js";import{P as X}from"./purchase.B8DNaFGL.js";import{L as ee}from"./ListLoadRefreshView.CnNC2lkG.js";import{o as ae}from"./omit.DzeQdT5l.js";import{i as te}from"./isNil.aV-w2MPu.js";import"./time._VqwKl0d.js";import"./car_default.CyENNAub.js";import"./fixPrice.CFXyKkhm.js";import"./base.6l0JEBJr.js";import"./close.Dhgi5Ijg.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const le=b(l({__name:"payRecord",props:{infoData:Array,default:()=>[]},setup(e){const a=W(),t=r({noPayment:"审核中",paymentSuccess:"已付款",paymentAll:"已付款",cancel:"已拒绝",revocation:"已撤销"}),l=r({noPayment:"#FF7525",cancel:"#FF1F00",paymentSuccess:"#10CD8B",paymentAll:"#10CD8B",revocation:"#C7CBD1"});return(r,b)=>{const A=i,N=k,T=n(s("up-icon"),u);return o(),c(A,{class:"record",style:d({"min-height":r.minHeight})},{default:m((()=>[(o(!0),p(C,null,f(e.infoData,((e,r)=>(o(),c(A,{class:"list-item",key:r},{default:m((()=>[y(A,{class:"head"},{default:m((()=>[y(A,{class:"time"},{default:m((()=>[_(h(v(g)(e.applyTime).format("YYYY-MM-DD HH:mm"))+"发起",1)])),_:2},1024),y(A,{class:"status",style:d({color:v(l)[e.paymentStatus]})},{default:m((()=>{return[_(h((a=e.paymentStatus,t[a]?t[a]:""))+" ",1),"noPayment"==e.paymentStatus&&e.examineUser?(o(),c(N,{key:0},{default:m((()=>{var a;return[_("("+h(null==(a=e.examineUser)?void 0:a.name)+") ",1)]})),_:2},1024)):I("",!0)];var a})),_:2},1032,["style"])])),_:2},1024),y(A,{class:"info"},{default:m((()=>[y(A,null,{default:m((()=>[y(A,null,{default:m((()=>[_("申请付款金额(元)")])),_:1}),y(A,{class:"money"},{default:m((()=>[_(h(e.paymentPrice||"-"),1)])),_:2},1024)])),_:2},1024),y(A,null,{default:m((()=>[y(A,null,{default:m((()=>[_("款项")])),_:1}),y(A,{class:"kuanxiang"},{default:m((()=>[_(h(e.paymentTypeName||"-"),1)])),_:2},1024)])),_:2},1024),y(A,{class:"more"},{default:m((()=>[y(A,{onClick:t=>(e=>{P(`/pages/purchaseOrder/replyDetail?purchaseId=${a.value.purchaseId}&paymentId=${e.paymentId}`)})(e)},{default:m((()=>[_("查看详情 "),y(T,{name:"arrow-right",color:"#3c73ff",size:"12"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"])}}}),[["__scopeId","data-v-cd67f669"]]),re=b(l({__name:"purchaseDetail",setup(l){const u=A(),g=W(),b=N(),re=A([]),ne=A([]),ue=A([{name:"详情",val:"detail"},{name:"审批记录",val:"track"}]),se=A({carPricingInfo:{},customerAndContractInfo:{}}),ce=r({current:1,size:3,total:0}),oe=A(),ie=A(),de=A([]),me=A(""),pe=A();T((()=>{he(),ke(),ce.current=1,ce.total=0}));const fe=()=>{uni.$u.http.get("/product/paymentOrder/queryAppPaymentInfo",{params:{purchaseId:se.value.purchaseId}}).then((e=>{const{purchasePrice:a,paidPrice:t,paidingPrice:l,unpaidPrice:r,payee:n,bankCardNumber:u,openBank:s}=e.data,c={id:g.value.purchaseId,purchasePrice:a,paidPrice:t,paidingPrice:l,unpaidPrice:r,payee:n,bankCardNumber:u,openBank:s};if(ne.value.length){const{payee:e,openBank:a,bankCardNumber:t}=ne.value[0]||{};c.payee=e,c.openBank=a,c.bankCardNumber=t}P(`/pages/purchaseOrder/addPayment?params=${JSON.stringify(c)}`)}))},ye=()=>new Promise((e=>{uni.$u.http.post("/product/paymentOrder/pageFullPaymentRecord",{purchaseId:g.value.purchaseId,...ae(ce,"total")}).then((a=>{ne.value=ne.value.concat(a.data.results),ce.total=a.data.count,e(!0)}))})),_e=async()=>{var e;ce.current=1,await Promise.all([he(),ke()]),null==(e=pe.value)||e.loadFinish()},he=()=>new Promise((e=>{var a,t;D({title:"加载中"}),ne.value=[];const l=g.value.id||g.value.primaryKey,r=2==+((null==(a=g.value)?void 0:a.detailStatus)??-99)||"cancel"===g.value.status?`/product/carPricing/refuse/${l}`:`/product/carPricing/${l}`;let n={};if("cancel"!=g.value.status){const e=null==(t=g.value)?void 0:t.purchaseId,a=g.value.taskId;n={purchaseId:e||null,taskId:a||null}}uni.$u.http.get(r,{params:n}).then((a=>{w(),se.value=a.data||{},me.value=a.data.customerAndContractInfo.previewUrl,ue.value=[{name:"详情",val:"detail"},{name:"付款记录",val:"record"},{name:"审批记录",val:"track"}],ye(),me.value||"Online"!=a.data.customerAndContractInfo.signMethod||uni.$u.http.get("/product/purchaseOrder/getContractInfo",{params:{purchaseId:a.data.purchaseId}}).then((e=>{const t=a.data,l=e.data;uni.$u.http.post("/product/purchaseOrder/purchasePreview",{pricingId:g.value.id||g.value.primaryKey,purchasePrice:t.purchaseOrderPrice,deposit:t.deposit,paymentMethod:t.paymentMethod,purchaseTime:t.purchaseOrderTime,vinNo:t.vinNo,plateNo:t.plateNo,customerId:t.customerId,customerMobile:t.customerMobile,customerName:t.customerName,idNumber:l.signatoryIdNumber,payee:t.customerAndContractInfo.payee,openBank:t.customerAndContractInfo.openBank,bankCardNumber:t.customerAndContractInfo.bankCardNumber,signMethod:t.customerAndContractInfo.signMethod,enterpriseId:l.enterpriseId,templateId:l.templateId,address:l.address,bearParty:l.bearParty,supplement:l.supplement,engine:l.engine,keyNum:l.keyNum,remark:t.purchaseRemark,carDelivery:t.carDelivery,carDeliveryTime:t.carDeliveryTime,customerType:t.customerAndContractInfo.customerType,customerEnterpriseName:t.customerAndContractInfo.customerEnterpriseName,customerEnterpriseMobile:t.customerAndContractInfo.customerEnterpriseMobile,customerEnterpriseTaxNumber:t.customerAndContractInfo.customerEnterpriseTaxNumber}).then((e=>{me.value=e.data}))}));const{violationPhotos:t,vehicleLicenseFrontPhoto:l,vehicleLicenseBackPhoto:r,registerCertificatePhotos:n,nameplatePhoto:u,idCardFrontPhoto:s,idCardBackPhoto:c,payAttachmentInfo:o,purchaseOther:i,repaymentList:d,maintenanceList:m,insuranceList:p,purchaseImageList:f,purchasseImageTagList:y,enterpriseBusinessLicenseImageList:_}=a.data,h=(e,a)=>{if(!e)return[];return(Array.isArray(e)?e:[e]).map((e=>({id:e.id,videoCover:e.videoCover,attachmentUrl:e.attachmentUrl,carAttachmentType:a,attachmentId:e.attachmentId})))};de.value=[...h(t,"VIOLATION"),...h(l,"VehicleLicense"),...h(r,"VehicleLicenseBack"),...h(n,"RegisterCertificate"),...h(u,"Nameplate"),...h(s,"ID_CARD_FRONT"),...h(c,"ID_CARD_BACK"),...h(o,"PRICING_PAYMENT_APPLY"),...h(i,"purchaseOther"),...h(d,"repayment"),...h(m,"maintenance"),...h(p,"insurance"),...h(_,"purchaseEnterpriseBusinessLicense"),{carAttachmentType:"carImage",imageList:[{tagName:"车辆照片",imageList:f},...y||[]]}],g.value.id&&Ie({val:"record"}),e(!0)}))})),ve=A("detail"),ge=A(0),Ie=async e=>{if(!ue.value.find((a=>a.val==e.val)).disabled)switch(D({title:"加载中"}),ve.value=e.val,ue.value=[{name:"详情",val:"detail",disabled:!0},{name:"付款记录",val:"record",disabled:!0},{name:"审批记录",val:"track",disabled:!0}],await L(),w(),ue.value=[{name:"详情",val:"detail",disabled:!1},{name:"付款记录",val:"record",disabled:!1},{name:"审批记录",val:"track",disabled:!1}],e.val){case"detail":ge.value=0;break;case"record":ge.value=1;break;case"track":ge.value=2;break;default:return}},ke=()=>new Promise((e=>{uni.$u.http.get("/product/carPricingFlowable/queryTrack",{params:{id:g.value.primaryKey||g.value.id}}).then((a=>{re.value=a.data,e(!0)}))})),Ce=e=>{(new E).showLoading("提交中"),uni.$u.http.post("/product/carPricingFlowable/editStatus",{carPricingId:se.value.carPricingInfo.id,editStatus:2,statusRemark:e,purchaseId:g.value.purchaseId}).then((()=>{K(`/pages/purchaseOrder/purchaseDetail?id=${g.value.id}&purchaseId=${g.value.purchaseId}&status=cancel`),V("refreshList")}))},Pe=e=>{var a;Y("carAttachments",JSON.stringify(de.value)),P(`/pages/carManage/photoManage?type=${e}&detail=${+(null==(a=g.value)?void 0:a.itemType)===X["订单状态"]?0:1}&isPurchase=1&purchaseId=${g.value.purchaseId}&itemType=${g.value.itemType}&customerType=${se.value.customerAndContractInfo.customerType}`)},be=$((()=>{var e,a,t,l;return(null==(l=null==(t=null==(a=null==(e=de.value)?void 0:e.filter((e=>["carImage"].includes(e.carAttachmentType)))[0])?void 0:a.imageList[0])?void 0:t.imageList[0])?void 0:l.attachmentUrl)||""})),Ae=$((()=>{var e,a;return(null==(a=null==(e=de.value)?void 0:e.filter((e=>["VehicleLicense","VehicleLicenseBack","RegisterCertificate","Nameplate","ID_CARD_FRONT","ID_CARD_BACK","purchaseEnterpriseBusinessLicense"].includes(e.carAttachmentType)))[0])?void 0:a.attachmentUrl)||""})),Ne=$((()=>{var e;const a=null==(e=de.value)?void 0:e.filter((e=>["maintenance","insurance","repayment","VIOLATION","purchaseOther"].includes(e.carAttachmentType)))[0];return(null==a?void 0:a.videoCover)||(null==a?void 0:a.attachmentUrl)||""})),Te=(e,t="")=>{(new E).showLoading("提交中");const l={taskId:g.value.taskId,taskDefinitionKey:g.value.taskDefinitionKey,primaryKey:g.value.primaryKey,auditOpinion:e};t&&(l.comment=t),uni.$u.http.post("/product/carPricingFlowable/taskTurnover",l).then((()=>{var a;null==(a=ie.value)||a.close(),z("app"==g.value.pushType?"/pages/purchaseOrder/purchaseDetail":"",1==e?"1":"2")})).catch((e=>{a(e.message)}))},De=()=>{const e=se.value.purchaseId,a=se.value.purchaseOrderPrice??se.value.purchasePrice??0,t=se.value.paymentPrice??se.value.paidAmount??0;let l=0;ne.value.forEach((e=>{"noPayment"===e.paymentStatus&&(l+=+(e.paymentPrice??0))})),D({title:"加载中"}),uni.$u.http.post("product/purchase/queryUpdatePurchaseDetail",{purchaseId:e}).then((r=>{var n;2!=(null==(n=null==r?void 0:r.data)?void 0:n.status)?(w(),P(`/pages/purchaseOrder/editPurchasePrice?id=${e}&purchasePrice=${a}&paidPrice=${t}&enRoutePrice=${l}`)):(new E).showToast("该采购订单已发起修改")}))},we=()=>{if("record"!=ve.value)return;ce.current*ce.size<ce.total&&(ce.current++,ye())},Le=$((()=>g.value.status&&!g.value.primaryKey&&(se.value.canCancel||se.value.canPayment&&["waitPayment","duringPayment","completePayment"].includes(g.value.status))));return(a,l)=>{const r=i,A=S,N=k,T=n(s("up-tabs"),x),D=n(s("up-steps-item"),O),w=n(s("up-steps"),j),L=R;return o(),c(r,{class:"purchase-detail detail"},{default:m((()=>[v(b).needShowQw()?I("",!0):(o(),c(H,{key:0,title:"采购详情"})),y(ee,M({ref_key:"listLoadRef",ref:pe,class:"content"},{current:1,size:3,total:1},{istop:!1,refresh:!0,onLoadRefresh:_e,onScrolltolower:we,style:{height:v(Le)||v(g).primaryKey&&0==v(g).status?"calc(100vh - 88rpx - 160rpx)":"calc(100vh - 88rpx)",paddingBottom:v(Le)||v(g).primaryKey&&0==v(g).status?"120rpx":"env(safe-area-inset-bottom)"}}),{default:m((()=>[y(J,{ref_key:"detailRef",ref:u,item:v(se),isDetail:!0},null,8,["item"]),y(r,{class:"photo-box"},{default:m((()=>[y(r,{class:"title"},{default:m((()=>[_("照片资料")])),_:1}),y(r,{class:"photo-item"},{default:m((()=>[y(r,{onClick:l[0]||(l[0]=e=>Pe(0)),style:d(`background-image:url(${v(be)})`)},{default:m((()=>[y(A,{src:Q}),y(N,null,{default:m((()=>[_("车辆照片")])),_:1})])),_:1},8,["style"]),y(r,{onClick:l[1]||(l[1]=e=>Pe(1)),style:d(`background-image:url(${v(Ae)})`)},{default:m((()=>[y(A,{src:q}),y(N,null,{default:m((()=>[_("证件照片")])),_:1})])),_:1},8,["style"]),y(r,{onClick:l[2]||(l[2]=e=>Pe(2)),style:d(`background-image:url(${v(Ne)})`)},{default:m((()=>[y(A,{src:G}),y(N,null,{default:m((()=>[_("其他照片")])),_:1})])),_:1},8,["style"])])),_:1})])),_:1}),v(g).id?(o(),c(T,{key:0,list:v(ue),lineColor:"#4177ff",activeStyle:{color:"#20283D",fontSize:"32rpx"},inactiveStyle:{color:"#999",fontSize:"32rpx"},current:v(ge),onClick:Ie,scrollable:!1},null,8,["list","current"])):I("",!0),"detail"==v(ve)?(o(),c(r,{key:1,class:"details-info"},{default:m((()=>[y(r,{class:"section-title"},{default:m((()=>[_("采购信息")])),_:1}),y(r,{class:"item-box"},{default:m((()=>[y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("采购价")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).purchaseOrderPrice)+"万元",1)])),_:1})])),_:1}),"Deposit"==v(se).paymentMethod?(o(),c(r,{key:0},{default:m((()=>[y(N,null,{default:m((()=>[_("定金")])),_:1}),y(N,null,{default:m((()=>[_(h(("formatShowPrice"in a?a.formatShowPrice:v(e))(v(se).deposit,"元")),1)])),_:1})])),_:1})):I("",!0),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("付款方式")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).paymentMethodName),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("采购类型")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).purchaseTypeName),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("采购日期")])),_:1}),y(N,null,{default:m((()=>{var e;return[_(h((null==(e=v(se).purchaseOrderTime)?void 0:e.slice(0,16))||"-"),1)]})),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("评估师")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).pricingCreateUserName),1)])),_:1})])),_:1})])),_:1}),y(r,{class:"section-title"},{default:m((()=>[_("车辆信息")])),_:1}),y(r,{class:"item-box"},{default:m((()=>[y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("VIN码")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).vinNo),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("车牌号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).plateNo||"-"),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("发动机号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).carPricingInfo.engine||"-"),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("过户次数")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).transferTimeName||"-"),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("钥匙数量")])),_:1}),y(N,null,{default:m((()=>[_(h(v(te)(v(se).carPricingInfo.keyNum)?"-":`${v(se).carPricingInfo.keyNum}把`),1)])),_:1})])),_:1})])),_:1}),y(r,{class:"section-title"},{default:m((()=>[_("客户信息")])),_:1}),y(r,{class:"item-box"},{default:m((()=>[y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("客户类型")])),_:1}),y(N,null,{default:m((()=>[_(h("person"==v(se).customerAndContractInfo.customerType?"个人":"enterprise"==v(se).customerAndContractInfo.customerType?"企业":""),1)])),_:1})])),_:1}),"person"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:0},{default:m((()=>[y(N,null,{default:m((()=>[_("手机号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.customerMobile),1)])),_:1})])),_:1})):I("",!0),"person"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:1},{default:m((()=>[y(N,null,{default:m((()=>[_("姓名")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.customerName),1)])),_:1})])),_:1})):I("",!0),"person"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:2},{default:m((()=>[y(N,null,{default:m((()=>[_("身份证号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.idNumber),1)])),_:1})])),_:1})):I("",!0),"enterprise"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:3},{default:m((()=>[y(N,null,{default:m((()=>[_("企业名称")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.customerEnterpriseName),1)])),_:1})])),_:1})):I("",!0),"enterprise"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:4},{default:m((()=>[y(N,null,{default:m((()=>[_("手机号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.customerEnterpriseMobile),1)])),_:1})])),_:1})):I("",!0),"enterprise"==v(se).customerAndContractInfo.customerType?(o(),c(r,{key:5},{default:m((()=>[y(N,null,{default:m((()=>[_("税号")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.customerEnterpriseTaxNumber),1)])),_:1})])),_:1})):I("",!0),y(r,null,{default:m((()=>[y(N,{style:{width:"220rpx"}},{default:m((()=>[_("是否需要回传资料")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).backData?"是":"否"),1)])),_:1})])),_:1})])),_:1}),y(r,{class:"section-title"},{default:m((()=>[_("合同信息")])),_:1}),y(r,{class:"item-box"},{default:m((()=>[y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("签约方式")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.signMethodName),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("主体")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.enterpriseName||"-"),1)])),_:1})])),_:1}),"Offline"==v(se).customerAndContractInfo.signMethod?(o(),c(r,{key:0},{default:m((()=>{var e;return[y(N,null,{default:m((()=>[_("合同照片")])),_:1}),(null==(e=v(se).photos)?void 0:e.length)?(o(),c(r,{key:0,class:"img-list"},{default:m((()=>[(o(!0),p(C,null,f(v(se).photos,((e,l)=>(o(),c(A,{key:l,src:e.attachmentUrl,mode:"aspectFill",onClick:e=>("toViewImage"in a?a.toViewImage:v(t))(`/pages/guide/imageView?type=1&index=${l}`,v(se).photos)},null,8,["src","onClick"])))),128))])),_:1})):(o(),c(N,{key:1},{default:m((()=>[_("-")])),_:1}))]})),_:1})):(o(),c(r,{key:1},{default:m((()=>[y(N,null,{default:m((()=>[_("合同模板")])),_:1}),y(r,null,{default:m((()=>[_(h(v(se).customerAndContractInfo.templateName||"-")+" ",1),v(se).customerAndContractInfo.templateId?(o(),c(N,{key:0,class:"preview",onClick:l[3]||(l[3]=B((e=>("toPage"in a?a.toPage:v(P))(`/pages/carManage/pdf?url=${v(me)}`)),["stop"]))},{default:m((()=>[_("预览> ")])),_:1})):I("",!0),"noSign"==v(se).customerAndContractInfo.signStatus&&v(se).customerAndContractInfo.shortUrl?(o(),c(N,{key:1,class:"preview",onClick:l[4]||(l[4]=B((e=>{return a=v(se).customerAndContractInfo.shortUrl,void U({data:a,success:function(){F({title:"复制成功",icon:"success"})}});var a}),["stop"]))},{default:m((()=>[_("复制 ")])),_:1})):I("",!0)])),_:1})])),_:1}))])),_:1}),y(r,{class:"section-title"},{default:m((()=>[_("其他信息")])),_:1}),y(r,{class:"item-box"},{default:m((()=>[y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("备注")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).purchaseRemark||"-"),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("是否交车")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).carDelivery?"是":"否"),1)])),_:1})])),_:1}),v(se).carDelivery?I("",!0):(o(),c(r,{key:0},{default:m((()=>[y(N,null,{default:m((()=>[_("交车时间")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).carDeliveryTime),1)])),_:1})])),_:1})),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("创建人")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).pricingCreateUserName||"-"),1)])),_:1})])),_:1}),y(r,null,{default:m((()=>[y(N,null,{default:m((()=>[_("下单时间")])),_:1}),y(N,null,{default:m((()=>[_(h(v(se).purchaseCreateTime||"-"),1)])),_:1})])),_:1})])),_:1})])),_:1})):I("",!0),"record"==v(ve)?(o(),c(r,{key:2,class:"record-list"},{default:m((()=>[v(ne).length>0?(o(),c(le,{key:0,infoData:v(ne),pageType:"sell"},null,8,["infoData"])):(o(),c(A,{key:1,class:"no-contentBg",src:"./static/common/emptyBg.png",mode:"aspectFill"}))])),_:1})):I("",!0),"track"==v(ve)?(o(),c(r,{key:3,class:"tracks"},{default:m((()=>[v(re).length>0?(o(),c(w,{key:0,class:"steps",activeColor:"#4177ff",direction:"column",current:v(re).length-1,dot:""},{default:m((()=>[(o(!0),p(C,null,f(v(re),((e,a)=>(o(),c(D,{key:a,title:e.title},{desc:m((()=>[y(r,{class:"descs"},{default:m((()=>[y(r,{class:"d-title"},{default:m((()=>[_(h(e.approveTypeName),1)])),_:2},1024),e.nextApproveUser?(o(),c(r,{key:0},{default:m((()=>[_(h(e.nextApproveUser),1)])),_:2},1024)):I("",!0),y(r,null,{default:m((()=>[_(h(e.createTime)+" | "+h(e.createUserName),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1},8,["current"])):(o(),c(r,{key:1,class:"no-content"},{default:m((()=>[y(r,null,{default:m((()=>[_("暂无数据")])),_:1})])),_:1}))])),_:1})):I("",!0),v(Le)?(o(),c(r,{key:4,style:{height:"160rpx"}})):I("",!0)])),_:1},16,["style"]),v(g).primaryKey&&0==v(g).status?(o(),c(r,{key:1,class:"bottom"},{default:m((()=>[y(L,{onClick:l[5]||(l[5]=e=>v(ie).open()),class:"refuse-btn"},{default:m((()=>[_("拒绝")])),_:1}),y(L,{class:"save-btn",onClick:l[6]||(l[6]=e=>Te(1))},{default:m((()=>[_("同意")])),_:1})])),_:1})):I("",!0),v(Le)?(o(),c(r,{key:2,class:"bottom-btn"},{default:m((()=>[!v(se).canPayment||"waitPayment"!=v(g).status&&"duringPayment"!=v(g).status?I("",!0):(o(),c(r,{key:0,onClick:fe},{default:m((()=>[y(A,{src:"./static/carManage/shangjia.png"}),y(r,null,{default:m((()=>[_("申请付款")])),_:1})])),_:1})),"cancel"!=v(g).status?(o(),c(r,{key:1,onClick:De},{default:m((()=>[y(A,{src:"./static/carManage/xiugai.png"}),y(r,null,{default:m((()=>[_("修改采购价")])),_:1})])),_:1})):I("",!0),v(se).canCancel?(o(),c(r,{key:2,onClick:l[7]||(l[7]=e=>v(oe).open())},{default:m((()=>[y(A,{src:"./static/carManage/chushou.png"}),y(r,null,{default:m((()=>[_("取消")])),_:1})])),_:1})):I("",!0)])),_:1})):I("",!0),y(Z,{ref_key:"cancelRef",ref:oe,title:"取消原因",onConfirm:Ce},null,512),y(Z,{ref_key:"refuseRef",ref:ie,title:"拒绝原因",onConfirm:l[8]||(l[8]=e=>Te(0,e))},null,512)])),_:1})}}}),[["__scopeId","data-v-f20fbbad"]]);export{re as default};
