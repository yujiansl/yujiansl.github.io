import{d as e,r as l,a9 as a,B as t,C as u,au as d,D as s,E as o,X as r,Y as n,c as i,w as c,i as m,I as f,M as p,K as h,bI as _,at as y,o as V,a as b,g as k,y as U,u as g,Q as v,h as x,n as P,t as D,S as N,R as w,aj as T,W as C,s as I,ar as M,a1 as S,_ as Y}from"./index-CK4DGatK.js";import{u as z}from"./useQuery.3dd8K18V.js";const O=Y(e({__name:"replenishInfo",setup(e){const Y="其他塑料件不保证是否喷漆，乙方已现场确认全车车况、内饰、外观、配置无异议，并自愿购买。",O="乙方承担过户费500元，并在店内购买第一年商业险",J={min:(new Date).getTime()-2592e6,max:(new Date).getTime()},j=z(),A=l(!1),L=a({thirdUser:null,thirdUserId:null,thirdName:null,thirdIdNumber:null,thirdMobile:null,thirdMobileAddress:null,balancePayDate:null,balancePayTime:null,payDate:null,coverCharge:null,otherPrice:null,changeDate:null,bearParty:null,cost1:!1,cost2:!1,cost3:!1,cost4:!1,cost5:!1,cost6:!1,keyNumType:null,insuranceSituation:null,defect:null,special:"无",supplement:null,name:null}),Q=a({balancePayTime:(new Date).getTime()}),$=l("");t((()=>{if(u({scrollTop:0,duration:0}),console.log(j.value.params),Object.assign(L,JSON.parse(j.value.params||"{}")),!L.balancePayTime){const e=d();L.balancePayTime=e.format("YYYY-MM-DD")}console.log(JSON.parse(j.value.params),999),$.value=j.value.type;const e=new s;e.showLoading("加载中..."),R().finally((()=>{e.hideLoading()}))}));const B=e=>{Q.balancePayTime=e.value,I((()=>{L.balancePayTime=d(e.value).format("YYYY-MM-DD"),A.value=!1}))};o((()=>{r("customerData"),n("customerData",(e=>{const{name:l,realPhone:a,id:t,idNumber:u}=e;L.thirdUser=a,L.thirdName=l,L.thirdMobile=a,L.thirdUserId=t,L.thirdIdNumber=u}))}));const E=()=>{L.thirdUser="",L.thirdUserId="",L.thirdName="",L.thirdMobile="",L.thirdIdNumber=""},K=()=>{const e=((e=!0)=>{const{thirdUser:l,thirdUserId:a,thirdName:t,thirdIdNumber:u,thirdMobile:d,thirdMobileAddress:s,balancePayDate:o,balancePayTime:r,payDate:n,coverCharge:i,otherPrice:c,changeDate:m,bearParty:f,keyNumType:p,insuranceSituation:h,defect:_,special:y,supplement:V,name:b}=L;if("4"==$.value){if(!l)return"请选择出售方用户";if(!a)return"请选择出售方用户";if(!t)return"请输入出售方名称";if(!u)return"请输入出售方身份证号码";if(!d)return"请输入出售方手机号";if(!s)return"请输入出售方地址";if(!o)return"请输入余款天数";if(!r)return"请输入余款时间";if(!n)return"请输入支付给公司方天数";if(!i)return"请输入服务费";if(!c)return"请输入其他费用相关金额";if(!m)return"请输入过户天数";if(!f)return"请输入承担方";if(!_)return"请输入车辆瑕疵";if(!p)return"请输入钥匙类型"}else if("5"==$.value){if(!o)return"请输入余款天数";if(!r)return"请输入余款时间";if(!c)return"请输入其他费用相关金额";if(!_)return"请输入车辆瑕疵";if(!b)return"请输入车主名称"}else if(["2","3","6","7"].includes($.value)){if(!r)return"请输入余款时间";if(!f)return"请输入承担方"}return""})();if(e)return void(new s).showToast(e);const l=JSON.parse(JSON.stringify(L||{}));l.keyNumType&&(l.keyNumType=Number(l.keyNumType)),M("saveContract",l),S()},R=async()=>{if("5"!=$.value)return;const{carProductId:e}=JSON.parse(j.value.params||"{}");if(!e)return;let l=null;try{l=(await uni.$u.http.get("/product/merchant/car/product/detail",{params:{productId:e}})).data.carCommentIn}catch(a){}L.supplement=L.supplement||"无",L.defect=L.defect||((null==l?void 0:l.includes("金属面原车漆"))?l:Y),L.otherPrice=L.otherPrice||O,L.special=L.special||"无"};return(e,l)=>{const a=m,t=x,u=f(h("up-icon"),p),d=w,s=T,o=f(h("up-switch"),_),r=C,n=f(h("u-datetime-picker"),y);return V(),i(a,{class:"page pend-page f-c-s"},{default:c((()=>[b(a,{class:"content"},{default:c((()=>[b(a,{class:"section-title"},{default:c((()=>[k("补充信息")])),_:1}),b(a,{class:"form-box write"},{default:c((()=>[["4"].includes(g($))?(V(),i(a,{key:0,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("出售方用户")])),_:1}),b(a,{class:"f-b-c",onClick:l[0]||(l[0]=l=>("toPage"in e?e.toPage:g(v))(`/pages/carManage/customerList?id=${g(L).thirdUserId}`))},{default:c((()=>[b(t,{class:P({placeholder:!g(L).thirdUser})},{default:c((()=>[k(D(g(L).thirdUser||"请选择"),1)])),_:1},8,["class"]),b(a,{class:"has-close"},{default:c((()=>[b(t,{class:"close",onClick:N(E,["stop"])},{default:c((()=>[g(L).thirdUser?(V(),i(u,{key:0,name:"close-circle-fill",color:"#999"})):U("",!0)])),_:1}),b(u,{name:"arrow-right"})])),_:1})])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:1,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("出售方手机号")])),_:1}),b(d,{modelValue:g(L).thirdMobile,"onUpdate:modelValue":l[1]||(l[1]=e=>g(L).thirdMobile=e),type:"number",placeholder:"请输入",readonly:"",maxlength:"11"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:2,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("出售方名称")])),_:1}),b(d,{modelValue:g(L).thirdName,"onUpdate:modelValue":l[2]||(l[2]=e=>g(L).thirdName=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:3,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("出售方身份证号码")])),_:1}),b(d,{modelValue:g(L).thirdIdNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>g(L).thirdIdNumber=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:4,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("出售方地址")])),_:1}),b(d,{modelValue:g(L).thirdMobileAddress,"onUpdate:modelValue":l[4]||(l[4]=e=>g(L).thirdMobileAddress=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4","5"].includes(g($))?(V(),i(a,{key:5,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("余款天数")])),_:1}),b(d,{modelValue:g(L).balancePayDate,"onUpdate:modelValue":l[5]||(l[5]=e=>g(L).balancePayDate=e),placeholder:"请输入"},null,8,["modelValue"]),k(" 天 ")])),_:1})):U("",!0),["2","3","4","5","6","7"].includes(g($))?(V(),i(a,{key:6,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("余款时间")])),_:1}),b(a,{class:"f-b-c",onClick:l[6]||(l[6]=e=>A.value=!0)},{default:c((()=>[b(t,null,{default:c((()=>[k(D(g(L).balancePayTime),1)])),_:1}),b(u,{name:"arrow-right"})])),_:1})])),_:1})):U("",!0),["5"].includes(g($))?(V(),i(a,{key:7,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("车主名称")])),_:1}),b(d,{modelValue:g(L).name,"onUpdate:modelValue":l[7]||(l[7]=e=>g(L).name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4","5"].includes(g($))?(V(),i(a,{key:8},{default:c((()=>[b(a,{class:"form-textarea"},{default:c((()=>[b(a,{class:"area-title"},{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("其他费用相关金额")])),_:1}),b(s,{class:"textarea-box",modelValue:g(L).otherPrice,"onUpdate:modelValue":l[8]||(l[8]=e=>g(L).otherPrice=e),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),b(a,{class:"form-textarea"},{default:c((()=>[b(a,{class:"area-title"},{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("车辆瑕疵")])),_:1}),b(s,{class:"textarea-box",modelValue:g(L).defect,"onUpdate:modelValue":l[9]||(l[9]=e=>g(L).defect=e),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"])])),_:1}),["4","5"].includes(g($))?(V(),i(a,{key:9},{default:c((()=>[b(a,{class:"form-textarea"},{default:c((()=>[b(a,{class:"area-title"},{default:c((()=>[k("特别情况说明")])),_:1}),b(s,{maxlength:"1000",class:"textarea-box",modelValue:g(L).special,"onUpdate:modelValue":l[10]||(l[10]=e=>g(L).special=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:10,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("支付给公司方天数")])),_:1}),b(d,{modelValue:g(L).payDate,"onUpdate:modelValue":l[11]||(l[11]=e=>g(L).payDate=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:11,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("服务费")])),_:1}),b(d,{modelValue:g(L).coverCharge,"onUpdate:modelValue":l[12]||(l[12]=e=>g(L).coverCharge=e),placeholder:"请输入"},null,8,["modelValue"]),k(" 元 ")])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:12,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("过户天数")])),_:1}),b(d,{modelValue:g(L).changeDate,"onUpdate:modelValue":l[13]||(l[13]=e=>g(L).changeDate=e),placeholder:"请输入"},null,8,["modelValue"]),k(" 天 ")])),_:1})):U("",!0),["2","3","4","6","7"].includes(g($))?(V(),i(a,{key:13,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("承担方")])),_:1}),b(d,{modelValue:g(L).bearParty,"onUpdate:modelValue":l[14]||(l[14]=e=>g(L).bearParty=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:14,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("过户费")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost1,"onUpdate:modelValue":l[15]||(l[15]=e=>g(L).cost1=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:15,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("提档费")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost2,"onUpdate:modelValue":l[16]||(l[16]=e=>g(L).cost2=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:16,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("提档税费")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost3,"onUpdate:modelValue":l[17]||(l[17]=e=>g(L).cost3=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:17,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("交通费")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost4,"onUpdate:modelValue":l[18]||(l[18]=e=>g(L).cost4=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:18,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("代理费")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost5,"onUpdate:modelValue":l[19]||(l[19]=e=>g(L).cost5=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:19,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("其他费用")])),_:1}),b(a,{style:{width:"180rpx"}},{default:c((()=>[b(o,{activeColor:"#ff5719",size:"16",modelValue:g(L).cost6,"onUpdate:modelValue":l[20]||(l[20]=e=>g(L).cost6=e)},null,8,["modelValue"])])),_:1})])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:20,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[b(t,null,{default:c((()=>[k("*")])),_:1}),k("钥匙数量")])),_:1}),b(d,{modelValue:g(L).keyNumType,"onUpdate:modelValue":l[21]||(l[21]=e=>g(L).keyNumType=e),type:"number",placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),["4"].includes(g($))?(V(),i(a,{key:21,class:"form-item"},{default:c((()=>[b(a,null,{default:c((()=>[k("保险情况")])),_:1}),b(d,{modelValue:g(L).insuranceSituation,"onUpdate:modelValue":l[22]||(l[22]=e=>g(L).insuranceSituation=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):U("",!0),b(a,{class:"form-textarea"},{default:c((()=>[b(a,{class:"area-title"},{default:c((()=>[k("其他约定")])),_:1}),b(s,{class:"textarea-box",modelValue:g(L).supplement,"onUpdate:modelValue":l[23]||(l[23]=e=>g(L).supplement=e),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),b(a,{class:"bottom-btn"},{default:c((()=>[b(r,{class:"save-btn w_100",onClick:K},{default:c((()=>[k("保存")])),_:1})])),_:1}),b(n,{show:g(A),modelValue:g(Q).balancePayTime,"onUpdate:modelValue":l[24]||(l[24]=e=>g(Q).balancePayTime=e),title:"余款时间",mode:"date",minDate:J.min,maxDate:J.max,confirmColor:"#ff5719",onCancel:l[25]||(l[25]=e=>A.value=!1),onConfirm:B},null,8,["show","modelValue","minDate","maxDate"])])),_:1})}}}),[["__scopeId","data-v-7492e91e"]]);export{O as default};
