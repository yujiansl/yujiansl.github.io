import{d as e,r as a,a9 as s,q as t,v as r,I as l,M as o,K as i,c as u,o as c,w as d,a as n,y as p,i as f,b as m,e as v,n as h,u as _,g as k,t as y,F as b,Q as g,s as j,_ as C,B as L,E as I,X as D,Y as R,D as S,$ as w,a2 as x,ad as B}from"./index-CK4DGatK.js";import{U as E,a as U}from"./u-dropdown-item.B66HFyYv.js";import{B as z}from"./brandDrop.WDU7kvw8.js";import{L as A}from"./ListLoadRefreshView.CnNC2lkG.js";import{D as F}from"./listItem.Dt6aurFb.js";import{o as K}from"./omit.DzeQdT5l.js";import"./index.HDA2F_3Q.js";import"./time._VqwKl0d.js";import"./car_default.CyENNAub.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const M=C(e({__name:"filter",props:{status:{type:Number,default:0},reChecker:{type:Number,default:null}},emits:["search"],setup(e,{expose:C,emit:L}){const I=L,D=e,R=a(),S=a(),w=s({order:"desc",carBrandId:"",carSeriesId:""}),x=a([{label:"入库时间降序",id:"desc"},{label:"入库时间升序",id:"asc"}]);t((()=>{R.value.highlight(0,w.order)}));const B=e=>{1==e&&S.value.open()},A=()=>{var e;null==(e=R.value)||e.close()},F=()=>{I("search",w),A()};r((()=>D.reChecker),(e=>{j((()=>{var a;null==(a=R.value)||a.highlight(2,e)}))}),{deep:!0});const K=(e,a)=>{w.carBrandId=e,w.carSeriesId=a,R.value.highlight(1,a||e),F()},M=()=>{A(),g(`/pages/carManage/sellUserList?title=${1==D.status?"复检员":"评估师"}&id=${D.reChecker}&isFilter=1`)};return C({close:A}),(a,s)=>{const t=f,r=l(i("up-icon"),o);return c(),u(E,{ref_key:"uDropdownRef",ref:R,class:"drop",borderRadius:"20rpx",onCheckUserList:M,onOpen:B},{default:d((()=>[n(U,{title:"排序"},{default:d((()=>[n(t,{class:"item-list"},{default:d((()=>[(c(!0),m(b,null,v(_(x),((e,a)=>(c(),u(t,{key:a,class:h({active:_(w).order==e.id}),onClick:a=>((e,a,s)=>{R.value.highlight(s,a.id),w[e]=a.id,F()})("order",e,0)},{default:d((()=>[n(t,null,{default:d((()=>[k(y(e.label),1)])),_:2},1024),_(w).order==e.id?(c(),u(r,{key:0,name:"checkbox-mark",color:"#ff5719",size:"20"})):p("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),n(U,{title:"品牌"},{default:d((()=>[n(z,{ref_key:"brandDropRef",ref:S,onSearch:K,pBrand:_(w).carBrandId,pSeries:_(w).carSeriesId},null,8,["pBrand","pSeries"])])),_:1}),0===e.status?(c(),u(U,{key:0,title:"评估师",disabledDefault:!0})):p("",!0),1===e.status?(c(),u(U,{key:1,title:"复检员",disabledDefault:!0})):p("",!0)])),_:1},512)}}}),[["__scopeId","data-v-4ae07184"]]),O=C(e({__name:"recheckList",setup(e){const s=a([{name:"待复检",value:0},{name:"已复检",value:1}]),t=a(),r=a([]),l=a(),o=a({current:1,size:5,total:0,processApproval:"RECHECK",status:0,order:"desc"});L((e=>{o.value.status=e.type,i()})),I((()=>{D("sellData"),R("sellData",(e=>{E({reChecker:e.id})})),D("refreshList"),R("refreshList",(()=>{g()}))}));const i=async()=>{var e;(new S).showLoading("加载中");try{const e={...K(o.value,"total")},a=await w().get("product/process/pageList",{params:e});o.value.total=a.data.count;const s=a.data.results;r.value=1===o.value.current?s:[...r.value,...s]}finally{1==o.value.current&&l.value.initTop(),null==(e=l.value)||e.loadFinish(),x()}},g=()=>{o.value.current=1,i()},C=()=>{o.value.current++,i()},E=e=>{Object.assign(o.value,e),o.value.current=1,i()};return(e,a)=>{const L=f;return c(),u(L,{class:"page f-c-s"},{default:d((()=>[n(L,{class:"tabs"},{default:d((()=>[(c(!0),m(b,null,v(_(s),((e,a)=>(c(),u(L,{key:a,class:h({active:e.value==_(o).status}),onClick:a=>{var s;(s=e.value)!=o.value.status&&(o.value={current:1,size:5,total:0,processApproval:"RECHECK",status:0,order:"desc"},o.value.status="",j((()=>{o.value.status=s,i()})))}},{default:d((()=>[k(y(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),""!==_(o).status?(c(),u(M,{key:0,ref_key:"filterRef",ref:t,status:_(o).status,reChecker:_(o).reChecker,onSearch:E},null,8,["status","reChecker"])):p("",!0),n(L,{class:"total"},{default:d((()=>[k("共 "+y(_(o).total)+" 个",1)])),_:1}),n(A,B({ref_key:"listLoadRef",ref:l,class:"scroll-view-box"},_(o),{istop:!1,onLoadMore:C,onLoadRefresh:g}),{"list-cont":d((()=>[(c(!0),m(b,null,v(_(r),((e,a)=>(c(),u(F,{key:a,item:e},null,8,["item"])))),128))])),_:1},16)])),_:1})}}}),[["__scopeId","data-v-8902d846"]]);export{O as default};
