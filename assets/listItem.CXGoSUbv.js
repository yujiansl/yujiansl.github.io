import{d as e,v as l,r as a,I as t,M as s,K as i,b as u,o as n,a as r,a5 as o,w as c,i as d,g as m,F as v,e as f,c as _,n as p,u as y,t as g,y as B,R as b,Q as h,_ as k,a9 as S,q as C,x as j}from"./index-CK4DGatK.js";import{U as I,a as N}from"./u-dropdown-item.B66HFyYv.js";import{B as D}from"./brandDrop.WDU7kvw8.js";import{c as T,a as w,p as O,d as x,e as M}from"./state.B0y7zlHh.js";import{g as R}from"./time._VqwKl0d.js";const U=k(e({__name:"allDrop",props:{obj:{type:Object,default:()=>{}},sellData:{type:Object,default:()=>{}}},emits:["search"],setup(e,{emit:k}){const S=k,C=e;l((()=>C.obj),(e=>{j.value=e}),{deep:!0}),l((()=>C.sellData),(e=>{const{name:l,id:a}=e;j.value.createByName=l,j.value.createBy=a}),{deep:!0});const j=a({carCondition:null,createByName:"",createBy:""}),I=()=>{for(const e in j.value)j.value[e]="";S("search",j.value,!1,"clear")},N=()=>{const e=Object.values(j.value).every((e=>[null,void 0,""].includes(e)));S("search",j.value,!e)};return(e,l)=>{const a=d,k=b,S=t(i("up-icon"),s),C=o;return n(),u(v,null,[r(C,{class:"u-menu-wrap","scroll-y":""},{default:c((()=>[r(a,{class:"models"},{default:c((()=>[r(a,{class:"sub-title"},{default:c((()=>[m("车况")])),_:1}),r(a,{class:"sub-content"},{default:c((()=>[(n(!0),u(v,null,f(y(T),(e=>(n(),_(a,{onClick:l=>((e,l)=>{j.value[e]=j.value[e]==l.value?"":l.value})("carCondition",e),class:p({active:y(j).carCondition==e.value}),key:e.label},{default:c((()=>[m(g(e.label),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),r(a,{class:"models"},{default:c((()=>[r(a,{class:"sub-title"},{default:c((()=>[m("求购人")])),_:1}),r(k,{modelValue:y(j).createByName,"onUpdate:modelValue":l[0]||(l[0]=e=>y(j).createByName=e),placeholder:"请选择",onClick:l[1]||(l[1]=l=>("toPage"in e?e.toPage:y(h))(`/pages/carManage/sellUserList?title=求购人&id=${y(j).createBy}`))},null,8,["modelValue"]),y(j).createByName?(n(),_(S,{key:0,name:"close-circle",size:"20",class:"close",onClick:l[2]||(l[2]=()=>{y(j).createByName="",y(j).createBy=""})})):B("",!0)])),_:1})])),_:1}),r(a,{class:"brand-btn"},{default:c((()=>[r(a,{class:"clear",onClick:I},{default:c((()=>[m("重置")])),_:1}),r(a,{class:"sure",onClick:N},{default:c((()=>[m("查询")])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-b5dba4ac"]]),V=k(e({__name:"filter",props:{sellData:{type:Object,default:()=>{}}},emits:["search"],setup(e,{expose:l,emit:o}){const b=o,h=a(),k=a(),j=S({sort:1,carBrandId:"",carSeriesId:"",mileage:[],createBy:"",createByName:"",carCondition:null}),T=[{label:"最近创建",id:1},{label:"最近修改",id:2}];C((()=>{h.value.highlight(0,j.sort)}));const O=e=>{1==e&&k.value.open()},x=()=>{var e;null==(e=h.value)||e.close()},M=()=>{b("search",j),x()},R=(e,l)=>{j.carBrandId=e,j.carSeriesId=l,h.value.highlight(1,l||e),M()},V=(e,l,a)=>{Object.assign(j,e),h.value.highlight(3,l),"clear"==a&&(h.value.highlight(3,""),j.createBy="",j.createByName="",j.carCondition=null),M()},z=()=>{h.value.highlight(2,j.mileage.length),M()};return l({close:x}),(l,a)=>{const o=d,b=t(i("up-icon"),s);return n(),_(I,{ref_key:"uDropdownRef",ref:h,class:"drop",borderRadius:"20rpx",onOpen:O},{default:c((()=>[r(N,{title:"排序"},{default:c((()=>[r(o,{class:"item-list"},{default:c((()=>[(n(),u(v,null,f(T,((e,l)=>r(o,{key:l,class:p({active:y(j).sort==e.id}),onClick:l=>((e,l,a)=>{h.value.highlight(a,l.id),j[e]=l.id,M()})("sort",e,0)},{default:c((()=>[r(o,null,{default:c((()=>[m(g(e.label),1)])),_:2},1024),y(j).sort==e.id?(n(),_(b,{key:0,name:"checkbox-mark",color:"#ff5719",size:"20"})):B("",!0)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1}),r(N,{title:"车型"},{default:c((()=>[r(D,{ref_key:"brandDropRef",ref:k,isModelAll:!0,onSearch:R,pBrand:y(j).carBrandId,pSeries:y(j).carSeriesId},null,8,["pBrand","pSeries"])])),_:1}),r(N,{title:"里程"},{default:c((()=>[r(o,{class:"price-list"},{default:c((()=>[r(o,{class:"price-item"},{default:c((()=>[(n(!0),u(v,null,f(y(w),((e,l)=>(n(),_(o,{key:l,onClick:l=>((e,l,a)=>{if(j[e].includes(l[a])){const t=j[e].filter((e=>e!=l[a]));j[e]=t}else j[e].push(l[a])})("mileage",e,"value"),class:p({active:y(j).mileage.includes(e.value)})},{default:c((()=>[m(g(e.label),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),r(o,{onClick:z,class:"btns"},{default:c((()=>[m("确认")])),_:1})])),_:1})])),_:1}),r(N,{title:"筛选"},{default:c((()=>[r(U,{onSearch:V,obj:{createBy:y(j).createBy,createByName:y(j).createByName,carCondition:y(j).carCondition},sellData:e.sellData},null,8,["obj","sellData"])])),_:1})])),_:1},512)}}}),[["__scopeId","data-v-310c90ce"]]),z=k(e({__name:"listItem",props:{item:{default:{}}},setup(e){const l=e,a=j((()=>1===l.item.status?"yellow":2===l.item.status?"green":3===l.item.status?"color8f9":"yellow"));return(e,t)=>{const s=d;return n(),_(s,{class:"list-item"},{default:c((()=>{var t,i;return[r(s,{class:"one-item"},{default:c((()=>[3===(null==l?void 0:l.item.status)?(n(),_(s,{key:0},{default:c((()=>{var a;return[m(" 取消时间："+g(("getTimeBySplitSecond"in e?e.getTimeBySplitSecond:y(R))(null==(a=null==l?void 0:l.item)?void 0:a.updateTime)),1)]})),_:1})):(n(),_(s,{key:1},{default:c((()=>{var a;return[m("创建时间："+g(("getTimeBySplitSecond"in e?e.getTimeBySplitSecond:y(R))(null==(a=null==l?void 0:l.item)?void 0:a.createTime)),1)]})),_:1})),r(s,null,{default:c((()=>{var e;return[m("求购人："+g(null==(e=null==l?void 0:l.item)?void 0:e.createByName),1)]})),_:1})])),_:1}),r(s,{class:"two-item"},{default:c((()=>[r(s,{class:"model-name one-line"},{default:c((()=>{var e;return[m(g(null==(e=null==l?void 0:l.item)?void 0:e.carBrand),1)]})),_:1}),r(s,{class:p([y(a)])},{default:c((()=>{var e;return[m(g(y(O)[+(null==(e=null==l?void 0:l.item)?void 0:e.status)]),1)]})),_:1},8,["class"])])),_:1}),r(s,{class:"third-item"},{default:c((()=>[r(s,null,{default:c((()=>[r(s,{class:"item-label"},{default:c((()=>[m("求购车型")])),_:1}),r(s,{class:"item-value"},{default:c((()=>{var e;return[m(g(null==(e=null==l?void 0:l.item)?void 0:e.carModel),1)]})),_:1})])),_:1}),r(s,null,{default:c((()=>[r(s,{class:"item-label"},{default:c((()=>[m("里程车况")])),_:1}),r(s,{class:"item-value tags"},{default:c((()=>{var e,a;return[null!==(null==(e=null==l?void 0:l.item)?void 0:e.mileage)?(n(),_(s,{key:0},{default:c((()=>{var e;return[m(g(y(x)[+(null==(e=null==l?void 0:l.item)?void 0:e.mileage)]),1)]})),_:1})):B("",!0),null!==(null==(a=null==l?void 0:l.item)?void 0:a.carCondition)?(n(),_(s,{key:1},{default:c((()=>{var e;return[m(g(y(M)[+(null==(e=null==l?void 0:l.item)?void 0:e.carCondition)]),1)]})),_:1})):B("",!0)]})),_:1})])),_:1})])),_:1}),(null==(t=null==l?void 0:l.item)?void 0:t.notes)?(n(),_(s,{key:0,class:"color8f9 one-line pt-20"},{default:c((()=>{var e;return[m(g(null==(e=l.item)?void 0:e.notes),1)]})),_:1})):B("",!0),2===(null==(i=null==l?void 0:l.item)?void 0:i.status)?(n(),_(s,{key:1,class:"fourth-item"},{default:c((()=>[r(s,null,{default:c((()=>{var e;return[m("采购员："+g((null==(e=null==l?void 0:l.item)?void 0:e.procurementOfficer)??"--"),1)]})),_:1}),r(s,{class:"line"}),r(s,null,{default:c((()=>{var a;return[m("采购时间："+g(("getTimeBySplitSecond"in e?e.getTimeBySplitSecond:y(R))(null==(a=null==l?void 0:l.item)?void 0:a.procurementTime)),1)]})),_:1})])),_:1})):B("",!0)]})),_:1})}}}),[["__scopeId","data-v-5d9cba69"]]);export{z as L,V as S};
