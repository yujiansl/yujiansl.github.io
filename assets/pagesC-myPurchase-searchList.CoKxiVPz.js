import{d as a,r as s,a9 as t,B as e,E as l,X as r,Y as o,Z as i,$ as u,a2 as n,c,w as f,i as d,I as m,M as p,K as _,b8 as v,o as y,a as b,u as j,b as k,F as h,e as g,n as L,y as x,g as C,t as D,Q as w,ad as R,O as S,T as P,_ as z}from"./index-CK4DGatK.js";import{N as F}from"./NavBar.DSs5OGCU.js";import{U as I,a as N}from"./u-dropdown-item.B66HFyYv.js";import{S as O,L as T}from"./listItem.CXGoSUbv.js";import{L as U}from"./ListLoadRefreshView.CnNC2lkG.js";import{m as B,b as M}from"./state.B0y7zlHh.js";import{o as Q}from"./omit.DzeQdT5l.js";import"./brandDrop.WDU7kvw8.js";import"./time._VqwKl0d.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const V=z(a({__name:"searchList",setup(a){const z=s(),V=s(),Y=s([]),Z=s(),$=t({current:1,size:10,total:0,status:"",sort:1}),A=s({});async function E(){var a,s;i({title:"加载中",mask:!0});try{const a={...Q($,"total"),status:$.status?$.status:null},s=await u().post(B.conditionalSearch,a);$.total=+s.data.count;const t=s.data.results;Y.value=1===$.current?t:[...Y.value,...t]}finally{1==$.current&&(null==(a=Z.value)||a.initTop()),null==(s=Z.value)||s.loadFinish(),n()}}e((a=>{$.status=a.type?Number(a.type):""})),l((()=>{r("sellData"),o("sellData",(a=>{A.value=a})),r("refreshList"),o("refreshList",(()=>{G()})),E()}));const G=()=>{$.current=1,E()},K=()=>{$.current++,E()},X=a=>{Object.assign($,a),$.current=1,E()};return(a,s)=>{const t=m(_("up-icon"),p),e=d,l=m(_("u-empty"),v);return y(),c(e,{class:"page f-c-s"},{default:f((()=>[b(F,null,{left:f((()=>[b(e,{class:"nav-left",onClick:s[0]||(s[0]=s=>("toPage"in a?a.toPage:j(w))("/pagesC/myPurchase/index"))},{default:f((()=>[b(t,{name:"arrow-left",size:"18",color:"#000",bold:""})])),_:1})])),title:f((()=>[b(e,{class:"head-drop f-r-a f-r-c"},{default:f((()=>[b(I,{ref_key:"uDropdownRef",ref:z,class:"drop",borderRadius:"20rpx"},{default:f((()=>[b(N,{title:j(M).filter((a=>a.val===j($).status))[0].label},{default:f((()=>[b(e,{class:"item-list"},{default:f((()=>[(y(!0),k(h,null,g(j(M),((a,s)=>(y(),c(e,{key:s,class:L({active:j($).status===a.val}),onClick:s=>{return t=a,$.status=t.val,z.value.close(),null==(e=V.value)||e.close(),$.current=1,void E();var t,e}},{default:f((()=>[b(e,null,{default:f((()=>[C(D(a.label),1)])),_:2},1024),j($).status===a.val?(y(),c(t,{key:0,name:"checkbox-mark",color:"#DD4F33",size:"20"})):x("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["title"])])),_:1},512)])),_:1})])),_:1}),b(O,{ref_key:"filterRef",ref:V,onSearch:X,sellData:j(A)},null,8,["sellData"]),b(e,{class:"total"},{default:f((()=>[C(" 共找到"+D(j($).total)+"个 ",1)])),_:1}),j($).total?(y(),c(U,R({key:0,ref_key:"listLoadRef",ref:Z,class:"scroll-view-box"},j($),{istop:!1,onLoadMore:K,onLoadRefresh:G}),{default:f((()=>[S(b(e,{class:"list-box"},{default:f((()=>[(y(!0),k(h,null,g(j(Y),((a,s)=>(y(),c(T,{key:s,item:a,onClick:s=>(a=>{w(`/pagesC/myPurchase/details?id=${a.id}`)})(a)},null,8,["item","onClick"])))),128))])),_:1},512),[[P,j(Y).length]])])),_:1},16)):(y(),c(l,{key:1,mode:"list",text:"暂无数据"}))])),_:1})}}}),[["__scopeId","data-v-a4189cb7"]]);export{V as default};
