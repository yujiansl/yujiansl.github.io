import{d as e,x as a,r as l,au as t,v as o,I as i,ac as s,K as u,at as m,b as n,o as d,a as r,u as v,w as f,k as c,t as p,F as b,e as y,n as T,z as k,a0 as Y,_ as C}from"./index-CK4DGatK.js";const O=C(e({__name:"RecentlyFollowUpTimePicker",props:{visible:{type:Boolean},title:{},modelValue:{},format:{default:"YYYY-MM-DD HH:mm"}},emits:["update:visible","update:modelValue"],setup(e,{emit:C}){const O=e,w=C,h=a({get:()=>O.visible,set:e=>w("update:visible",e)}),x=a({get:()=>O.modelValue,set:e=>w("update:modelValue",e)}),M=l(),V=l({...x.value}),D=a({get:()=>V.value.startTime?t(V.value.startTime,O.format).valueOf():null,set:()=>{}}),_=a({get:()=>V.value.endTime?t(V.value.endTime,O.format).valueOf():null,set:()=>{}}),g=a((()=>V.value.startTime?t(V.value.startTime).format(O.format):"")),R=a((()=>V.value.endTime?t(V.value.endTime).format(O.format):"")),U=l(),F=l(!1),H=l(!1),I=[{label:"今天",value:0},{label:"昨天",value:-1},{label:"最近3天",value:-3},{label:"最近7天",value:-7}];function $(){h.value=!1}function j(){const e=V.value.startTime,a=V.value.endTime;if(e&&a){if(t(e).valueOf()>t(a).valueOf())return void Y({title:"开始时间不能大于结束时间",icon:"none"});x.value={startTime:t(e).format(O.format),endTime:t(a).format(O.format)}}h.value=!1}const z=new Map([["year","年"],["month","月"],["day","日"]]),B=new Map([["year","年"],["month","月"],["day","日"],["hour","时"],["minute","分"]]),K="YYYY-MM-DD"===O.format?z:B;function P(e,a){return`${a}${K.get(e)}`}function q(){F.value=!1}function A(){H.value=!1}function E({value:e}){V.value.endTime&&e>t(V.value.endTime).valueOf()?Y({title:"应该小于结束时间",icon:"none"}):(V.value.startTime=e,F.value=!1)}function G({value:e}){V.value.startTime&&e<t(V.value.startTime).valueOf()?Y({title:"应该大于开始时间",icon:"none"}):(V.value.endTime=e,H.value=!1)}return o(h,(e=>{e&&(V.value={...x.value})})),(e,a)=>{const l=i(u("up-popup"),s),o=i(u("up-datetime-picker"),m);return d(),n("div",{class:"next-follow-up-time-picker"},[r(l,{title:e.title,show:v(h),onClose:a[4]||(a[4]=e=>h.value=!1)},{default:f((()=>[c("div",{class:"header"},[c("div",{class:"cancel-btn",onClick:$},"取消"),c("div",{class:"title"},p(e.title),1),c("div",{class:"confirm-btn",onClick:j},"确定")]),c("div",{class:"body"},[c("div",{class:"form-box"},[c("div",{class:"form-item"},[c("div",{class:"label"},"开始时间"),c("div",{class:"value"},[v(g)?(d(),n("div",{key:0,class:"time-box",onClick:a[0]||(a[0]=e=>F.value=!0)},p(v(g)),1)):(d(),n("div",{key:1,class:"time-box gray",onClick:a[1]||(a[1]=e=>F.value=!0)},"请选择"))])]),c("div",{class:"form-item"},[c("div",{class:"label"},"结束时间"),c("div",{class:"value"},[v(R)?(d(),n("div",{key:0,class:"time-box",onClick:a[2]||(a[2]=e=>H.value=!0)},p(v(R)),1)):(d(),n("div",{key:1,class:"time-box gray",onClick:a[3]||(a[3]=e=>H.value=!0)},"请选择"))])])]),c("div",{class:"btn-box"},[(d(),n(b,null,y(I,(e=>c("div",{class:T(["btn-item",{active:v(U)===e.value}]),onClick:a=>function(e){const a=e.value;return 0===a?(V.value.startTime=t().startOf("day").format(O.format),void(V.value.endTime=t().endOf("day").format(O.format))):-1===a?(V.value.startTime=t().add(a,"day").startOf("day").format(O.format),void(V.value.endTime=t().add(a,"day").endOf("day").format(O.format))):(V.value.startTime=t().add(a,"day").startOf("day").format(O.format),void(V.value.endTime=t().endOf("day").format(O.format)))}(e),key:e.label},p(e.label),11,["onClick"]))),64))])])])),_:1},8,["title","show"]),r(o,{ref_key:"pickerRef",ref:M,confirmColor:"#fe391e",onCancel:q,onConfirm:E,title:"开始时间",show:v(F),mode:"YYYY-MM-DD"===O.format?"date":"datetime",formatter:P,modelValue:v(D),"onUpdate:modelValue":a[5]||(a[5]=e=>k(D)?D.value=e:null)},null,8,["show","mode","modelValue"]),r(o,{ref_key:"pickerRef",ref:M,confirmColor:"#fe391e",onCancel:A,onConfirm:G,title:"结束时间",show:v(H),mode:"YYYY-MM-DD"===O.format?"date":"datetime",formatter:P,modelValue:v(_),"onUpdate:modelValue":a[6]||(a[6]=e=>k(_)?_.value=e:null)},null,8,["show","mode","modelValue"])])}}}),[["__scopeId","data-v-a680be8f"]]);export{O as R};
