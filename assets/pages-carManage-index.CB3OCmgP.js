import{d as a,r as l,G as e,E as t,Z as n,a2 as u,c as s,w as o,i as c,I as r,M as d,K as i,o as _,a as f,g as v,a5 as S,u as p,y as b,b as g,F as h,e as m,t as N,Q as O,_ as E}from"./index-CK4DGatK.js";import{N as L}from"./NavBar.DSs5OGCU.js";const y=E(a({__name:"index",setup(a){const E=l([]),y=l([]),A=l([]),k=l({}),C=JSON.parse(e("userBtnPermission"))||[];t((()=>{D()}));const D=()=>{n({title:"加载中"}),uni.$u.http.get("/product/carProductApp/productStatusNum",{params:{choicenessFlag:1}}).then((a=>{const l=a.data;k.value=a.data,E.value=[{label:"在售已上架",val:"ON_SALE",count:l.onSale},{label:"在售未上架",val:"NO_SALE",count:l.onSaleButNotOnShelves},{label:"在售(全部)",val:"ON_SALE_ALL",count:l.allOnSale},{label:"已预定",val:"LOCKED",count:l.locked},{label:"待签署",val:"TO_BE_SIGNED",count:l.toBeSignedCarNum},{label:"收款中",val:"PAYMENT_ING",count:l.paymentIng},{label:"已售",val:"SOLD_OUT",count:l.haveBeenSold},{label:"退库",val:"BACK_INVENTORY",count:l.returnedFromStorage}],u()})),uni.$u.http.get("/product/carProductApp/productStatusNum",{params:{choicenessFlag:0}}).then((a=>{const l=a.data;k.value=a.data,y.value=[{label:"在售已上架",val:"ON_SALE",count:l.onSale},{label:"在售未上架",val:"NO_SALE",count:l.onSaleButNotOnShelves},{label:"在售(全部)",val:"ON_SALE_ALL",count:l.allOnSale},{label:"已预定",val:"LOCKED",count:l.locked},{label:"待签署",val:"TO_BE_SIGNED",count:l.toBeSignedCarNum},{label:"收款中",val:"PAYMENT_ING",count:l.paymentIng},{label:"已售",val:"SOLD_OUT",count:l.haveBeenSold},{label:"退库",val:"BACK_INVENTORY",count:l.returnedFromStorage}],u()})),C.includes("carTestDrive::info")&&uni.$u.http.post("/product/carTestDrive/num").then((a=>{const l=a.data;A.value=[{label:"待签署",val:"1",count:l.pendingSign},{label:"已签署",val:"2",count:l.loanedSign},{label:"已取消",val:"3",count:l.cancel}],u()}))},B=(a,l)=>{O(`/pages/carManage/carList?type=${a}&isOrder=0&choicenessFlag=${l}`)},T=l(!1);async function I(){T.value=!0,await D(),setTimeout((()=>{T.value=!1}),200)}return(a,l)=>{const e=c,t=r(i("up-icon"),d),n=S;return _(),s(e,{class:"page f-c-s"},{default:o((()=>[f(L,null,{title:o((()=>[f(e,{class:"head-drop f-r-a f-r-c"},{default:o((()=>[v(" 车辆管理 ")])),_:1})])),_:1}),f(n,{"scroll-y":"","refresher-enabled":!0,"refresher-triggered":p(T),onRefresherrefresh:I,class:"scroll-view-box",style:{overflow:"hidden"}},{default:o((()=>[f(e,{class:"main-box"},{default:o((()=>[f(e,{class:"title"},{default:o((()=>[f(e,null,{default:o((()=>[v("精品车辆库存")])),_:1})])),_:1}),f(e,{class:"inventory"},{default:o((()=>[(_(!0),g(h,null,m(p(E),((a,l)=>(_(),s(e,{key:l,onClick:l=>B(a.val,1)},{default:o((()=>[f(e,null,{default:o((()=>[v(N(a.label),1)])),_:2},1024),f(e,null,{default:o((()=>[v(N(a.count),1),f(t,{name:"arrow-right",size:"10"})])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),f(e,{class:"main-box"},{default:o((()=>[f(e,{class:"title"},{default:o((()=>[f(e,null,{default:o((()=>[v("特价车辆库存")])),_:1})])),_:1}),f(e,{class:"inventory"},{default:o((()=>[(_(!0),g(h,null,m(p(y),((a,l)=>(_(),s(e,{key:l,onClick:l=>B(a.val,0)},{default:o((()=>[f(e,null,{default:o((()=>[v(N(a.label),1)])),_:2},1024),f(e,null,{default:o((()=>[v(N(a.count)+" ",1),f(t,{name:"arrow-right",size:"10"})])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),f(e,{class:"main-box"},{default:o((()=>[f(e,{class:"title"},{default:o((()=>[f(e,null,{default:o((()=>[v("库存预警")])),_:1})])),_:1}),f(e,{class:"exceed",onClick:l[0]||(l[0]=a=>B("DAYS_OVERDUE"))},{default:o((()=>[f(e,null,{default:o((()=>[f(e,null,{default:o((()=>[v("上架超期")])),_:1}),f(e,null,{default:o((()=>[v("已上架车辆超过预警天数")])),_:1})])),_:1}),f(e,null,{default:o((()=>[v(N(p(k).shelfLate)+" ",1),f(t,{name:"arrow-right",size:"10"})])),_:1})])),_:1})])),_:1}),p(C).includes("carTestDrive::info")?(_(),s(e,{key:0,class:"main-box",onClick:l[1]||(l[1]=l=>a.addScheduledSale("testDrive"))},{default:o((()=>[f(e,{class:"title"},{default:o((()=>[f(e,null,{default:o((()=>[v("试乘试驾")])),_:1})])),_:1}),f(e,{class:"inventory"},{default:o((()=>[(_(!0),g(h,null,m(p(A),((a,l)=>(_(),s(e,{key:l,onClick:l=>{return e=a.val,void O(`/pages/carManage/testDriveList?type=${e}`);var e}},{default:o((()=>[f(e,null,{default:o((()=>[v(N(a.label),1)])),_:2},1024),f(e,null,{default:o((()=>[v(N(a.count)+" ",1),f(t,{name:"arrow-right",size:"10"})])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):b("",!0)])),_:1},8,["refresher-triggered"])])),_:1})}}}),[["__scopeId","data-v-64d21d59"]]);export{y as default};
