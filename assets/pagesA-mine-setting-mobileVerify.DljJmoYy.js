import{d as e,r as a,c as s,w as l,i as t,I as o,bu as u,K as n,bv as d,o as r,a as c,R as m,u as i,z as p,g as f,t as v,W as b,n as h,D as _,Z as g,bp as w,a2 as V,ay as x,bR as y,aS as C,_ as T}from"./index-CK4DGatK.js";const R=T(e({__name:"mobileVerify",setup(e){const T=a(),R=a(),k=a(""),E=a(60),P=a(),I=/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,S=e=>{k.value=e},U=(e=!1)=>T.value?I.test(T.value)?e&&!R.value?"请输入验证码":"":"请输入正确手机号":"请输入新的手机号",$=()=>{if(P.value.canGetCode){const e=U();if(e)return void(new _).showToast(e);g({title:"正在获取验证码"}),w(T.value,"RESETPHONE").then((()=>{V(),P.value.start()}))}else console.log("倒计时结束后再发送")},j=()=>{const e=U(!0);e?(new _).showToast(e):(g({title:"提交中"}),uni.$u.http.post(x.resetPhone,{newPhone:T.value,code:R.value}).then((()=>{(new _).showToast("设置成功，请重新登录"),y(),setTimeout((()=>{C({url:"/pages/login/index"})}),1500)})))};return(e,a)=>{const _=m,g=t,w=o(n("up-code"),u),V=o(n("up-button"),d),x=b;return r(),s(g,{class:"page font-regular"},{default:l((()=>[c(g,{class:"form-item mb30"},{default:l((()=>[c(_,{type:"number",modelValue:i(T),"onUpdate:modelValue":a[0]||(a[0]=e=>p(T)?T.value=e:null),placeholder:"请输入新的手机号",maxlength:"11"},null,8,["modelValue"])])),_:1}),c(g,{class:"form-item mb120"},{default:l((()=>[c(_,{type:"number",modelValue:i(R),"onUpdate:modelValue":a[1]||(a[1]=e=>p(R)?R.value=e:null),placeholder:"请输入验证码"},null,8,["modelValue"]),c(w,{seconds:i(E),ref_key:"uCodeRef",ref:P,onChange:S},null,8,["seconds"]),c(V,{onClick:$},{default:l((()=>[f(v(i(k)),1)])),_:1})])),_:1}),c(x,{class:h(["next-btn",{disabled:!i(T)||!i(R)}]),onClick:j},{default:l((()=>[f(" 提交 ")])),_:1},8,["class"])])),_:1})}}}),[["__scopeId","data-v-eb288ca6"]]);export{R as default};
