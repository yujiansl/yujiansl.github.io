import{_ as e,c as t,w as a,aZ as s,i as r,o as i,a as n,a5 as c,b as o,y as h,F as d,e as u,n as l,g as m,t as p,aM as f,aN as A,ax as g,P as y,h as L}from"./index-CK4DGatK.js";const b=e({data:()=>({tabArr:[],sourceList:[],videoArr:[],currentVideoIndex:0,modelName:"",price:"",duration:500}),onLoad(e){this.currentVideoIndex=Number(e.index),this.sourceList=JSON.parse(e.sourceList).map(((e,t)=>({...e,videoContext:"Video"==e.attachmentType?s(`myVideo${t}`,this):""})));const t=[...this.sourceList.filter((e=>"Cover"==e.carAttachmentType)),...this.sourceList.filter((e=>"APPEARANCE"==e.carAttachmentType))].length,a=this.sourceList.filter((e=>"TRIM"==e.carAttachmentType)).length,r=this.sourceList.filter((e=>"OTHER_PHOTOS"==e.carAttachmentType)).length,i=this.sourceList.filter((e=>"VehicleLicense"==e.carAttachmentType||"VehicleLicenseBack"==e.carAttachmentType)).length,n=this.sourceList.filter((e=>"RegisterCertificate"==e.carAttachmentType)).length,c=this.sourceList.filter((e=>"Nameplate"==e.carAttachmentType)).length,o=this.sourceList.filter((e=>"CLASSIFY_OTHER_PHOTOS"==e.carAttachmentType)).length;this.tabArr=[],t&&this.tabArr.push({name:"外观",count:t,start:0,end:t}),a&&this.tabArr.push({name:"内饰",count:a,start:t,end:t+a}),r&&this.tabArr.push({name:"其他",count:r,start:t+a,end:t+a+r}),i&&this.tabArr.push({name:"行驶证",count:i,start:t+a+r,end:t+a+r+i}),n&&this.tabArr.push({name:"登记证",count:n,start:t+a+r+i,end:t+a+r+i+n}),c&&this.tabArr.push({name:"铭牌",count:c,start:t+a+r+i+n,end:t+a+r+i+n+c}),o&&this.tabArr.push({name:"其它",count:o,start:t+a+r+i+n+c,end:t+a+r+i+n+c+o}),this.videoArr=this.sourceList.filter((e=>"Video"==e.attachmentType)),this.modelName=e.name,this.price=e.price},methods:{changeSwiper(e){if("Video"==this.sourceList[this.currentVideoIndex].attachmentType){this.sourceList[this.currentVideoIndex].videoContext.pause()}this.currentVideoIndex=e.detail.current},handlePage(e){this.duration=0;let t=0;this.tabArr.forEach(((a,s)=>{e>s&&(t+=a.count)})),this.currentVideoIndex=t,setTimeout((()=>{this.duration=500}),600)}}},[["render",function(e,s,b,T,_,x){const V=r,I=c,C=g,v=y,k=A,N=f,P=L;return i(),t(V,{class:"banner"},{default:a((()=>[n(I,{"scroll-x":"",class:"tab-scroll"},{default:a((()=>[n(V,{class:"banner-tab"},{default:a((()=>[(i(!0),o(d,null,u(_.tabArr,((e,s)=>(i(),t(V,{key:s,class:l({active:_.currentVideoIndex>=e.start&&_.currentVideoIndex<e.end}),onClick:e=>x.handlePage(s)},{default:a((()=>[m(p(e.name)+"("+p(e.count)+")",1)])),_:2},1032,["class","onClick"])))),128)),_.videoArr.length?(i(),t(V,{key:0,class:l({active:_.currentVideoIndex==_.sourceList.length-1}),onClick:s[0]||(s[0]=e=>x.handlePage(_.sourceList.length-1))},{default:a((()=>[m("视频")])),_:1},8,["class"])):h("",!0)])),_:1})])),_:1}),n(I,{style:{height:"100%"}},{default:a((()=>[n(N,{class:"swiper",current:_.currentVideoIndex,duration:_.duration,id:"swiper",onChange:x.changeSwiper},{default:a((()=>[(i(!0),o(d,null,u(_.sourceList,((e,s)=>(i(),t(k,{key:s},{default:a((()=>[n(I,{style:{height:"100%"}},{default:a((()=>["Video"==e.attachmentType?(i(),t(C,{key:0,src:e.attachmentUrl,id:"myVideo"+s,"object-fit":"contain",poster:e.videoCover,"show-mute-btn":!0,"enable-progress-gesture":!1},null,8,["src","id","poster"])):(i(),t(v,{key:1,src:e.attachmentUrl,mode:"widthFix"},null,8,["src"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current","duration","onChange"])])),_:1}),n(V,{class:"name"},{default:a((()=>[n(V,null,{default:a((()=>[m(p(_.modelName),1)])),_:1}),n(V,null,{default:a((()=>[n(P,null,{default:a((()=>[m(p(_.price),1)])),_:1}),m("万元")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3d837118"]]);export{b as default};
