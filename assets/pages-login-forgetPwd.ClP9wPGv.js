import{d as e,r as a,c as s,w as l,i as o,I as t,bu as u,K as n,bv as d,o as c,a as r,R as i,u as p,z as m,g as f,t as h,W as v,n as w,D as g,bp as _,a2 as b,ay as C,_ as V}from"./index-CK4DGatK.js";const y=V(e({__name:"forgetPwd",setup(e){const V=a(),y=a(),T=a(""),k=a(60),x=a(),E=/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,P=e=>{T.value=e},R=(e=!1)=>V.value?E.test(V.value)?e&&!y.value?"请输入验证码":"":"请输入正确手机号":"请输入手机号",$=()=>{if(x.value.canGetCode){const e=R();if(e)return void(new g).showToast(e);(new g).showLoading("正在获取验证码"),_(V.value,"RESETPWD").then((()=>{b(),x.value.start()}))}else console.log("倒计时结束后再发送")},B=()=>{const e=R(!0);e?(new g).showToast(e):((new g).showLoading("提交中"),uni.$u.http.post(C.checkCodeByType,{mobile:V.value,code:y.value,type:"RESETPWD"},{custom:{Authorization:"Basic cGlnOnBpZw=="}}).then((()=>{uni.$u.route({url:`pages/login/resetPwd?phone=${V.value}`}),b()})).catch((()=>{})))};return(e,a)=>{const g=i,_=o,b=t(n("up-code"),u),C=t(n("up-button"),d),E=v;return c(),s(_,{class:"page font-regular"},{default:l((()=>[r(_,{class:"form-item mb30"},{default:l((()=>[r(g,{modelValue:p(V),"onUpdate:modelValue":a[0]||(a[0]=e=>m(V)?V.value=e:null),placeholder:"请输入手机号",maxlength:"11"},null,8,["modelValue"])])),_:1}),r(_,{class:"form-item mb120"},{default:l((()=>[r(g,{modelValue:p(y),"onUpdate:modelValue":a[1]||(a[1]=e=>m(y)?y.value=e:null),placeholder:"请输入验证码"},null,8,["modelValue"]),r(b,{seconds:p(k),ref_key:"uCodeRef",ref:x,onChange:P},null,8,["seconds"]),r(C,{onClick:$},{default:l((()=>[f(h(p(T)),1)])),_:1})])),_:1}),r(E,{class:w(["next-btn",{disabled:!p(V)||!p(y)}]),onClick:B},{default:l((()=>[f(" 下一步 ")])),_:1},8,["class"])])),_:1})}}}),[["__scopeId","data-v-a34cb51a"]]);export{y as default};
