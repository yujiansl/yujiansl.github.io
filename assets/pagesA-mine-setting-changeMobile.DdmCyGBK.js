import{d as e,A as a,r as s,c as l,w as o,i as t,I as n,bu as u,K as d,bv as c,o as i,a as r,R as p,u as f,z as m,g as b,t as h,k as v,W as _,n as g,D as y,Z as V,bp as w,a2 as C,ay as E,_ as k}from"./index-CK4DGatK.js";const T=k(e({__name:"changeMobile",setup(e){const k=a(),T=s(k.userInfo.phone),I=s(k.loginInfo.phone),R=s(),x=s(""),A=s(60),B=s(),O=e=>{x.value=e},z=(e=!1)=>e&&!R.value?"请输入验证码":"",G=()=>{if(B.value.canGetCode){const e=z();if(e)return void(new y).showToast(e);V({title:"正在获取验证码"}),w(I.value,"RESETPHONE").then((()=>{C(),B.value.start()}))}else console.log("倒计时结束后再发送")},H=()=>{const e=z(!0);e?(new y).showToast(e):(V({title:"提交中"}),uni.$u.http.post(E.checkCodeByType,{mobile:I.value,code:R.value,type:"RESETPHONE"},{custom:{Authorization:"Basic cGlnOnBpZw=="}}).then((()=>{uni.$u.route({url:"pagesA/mine/setting/mobileVerify"}),C()})).catch((()=>{})))};return(e,a)=>{const s=p,y=t,V=n(d("up-code"),u),w=n(d("up-button"),c),C=_;return i(),l(y,{class:"page font-regular"},{default:o((()=>[r(y,{class:"form-item mb30"},{default:o((()=>[r(s,{modelValue:f(T),"onUpdate:modelValue":a[0]||(a[0]=e=>m(T)?T.value=e:null),disabled:""},null,8,["modelValue"])])),_:1}),r(y,{class:"form-item code"},{default:o((()=>[r(s,{type:"number",modelValue:f(R),"onUpdate:modelValue":a[1]||(a[1]=e=>m(R)?R.value=e:null),placeholder:"请输入验证码"},null,8,["modelValue"]),r(V,{seconds:f(A),ref_key:"uCodeRef",ref:B,onChange:O},null,8,["seconds"]),r(w,{onClick:G},{default:o((()=>[b(h(f(x)),1)])),_:1})])),_:1}),r(y,{class:"tips"},{default:o((()=>[b(" 温馨提示："),v("br"),b(" 若原手机无法接受短信验证码，可联系客服人员进行处理 ")])),_:1}),r(C,{class:g(["next-btn",{disabled:!f(T)||!f(R)}]),onClick:H},{default:o((()=>[b(" 下一步 ")])),_:1},8,["class"])])),_:1})}}}),[["__scopeId","data-v-3e545c61"]]);export{T as default};
