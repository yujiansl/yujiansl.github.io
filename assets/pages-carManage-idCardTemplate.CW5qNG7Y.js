import{_ as A,c as t,w as a,f as e,ay as s,az as i,ar as c,a2 as h,a1 as g,Z as o,ak as r,aA as l,aB as w,aC as O,a0 as n,aD as j,aE as D,l as M,i as m,aF as d,o as u,a as z,aG as H,aH as x,aI as v,g as B,P as p,aJ as I}from"./index-CK4DGatK.js";import{N as V}from"./NavBar.DSs5OGCU.js";const f=A({components:{NavBar:V},data:()=>({windowHeight:0,cameraHeight:0,cameraContext:{},idcardFrontSide:"ordinary",imgurl:"",src:"",flag:!0,D:{},d:{},imgW:0,imgH:0,W:0,H:0,w:0,h:0,rx:0,ry:0}),created(){const A=M();this.windowHeight=A.windowHeight,this.cameraHeight=A.windowHeight-160},watch:{src:{handler(){this.cutphoto()}}},onLoad(A){O?this.cameraContext=O():D({title:"提示",content:"当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。"}),this.idcardFrontSide=A.idCard},methods:{errorCamera(A){uni.getSetting({success(A){A.authSetting["scope.camera"]||D({title:"提示",content:"请开启摄像头权限，否则无法拍照",confirmText:"去开启",success(A){A.confirm?uni.openSetting({success(A){A.authSetting["scope.camera"],g({delta:1})}}):A.cancel&&g({delta:1})}})}})},takePhoto(){this.flag&&O().takePhoto({quality:"high",success:A=>{this.flag=!1,this.src=A.tempImagePath,j({src:this.src,success:A=>{this.imgW=A.width,this.imgH=A.height}})},fail(A){n({title:"拍照失败，请检查系统是否授权",icon:"none",duration:1200})}})},async cutphoto(){o({title:"上传中",mask:!0}),setTimeout((()=>{r().in(this).select(".coverView").fields({dataset:!0,size:!0,rect:!0},(A=>{this.W=A.width,this.H=A.height,this.rx=this.imgW/this.W,this.ry=this.imgH/this.H,this.D=A})).exec(),r().in(this).select(".coverImg").fields({dataset:!0,size:!0,rect:!0},(A=>{this.w=A.width,this.h=A.height,this.w,this.h;const t=(this.W-this.w)/2,a=(this.H-this.h)/2,e=l("photo",this);e.drawImage(this.src,t*this.rx,a*this.ry,this.w*this.rx,this.h*this.ry,0,0,this.w,this.h),e.save(),e.draw(!0,(()=>{w({canvasId:"photo",success:A=>{const t=uni.getFileSystemManager().readFileSync(A.tempFilePath,"base64");this.imgurl=t,this.photoSure()},fail:A=>{console.error("canvasToTempFilePath fail:",A)}})}))})).exec()}),500)},photoSure(){uni.$u.http.post(s.uploadBaseStr,{fileBaseStr:"data:image/png;base64,"+this.imgurl,fileSize:this.imgurl.length,fileType:"png",fileName:"拍照"}).then((async A=>{const t={attachmentName:"拍照.png",attachmentSize:this.imgurl.length,attachmentType:"image/png",attachmentUrl:A.data.url},a=await i(t);c("uploadData",a),h(),g()}))}}},[["render",function(A,s,i,c,h,g){const o=d("nav-bar"),r=v,l=x,w=H,O=m,n=p,j=I;return u(),t(O,{style:e({height:h.windowHeight+"px",overflow:"hidden"})},{default:a((()=>[z(o,{bgColor:"transparent",backColor:"#fff",class:"nav-bar"}),z(O,{class:"container-camera",style:e({height:h.windowHeight+"px"})},{default:a((()=>[z(O,{class:"camerabox"},{default:a((()=>[z(w,{style:e({height:h.cameraHeight+"px"}),mode:"normal","device-position":"back",flash:"off",onError:g.errorCamera},{default:a((()=>[z(l,{class:"coverView",style:{width:"100%",height:"100%"}},{default:a((()=>["backUrl"==h.idcardFrontSide?(u(),t(r,{key:0,ref:"coverImg",class:"coverImg",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAACxCAMAAAAh3/JWAAAAwFBMVEUAAAD//////////////ej/////+Fz///v/+lz/+l7/////////////////////////////////////////////////////////////////////////////////////+V3/////////////////////////////////////////////+lz/////+l3/////+Vz/////////+Vz/+Vz/+lv/+Vz/+Vz/+V3/+V3/+Fz/92D//9v/+1z//t3//bD/9li/q5vGAAAAQHRSTlMAaEkfB79iBaGeQgoTHDsOM6kl8YR8YCohLhDTjk8Y28qjnJVwRujZdlnexrSUOCq7VYZ1ReLPqWw8FnBXTTMdjVIdjwAABSRJREFUeNrt2+dOIzEUhuEviY3DeFp67z2kEFjKsu3+72oDgtUCM2ZmIJEm5zySJX6g/Hhln8QpeCK+XZ0/W+fI+v2vwfUW/5z1Lq7OXmTJ+vWS4H7du/iOJyK//4u99rN3jUd3eQH21p/bewBnF9wmyPZmC9HjMxXsOo9vF2CBHm5wdQUW7ALnZ2DB8hyH43AcjhOO4xhwHAOOc0x5rDlOmHPksmDBMhyH43AcjhOO40SiAM/jOO90fUDOoEolhcLA4jgvtK8w7QNuHU+K1Qm6c5vjAAKrWR1v2YWZIh9HDwcIq9CkHUfBawuE6Y9twnHsvg8DR3aQ6QiicbIVfMSSDSiCcRoeIlGtGrk4uZKPaLIrcnGEj+iKpOKoCWLwShtKcXYtxLFZUIrj5xCPohNHIK5WjUocPfUQ07hAJY7bx3v8ZtcnNGnEUQ7ia8wUiTh+CwksbRJxOhW8xTPnk0jsHLVAEps+hTheCUnYLUEgjq7gLZ45n6UpxLErSGRZJxAnt0QirSKBOLqDt3jmhOA4//MKSGRGYebokkISU4dAHLjJ4ggKxyoAz5x/FnMkUCRxt8JEIoFqgUQc4SABReL6kJCiMXMwzCK25pLGztGzAWKblIok4sAXiM8hcaw2BSRSHRGI4+6QiN0hECexJoE4gywS8Zb69ONUKkikLgnsHCGQDIWPZsLwrfzR0EcCXsujEGfRRwKjEYmdIxZIoN4kEWevXNGIoy09IjNnbzctIo5SR9GJg52NOCaEvof8Dj+VvzJ0EJnoN2nFGa9i/O+A2M4RRUSmNLE4gKMjpqmSmzlA5RKRDAYE44iRQhQLTTDOXg0f2gmCT+WPxKyCD4yXNtE4sEf4wMSh+CLwxbiGUPWCpvkK+cW8hFCrtqIdR4wQqlonerd6iy+eAcQcocZF4nF0CaGkSzyOyiCU2yQe5wnPnGB6iFAj6sfKKyFUoUM8DjYIZQvqcQyUJh7HLyBUZ0A8TruMUM5S0I7jaISzSe8cUYOR06AbR1wOYGSVGnTjlPEB14agGKdZriICuzUhF6eLzdBDFJM5HJtSHLGaIYb21KXykyJ/1EVHII6ugCzrU48jXBfzuUZ89bLWZf9044g63FYVienyELmGOMk43qyPT6suq9CnFscZ1VDE15BtfUpxPFTbHr6KXRG6eypxVKWFL7YrZU8jjkDFxldzbDRPIE61gIMoTt3Ux2lKB4fhTtIep4EDctxUx8m0FA6nMS2mOY5l45BqKr1xdBcHJtzUxikXcGDNaS21cWwc2s5Ja5yYKH3Lwut7OLx2JpVxXIkjyF6mMg4EoqJ3rDSOQogUxulOFY5hmElhnNoljiIzT2GcGOjNHKcOxyruVw1dqwHb8uHtl7Y2EJYL9bxgWa+Xa4n90vAtb7+aaFg2apaD4n7lrKcHff2AfgrjVKtYyDE6co6JLMOXbdTkCHVZQHe/PLmC3i8hL6H2C1ICl1JhJW0UZA5DWUNb+ihLFxWZxVgusJAZdOQYlixjI9toyCGcQQrjREfwWEXEcQw4jgHHMeA4BhzHgOMYcBwDjmPAcQw4jgHHMeA4BhzHgOMYcBwDjmPAcQw4jgHHMeA4BhzHgOMYcBwDjmPAcY4pg9+/wIL9wPkZWLA8x+E4HIfjhOM4BhzHgOMcUx7re7Bgd7hegwW7xbanwIJsb4CLn2BB1lfA994fsPe+9R4AXN9uwd63+YZH9zfXD2D/266f2wDbu5uL/LPzDFk/8s/ubntXDwD+AuRgTQ1TucXuAAAAAElFTkSuQmCC"},null,512)):"frontUrl"==h.idcardFrontSide?(u(),t(r,{key:1,ref:"coverImg",class:"coverImg",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAACxCAMAAAAh3/JWAAABAlBMVEUAAAD/////////////+lz/////////913/+Fv/+l7/+V7/////////////////+l3/////////////////////////////////////////////////+V3/////////+Vz/////////////////////+Vz/+Fz/////////////7FX/+V3/////+Vz/////////+WL/////+Vz/////+V3/+mH/+Vv/+1z/+Fv/91z/92D/////////////////+V3/////+lz/////////+V3/////////////////////+V3/////+Vz//9v/+Fz//////t3//bD/+l3/9lj/////+V3AGBulAAAAVnRSTlMAaEkfoAYEY2Keng0IGtqUYTQpHBWzmD4kCuGpqIV+dVJFLhMR38R0VyAK19DPwZ6biYh6bFxGQTclFv737ufcycatpKSQbkE6D+PFgHBmT00zLh0X5P6g19sAAAQdSURBVHja7Nt5U9NAGIDxp60b1KSl90lLaZG2gBwiigoM9yEMePD9P4szwDjabjbZjP7zZn8f4Zlkd98cPFr9cLv1+sl8LrW+v342v7jHb3Nrx+/u5p7sZlPr29yz9/NrKx95tLqwsofzt903iwAsnK3iTPv59j3w8ti10fn05gera+6e0ltc4MMxjtbnr9y+w9FbYesOR++MVy9x9F64OC7Of41TKXkUMz6lskdqxIlTLqpg/WbZ654v0yk0KV6RDpFxqkptnA75U/eoSpMUiIpzcdhAo9WuId8L5ncJ45cp5dFSfYIcwm2RyxLiYX0Tg+xBFtkyhjhBH6PJhADJQuO06mMi+YUKgoXGuT9RRMuIXpdD4gQBcT0glj6OOu0RU/5giFT6OOWaR1yjHaTSxknR+GQdZ7jRwsam1FlLF6dXx0rpEJl0cTyFHR+ZNHEGWMspJJqNU2orbJ1uI9FsnPEIa9cnSJQhJ322/odxSgMSCC4QaCZOp0gSXxBoJs6oShJ1ifuVW3Ms4pSWSMQfIc90nF43YZx95JmO02+QjMRjoFtzbK6cZZIpIs90nPUBuINOSJxilWQkHpHdmmMRZ7tPMgXkmY7T7ZGISsM5J65UvLGYidMikWUEmo7jt6skUSgjz3QctpskIfKDAreVW605NR97tQkCzcShk8Gakjg86OIEntusQuNQaWDJE7psaeI0Cgo7m3VE0sShhKWmxFcPIXHIN7FxiVDaOP1CQHz1DYTSxqGBhbLYL7X1ccjvENNgCbHC4hz0iGWyn8I4oyGxeOOK0K0qNM51oUVcGwOk0sdhQmz5tF05UCEmX+LzUXOcymHcOkdjxAqJQ7FJLJ7QscoYBwaKaELH8cg49ZuAKN224BXHFMdr0MKoSlnmQ67oOMD5UYVQXqeNcMY4akn5GR+dyzJjub/oaeLoVE86M493qldcrgseqWLHgYD7QoZMN09jyfN2zhm2O6RDdBxAKbI7eTZr116vKPf3KvfG08VxcWa4OAYujoGLY+DiGLg4Bi6OgYtj4OIYuDgGLs6vduheNWEwAKPwK2Rop9xAIFNcSqCIbZosWToJgj94/7ciooPg5xldPM8lPMAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHOAOcAcYA4wB5gDzAHmAHNeaZH9Lirb5vMjKqvMMcccc54zB5gDzHmlKvU6KmvS1lFZn7+vqGjskuVPVFKvkmE+Ro9+5ylJ24/Rw0035GK9aafo3ljPQ64OzWn5X119L97Wtrpp+m41JTkDcltBEh3lQmQAAAAASUVORK5CYII="},null,512)):(u(),t(r,{key:2,ref:"coverImg",class:"coverImg",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAADNCAMAAABdPz/sAAAAb1BMVEUAAAD/////////////+V3/+Vz/+l7/+lz/+V3/+V3/+Vz/+V3/+l3/+WD/8VX/+V3/+lz/+Fz/+lv/+Fv/+lz/+lz/91z/+Vz/+Vz/+Fv/+Vz//tr/+Fz/+Vv//+D//bD/91v/9lj/+Vz/+V3/9GBjvXspAAAAJXRSTlMAaEkfYqCexZTedOKomgrXpW1GQTYkFc/NhoBwZldNMy0di4kYm75clQAAAkNJREFUeNrt08ly2mAUBeGDLSGhgRk8T0ne/xlThVWp2P7pJRv625x91705WW4fx/mn9vZqvc0nbbfPP9WqeXiuJjdX67WabNpVs5vOZmj20Vcvi+60w3oZffdxv0lSNbYpOfTvWa78qbJunW0TFR37PD5EZU3G56hsnXkVldXGMY5xjHOecYBxLqlOa5xzxtzeRGUz4xjHOMY5zzjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDjAOMA4wDiXNMvba1T2lHkVldXGMY5xjHOecYBxgHEuqc64icqGdG1Udpf9Kio69EnzEpW0v5Pd4iP6abs4JunuD9HPNrvTbvruGP3v0E5tkvehb9b1p3F2tZ7qyXC3+PUnyV9iHhKYSyUeHgAAAABJRU5ErkJggg=="},null,512)),z(l,{class:"tips"},{default:a((()=>[B("请将证件置于取景框内")])),_:1})])),_:1})])),_:1},8,["style","onError"])])),_:1}),z(O,{class:"bottom"},{default:a((()=>[z(n,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAACsCAMAAADR77fqAAAA6lBMVEUAAAD////////////////////4/P/8/P/4/Pzu8/7////////////////////////////////////u9P7////////u9P7////////t9P3u9P3v9P3////////////////////v9v7////////////5/P/7+//39//////t8/3t8/3////t8/7////u8/3////////u8/z////////t8/3t9P3////////////6/P/u9//////s8/3t9P7t8/3t9P3////////u9P7u8/7////////////t8v3////u8vzs8fr09P/t8/3///8vqfSRAAAATHRSTlMARQb7+S0cJBXsqoHX2fLq6OTS0sW/v7KgnpeKe2tnV1NPTTUfGBIO7fnz4NjKybm2r5mLgHlxYWBCPDv49vHh38+zsa+TkXJcTDcL0I5NcQAABmNJREFUeNrM19d2qkAUgOENggrYe0FjxRJL7C2m9wzv/zrnYuaszAgaIQPJd53FIjs/eybAT6ixfCmo40zqritJ3btUZqwWXpaNEPwtzdXsKSKZR0iRp9mqCX+BvMzHzDPE8ksZflOoqsZNB+Jq9ZeiCFeGpgvDShh8JtbykumSlK+J4J/mtGv+SHfq1wcnZE0OsgJ4rzE0ORk2wFsXKZOj1AV4pxE9uUnvVW1VE3ZyyxBFoyXvhNpKU+9PbuGIV9Nt5c1jotOKEIQjgkJlevy3zLeAP1E/sqsuC29B+FbwrXB5ZJPp3BeZYD+bbDXk5MCz3yNRvouhrdoGp7ccp6RHTBtqm+NYEzbn/HPTMrn6oviYG6VvlV5PuU2Pco/FRd0y+eazzX0iwW24WsAaakVkgt6UHwY9ZKs3eChv2J+uWPMNaHwSyFojWwNlO8/t0Tf2ufkWKOuoNf825wSsq7w+6aMz9Sf1k8dLQuCeQJJ61Y+SghxRSh/U6yY5p1A4fN6sA0RnMUAuDBZfT5gdTqIA7n1emayMDES43Ecu9cthIOSMybr6BJeMg0fF10AES3v0A/tSEIh1/GAcBrgSPNjf4/8DaRev0Q9dF9uAhccHJ00QXJCTbK06EK83iIObVyB0ttyk7OJdu+wjdoBt04iT9BawHTuWruy4gSQbPknAKCKOigZJ4YodjMMSDLZXDbB3BXGlvAOmsd0ajnZWhsm1ClgZcVcGrMqEm3GywZg/i1QjZYyQB0bkb16TmOxcnluxDbkFKMgTCrkxbGJuzjI2oAT5NufIM3OyfxLsZ3IWgc4nQS7PJeShErm8028bEOAM7QTdAJ6rOEGemoh4tjF6TG34Xpb+tnCvnRzyWK6Du5Xo27izYAM1vLPTyHPpMN4JdIKao2CreK5p5IM0nm2VydZBsBruNYd8kcPdaudnq1oX8wT5ZGI9kNSTEdDXibCDncVxg4XpK9SJEMQoFczOwVnA9XTYUZ9NVIRjdPOLjs9Y5Ku63WvYa1FbbozvLgrylYJvNWNq07fAXp763xAHO0I+G/2j1lxbEoiCMHxcSHOJljIkCaGrlHRBxWve78j4//9OOBvMpUUIgpmej33atrPnfead0mObsP42ZHK/J3q/89e/9tvensjuxtnXdZXOBWBAOjsw+T/L3G2wmwD1pVYEA4o1VBp2I2RtSVhR1sIfVMCESjjQYkXg0RN7gTE9ACMGKCQXx07tm37vJTCipE/lW1Dk9GvfgBkbfSxzWrnVi30agxnjJ/lqtYY/sDimr8uKir5K5a6lqfIgPwRDhnmVDE2hW8+0hyExtIFkkXY6z1y+bumXqGI4j8CUEapJlZ7qNlNhkshCCrIVIUqydOaU3HCFN3IdjKljLq3IFOm/gKrqu2uDOW11R1UpvZTivII5r+HA2c8UK6gpYgcO2KkBpxCCLhYeHdxb7PZ6FIULEqtcK4IDimQBokJI5OPfgQvu5B89CciJOhgNcEFDfU5p+dpRUWt+yabUVeR2VHxdpxOCEwa03qAQo7p5mxZGTsAyaUslvIoJNLMyOKGMrirDtSu1OxqCE4aRVPAuDr1Ccfvghj6OBaIgWJIsuLBD4kZK1hJlQQyRc3DDHMduIVnksnknxiXMK09OyzPiPBx4ATe8qJu1wGqjGeYbOALTf0Y1Egvb2JHFMJeJWeCuae3lZKIh2nIxtmbh2zVvYjKbmS5Tl1jO5gtwxEJ2GjHbjORcmcGBsrxoP1h7/5nuZxzxjjs8tum4lCpeAkeU5CBzGaZysp2AIyZywp0G6g9rbiZbMeHWqEtkahA5S9vvvI1IDv7Xw36Vd8dGEIQwEAQTIArigPzTonBxkKVSlz6GvzuQdmeovwH1gFGvLuqjQH1uqYMMdUSkDt/UtYa6MFJXcWrIYY2PqMEcNfIsO0ze7zBZG9NTCxBrtUQt7ah1KLVotlb4VDiCip1QgR4rKkWF0Kh4nxWcpCKpVNjXilFTAXUr+k+VKqy6ClUEsipWVHnNqgVShUurykqVhK36NVVst5ABFoyBwlxYABELzWJBbyickAVqshBYFlzMwrZRQDwLNWhBHC08pgUetZCuFizXwhBjgGcLnR2Dkq/v0x+BknfDvWMgfUtRYMkfMK2GJSy5vzkYFQwm2cH0RZgYClNuYTIzTBOnCfg0tSEnjczUcR4M2APTYHZQ8gAAAABJRU5ErkJggg==",onClick:g.takePhoto},null,8,["onClick"])])),_:1})])),_:1},8,["style"]),z(O,{class:"photobox",style:e({height:h.cameraHeight+"px"})},{default:a((()=>[z(j,{id:"photo","canvas-id":"photo",ref:"photo",style:{width:"90%",height:"300px"}},null,512)])),_:1},8,["style"])])),_:1},8,["style"])}],["__scopeId","data-v-9ff92461"]]);export{f as default};
