import{d as a,r as e,B as l,c as t,w as n,i as s,I as o,M as u,K as c,b9 as r,as as d,o as i,a as v,u as m,h,g as p,a5 as f,b as g,F as _,e as b,n as C,ar as k,a1 as w,_ as x}from"./index-CK4DGatK.js";const I=x(a({__name:"documentList",setup(a){const x=e(),I=e(""),T=e([]),z=e("loading"),M=e({current:1,size:10,count:0,content:""});l((a=>{x.value=a.carProductId,I.value=a.documentTextId,L()}));const L=()=>{uni.$u.http.get("product/contentManagement/list",{params:{current:M.value.current,size:M.value.size,content:M.value.content,carProductId:x.value}}).then((a=>{1===M.value.current?T.value=a.data.results||[]:T.value=T.value.concat(a.data.results),M.value.count=a.data.count||0,0===M.value.count&&(z.value="nomore"),T.value.length>=M.value.count&&(z.value="nomore")})).catch((()=>{z.value="nomore"}))},V=()=>{z.value="loading",T.value.length>=M.value.count?z.value="nomore":(M.value.current++,L())},y=a=>{a||H()},H=()=>{M.value.current=1,z.value="loading",L()},P=()=>{w()};return(a,e)=>{const l=o(c("u-icon"),u),x=o(c("u-search"),r),L=h,j=s,B=o(c("u-loadmore"),d),D=f;return i(),t(j,{class:"page f-c-s"},{default:n((()=>[v(j,{class:"bar-search"},{default:n((()=>[v(l,{name:"arrow-left",color:"#000",size:"18",bold:"",onClick:P}),v(j,{class:"search-input f-r-s"},{default:n((()=>[v(x,{modelValue:m(M).content,"onUpdate:modelValue":e[0]||(e[0]=a=>m(M).content=a),bgColor:"transparent",clearabled:!1,placeholder:"请输入文案关键词",onChange:y,"show-action":!1},null,8,["modelValue"]),v(j,{class:"search-btn",onClick:H},{default:n((()=>[v(L,null,{default:n((()=>[p("搜索")])),_:1})])),_:1})])),_:1})])),_:1}),v(D,{"scroll-y":"",class:"scroll-view",onScrolltolower:V},{default:n((()=>[(i(!0),g(_,null,b(m(T),((a,e)=>(i(),t(j,{class:C(["list-li",{active:m(I)==a.id}]),onClick:e=>(a=>{I.value!=a.id&&(I.value=a.id,k("updateData",{content:a.content,id:a.id}),w())})(a),key:e,innerHTML:a.content},null,8,["class","onClick","innerHTML"])))),128)),v(j,{class:"load-more"},{default:n((()=>[v(B,{status:m(z),nomoreText:m(T).length?"没有更多了":"暂无数据"},null,8,["status","nomoreText"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-cd91589e"]]);export{I as default};
