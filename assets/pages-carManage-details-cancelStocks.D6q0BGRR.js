import{d as a,a9 as e,r as s,E as t,X as l,Y as o,x as r,c as n,w as u,i as c,I as d,M as i,K as m,o as p,a as f,g as k,h as y,u as _,n as v,t as h,aj as g,W as w,Q as T,D as b,a1 as R,_ as x}from"./index-CK4DGatK.js";import{u as $}from"./useQuery.3dd8K18V.js";const C=x(a({__name:"cancelStocks",setup(a){const x=$(),C=e({reasonType:"",reasonRemark:""}),D=s([{key:"CarConditionProblem",value:"车况有问题"},{key:"OwnerDroveBack",value:"寄售车主开回"},{key:"WholesaleSold",value:"批发售出"},{key:"RetailSold",value:"零售售出"},{key:"Other",value:"其他"}]);t((()=>{l("pickData"),o("pickData",(a=>{const{key:e,subKey:s}=a;C[s]=e}))}));const I=r((()=>P(D.value,C.reasonType))),P=(a,e)=>{const s=null==a?void 0:a.filter((a=>a.key==e));return(null==s?void 0:s.length)?s[0].value:"请选择"},S=()=>{C.reasonType?((new b).showLoading("提交中"),uni.$u.http.post("/product/merchant/car/product/stockReturn",{carProductId:x.value.carProductId,reasonType:C.reasonType,reasonRemark:C.reasonRemark}).then((()=>{(new b).showToast("保存成功"),setTimeout((()=>{R()}),1500)}))):(new b).showToast("请选择退库原因")};return(a,e)=>{const s=y,t=c,l=d(m("up-icon"),i),o=g,r=w;return p(),n(t,{class:"page f-c-s"},{default:u((()=>[f(t,{class:"content"},{default:u((()=>[f(t,{class:"form-box"},{default:u((()=>[f(t,{class:"form-item"},{default:u((()=>[f(t,null,{default:u((()=>[f(s,null,{default:u((()=>[k("*")])),_:1}),k("退库原因")])),_:1}),f(t,{class:"f-b-c",onClick:e[0]||(e[0]=a=>{return e="退库原因",s=_(D),t=_(C).reasonType,l="reasonType",void T(`/pages/carManage/pagePicker?title=${e}&list=${JSON.stringify(s)}&key=${t}&subKey=${l}`);var e,s,t,l})},{default:u((()=>[f(s,{class:v({placeholder:"请选择"==_(I)})},{default:u((()=>[k(h(_(I)),1)])),_:1},8,["class"]),f(l,{name:"arrow-right"})])),_:1})])),_:1}),f(t,{class:"form-textarea"},{default:u((()=>[f(t,{class:"area-title"},{default:u((()=>[k("退库原因备注")])),_:1}),f(o,{modelValue:_(C).reasonRemark,"onUpdate:modelValue":e[1]||(e[1]=a=>_(C).reasonRemark=a),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"]),f(t,{class:"limit"},{default:u((()=>{var a;return[k(h((null==(a=_(C).reasonRemark)?void 0:a.length)||0)+"/1000",1)]})),_:1})])),_:1})])),_:1})])),_:1}),f(t,{class:"bottom-btn"},{default:u((()=>[f(r,{class:"save-btn w_100",onClick:S},{default:u((()=>[k("保存")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-1871ce9a"]]);export{C as default};
