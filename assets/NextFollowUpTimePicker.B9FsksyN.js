import{d as e,x as l,r as a,p as u,v as t,b as v,a as i,I as n,u as s,w as o,z as c,ac as d,K as f,at as r,o as m,k as b,t as p,F as k,e as Y,n as y,au as C,_ as D}from"./index-CK4DGatK.js";import{i as h}from"./isNil.aV-w2MPu.js";const x="YYYY-MM-DD HH:mm",M=D(e({__name:"NextFollowUpTimePicker",props:{visible:{type:Boolean},title:{},modelValue:{}},emits:["update:visible","update:modelValue"],setup(e,{emit:D}){const M=e,w=D,g=l({get:()=>M.visible,set:e=>w("update:visible",e)}),V=l({get:()=>M.modelValue,set:e=>w("update:modelValue",e)}),_=a(),O=a(V.value),H=l({get:()=>O.value?C(O.value,x).valueOf():null,set:()=>{}}),N=l((()=>O.value?C(O.value).format(x):"")),$=a(),j=a(),F=a(!1),I=[{label:"今天",value:0},{label:"明天",value:1},{label:"后天",value:2},{label:"3天后",value:3},{label:"7天后",value:7},{label:"14天后",value:14},{label:"30天后",value:30},{label:"90天后",value:90},{label:"不跟进",value:null}],U=[{label:"11:00",value:"11:00"},{label:"15:00",value:"15:00"},{label:"17:00",value:"17:00"},{label:"19:00",value:"19:00"}];function z(){g.value=!1}function B(){O.value&&(V.value=C(O.value).format(x)),g.value=!1}const K=new Map([["year","年"],["month","月"],["day","日"],["hour","时"],["minute","分"]]);function P(e,l){return`${l}${K.get(e)}`}function R(){F.value=!1}function T({value:e}){O.value=e,F.value=!1}function q(){!function(){var e;if(h(O.value))$.value=null==(e=I.find((e=>null===e.value)))?void 0:e.value;else{if(!O.value)return;const e=C(C(O.value).format("YYYY-MM-DD")).diff(C(C().format("YYYY-MM-DD")),"day"),l=I.find((l=>l.value===e));$.value=null==l?void 0:l.value}}(),function(){const e=C(O.value).format("HH:mm"),l=U.find((l=>l.value===e));j.value=null==l?void 0:l.value}()}return u((()=>{g.value&&q()})),t(g,(e=>{e&&V.value!==O.value&&(O.value=V.value)})),(e,l)=>{const a=n(f("up-popup"),d),u=n(f("up-datetime-picker"),r);return m(),v("div",{class:"next-follow-up-time-picker"},[i(a,{title:e.title,show:s(g),onClose:l[2]||(l[2]=e=>g.value=!1),class:"date-pop"},{default:o((()=>[b("div",{class:"header"},[b("div",{class:"cancel-btn",onClick:z},"取消"),b("div",{class:"title"},p(e.title),1),b("div",{class:"confirm-btn",onClick:B},"确定")]),b("div",{class:"body"},[s(O)?(m(),v("div",{key:0,class:"time-box",onClick:l[0]||(l[0]=e=>F.value=!0)},p(s(N)),1)):(m(),v("div",{key:1,class:"time-box gray",onClick:l[1]||(l[1]=e=>F.value=!0)},"请选择")),b("div",{class:"btn-box"},[(m(),v(k,null,Y(I,(e=>b("div",{class:y(["btn-item",{active:s($)===e.value}]),onClick:l=>function(e){if(null===e.value)return V.value=null,O.value=null,void(g.value=!1);const l=e.value,a=C(O.value||C().valueOf());O.value=C().set("hours",a.get("hours")).set("minutes",a.get("minutes")).add(l,"day").valueOf()}(e),key:e.label},p(e.label),11,["onClick"]))),64))]),b("div",{class:"btn-box"},[(m(),v(k,null,Y(U,(e=>b("div",{class:y(["btn-item",{active:s(j)===e.value}]),onClick:l=>function(e){O.value=C(O.value||C().valueOf()).format(`YYYY-MM-DD ${e.value}`)}(e),key:e.label},p(e.label),11,["onClick"]))),64))])])])),_:1},8,["title","show"]),i(u,{ref_key:"pickerRef",ref:_,confirmColor:"#fe391e",onCancel:R,onConfirm:T,title:e.title,show:s(F),formatter:P,modelValue:s(H),"onUpdate:modelValue":l[3]||(l[3]=e=>c(H)?H.value=e:null),minDate:s(C)().valueOf()},null,8,["title","show","modelValue","minDate"])])}}}),[["__scopeId","data-v-eb49eafa"]]);export{M as N};
