import{d as a,a9 as e,r as l,B as t,b2 as o,c as u,w as s,i as n,I as d,M as c,K as r,bI as f,bJ as i,o as m,a as p,y as _,g as b,t as y,u as A,h as V,R as T,W as h,D as k,ar as v,a1 as C,_ as w}from"./index-CK4DGatK.js";import{u as j}from"./useQuery.3dd8K18V.js";import{o as D}from"./omit.DzeQdT5l.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const I=w(a({__name:"addAccount",setup(a){const w=j(),I=e({infoType:"BANK_CARD",infoTypeName:"银行卡",name:"",account:"",bank:"",defaultValue:!1}),N=l([[{text:"银行卡",key:"BANK_CARD"},{text:"支付宝",key:"ALIPAY"},{text:"微信",key:"WECHAT"}]]),P=l(!1);t((a=>{o({title:a.id?"编辑账户":"添加账户"}),a.id&&g()}));const g=()=>{uni.$u.http.get("/product/carProductPrepare/findPrepareInfo",{params:{id:w.value.id}}).then((a=>{const{infoType:e,name:l,account:t,bank:o,defaultValue:u}=a.data,s={infoType:e,infoTypeName:{BANK_CARD:"银行卡",ALIPAY:"支付宝",WECHAT:"微信"}[e],name:l,account:t,bank:o,defaultValue:1==u};Object.assign(I,s)}))},x=a=>{const{text:e,key:l}=a.value[0];I.infoType=l,I.infoTypeName=e,P.value=!1},B=()=>{if(!I.name)return void(new k).showToast("请输入账户名称");(new k).showLoading("提交中");const a={...D(I,"infoTypeName"),bank:"BANK_CARD"==I.infoType?I.bank:"",defaultValue:I.defaultValue||"0"===w.value.list?1:0,prepareInfoId:w.value.id||void 0};uni.$u.http.post(w.value.id?"/product/carProductPrepare/updateInfo":"/product/carProductPrepare/addInfo",a).then((()=>{(new k).showToast("保存成功"),w.value.id&&v("addOrderAccount",a),setTimeout((()=>{C()}),1500)}))};return(a,e)=>{const l=n,t=d(r("up-icon"),c),o=V,k=T,v=d(r("u-switch"),f),C=h,w=d(r("up-picker"),i);return m(),u(l,{class:"page f-c-s"},{default:s((()=>[p(l,{class:"content"},{default:s((()=>[p(l,{class:"form-box"},{default:s((()=>[p(l,{class:"form-item"},{default:s((()=>[p(l,null,{default:s((()=>[b("账户类型")])),_:1}),p(l,{class:"f-b-c",onClick:e[0]||(e[0]=a=>P.value=!0)},{default:s((()=>[p(l,null,{default:s((()=>[b(y(A(I).infoTypeName),1)])),_:1}),p(t,{name:"arrow-right"})])),_:1})])),_:1}),p(l,{class:"form-item"},{default:s((()=>[p(l,null,{default:s((()=>[p(o,null,{default:s((()=>[b("*")])),_:1}),b("账户名称")])),_:1}),p(k,{modelValue:A(I).name,"onUpdate:modelValue":e[1]||(e[1]=a=>A(I).name=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(l,{class:"form-item"},{default:s((()=>[p(l,null,{default:s((()=>[b("账号")])),_:1}),p(k,{modelValue:A(I).account,"onUpdate:modelValue":e[2]||(e[2]=a=>A(I).account=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),"BANK_CARD"==A(I).infoType?(m(),u(l,{key:0,class:"form-item"},{default:s((()=>[p(l,null,{default:s((()=>[b("开户行")])),_:1}),p(k,{modelValue:A(I).bank,"onUpdate:modelValue":e[3]||(e[3]=a=>A(I).bank=a),placeholder:"请输入"},null,8,["modelValue"])])),_:1})):_("",!0)])),_:1}),p(l,{class:"form-box"},{default:s((()=>[p(l,{class:"form-item"},{default:s((()=>[p(l,null,{default:s((()=>[b("设为默认账户")])),_:1}),p(l,{class:"switch"},{default:s((()=>[p(v,{modelValue:A(I).defaultValue,"onUpdate:modelValue":e[4]||(e[4]=a=>A(I).defaultValue=a),activeColor:"#ff4723",inactiveColor:"#DADBDD",space:"1"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),p(l,{class:"bottom-btn"},{default:s((()=>[p(C,{class:"save-btn w_100",onClick:B},{default:s((()=>[b("保存")])),_:1})])),_:1}),p(w,{show:A(P),columns:A(N),title:"请选择账户类型",confirmColor:"#ff4723",closeOnClickOverlay:!0,onCancel:e[5]||(e[5]=a=>P.value=!1),onConfirm:x},null,8,["show","columns"])])),_:1})}}}),[["__scopeId","data-v-f428ec15"]]);export{I as default};
