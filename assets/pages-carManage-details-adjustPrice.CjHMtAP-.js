import{d as e,a9 as a,r as l,B as t,E as s,X as o,Y as u,x as i,c as r,w as d,i as n,I as c,M as p,K as m,o as f,a as h,g as _,h as g,R as P,u as b,n as V,t as v,W as y,Q as w,D as x,a1 as I,s as k,_ as F}from"./index-CK4DGatK.js";import{u as $}from"./useQuery.3dd8K18V.js";import{a as j}from"./index.HDA2F_3Q.js";const M=F(e({__name:"adjustPrice",setup(e){const F=$(),M=a({}),U=l([]);t((()=>{S(),J()})),s((()=>{o("pickData"),u("pickData",(e=>{const{key:a,subKey:l}=e;M[l]=a}))}));const S=()=>{uni.$u.http.get("product/common/getInitSelect").then((e=>{const a=e.data;U.value=a.SalesMethodEnum}))},J=()=>{uni.$u.http.get(`/product/merchant/car/product/adjust/price/${F.value.carProductId}`).then((e=>{Object.assign(M,e.data)}))},O=i((()=>D(U.value,M.salesMethod))),D=(e,a)=>{const l=null==e?void 0:e.filter((e=>e.key==a));return(null==l?void 0:l.length)?l[0].value:"请选择"},K=()=>{const e=(()=>{const{price:e,membershipPrice:a,salesPrice:l,exhibitionPrice:t,managerPrice:s}=M;return e?t?l?a&&e&&parseFloat(a)>parseFloat(e)?"会员价需小于等于网络标价":l&&e&&parseFloat(l)>parseFloat(e)?"销售底价金额需小于等于网络标价":l&&t&&parseFloat(l)>parseFloat(t)?"销售底价金额需小于等于展厅标价":s&&l&&parseFloat(s)>parseFloat(l)?"经理底价金额需小于等于销售底价金额":"":"请填写销售底价":"请填写展厅标价":"请填写网络标价"})();if(e)return void(new x).showToast(e);(new x).showLoading("提交中");const a=JSON.parse(JSON.stringify(M||"{}"));uni.$u.http.put("/product/merchant/car/product/adjust/price",a).then((()=>{(new x).showToast("保存成功"),setTimeout((()=>{I()}),1500)}))},N=(e,a)=>{k((()=>{M[a]=j(e,"wanyuan")}))};return(e,a)=>{const l=g,t=n,s=P,o=c(m("up-icon"),p),u=y;return f(),r(t,{class:"page f-c-s"},{default:d((()=>[h(t,{class:"content"},{default:d((()=>[h(t,{class:"form-box"},{default:d((()=>[h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[h(l,null,{default:d((()=>[_("*")])),_:1}),_("网络标价")])),_:1}),h(s,{modelValue:b(M).price,"onUpdate:modelValue":a[0]||(a[0]=e=>b(M).price=e),type:"digit",placeholder:"请输入",onInput:a[1]||(a[1]=e=>((e,a)=>{N(e.detail.value,a),M.exhibitionPrice=j(M.price,"wanyuan")})(e,"price"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[h(l,null,{default:d((()=>[_("*")])),_:1}),_("展厅标价")])),_:1}),h(s,{modelValue:b(M).exhibitionPrice,"onUpdate:modelValue":a[2]||(a[2]=e=>b(M).exhibitionPrice=e),type:"digit",placeholder:"请输入",onInput:a[3]||(a[3]=e=>N(e.detail.value,"exhibitionPrice"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[h(l,null,{default:d((()=>[_("*")])),_:1}),_("销售底价")])),_:1}),h(s,{modelValue:b(M).salesPrice,"onUpdate:modelValue":a[4]||(a[4]=e=>b(M).salesPrice=e),type:"digit",placeholder:"请输入",onInput:a[5]||(a[5]=e=>N(e.detail.value,"salesPrice"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[_("经理底价")])),_:1}),h(s,{modelValue:b(M).managerPrice,"onUpdate:modelValue":a[6]||(a[6]=e=>b(M).managerPrice=e),type:"digit",placeholder:"请输入",onInput:a[7]||(a[7]=e=>N(e.detail.value,"managerPrice"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[_("批发价")])),_:1}),h(s,{modelValue:b(M).wholesalePrice,"onUpdate:modelValue":a[8]||(a[8]=e=>b(M).wholesalePrice=e),type:"digit",placeholder:"请输入",onInput:a[9]||(a[9]=e=>N(e.detail.value,"wholesalePrice"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[_("会员价")])),_:1}),h(s,{modelValue:b(M).membershipPrice,"onUpdate:modelValue":a[10]||(a[10]=e=>b(M).membershipPrice=e),type:"digit",placeholder:"请输入",onInput:a[11]||(a[11]=e=>N(e.detail.value,"membershipPrice"))},null,8,["modelValue"]),_(" 万元 ")])),_:1}),h(t,{class:"form-item"},{default:d((()=>[h(t,null,{default:d((()=>[_("销售方式")])),_:1}),h(t,{class:"f-b-c",onClick:a[12]||(a[12]=e=>{return a="销售方式",l=b(U),t=b(M).salesMethod,s="salesMethod",void w(`/pages/carManage/pagePicker?title=${a}&list=${JSON.stringify(l)}&key=${t}&subKey=${s}`);var a,l,t,s})},{default:d((()=>[h(l,{class:V({placeholder:"请选择"==b(O)})},{default:d((()=>[_(v(b(O)),1)])),_:1},8,["class"]),h(o,{name:"arrow-right"})])),_:1})])),_:1})])),_:1})])),_:1}),h(t,{class:"bottom-btn"},{default:d((()=>[h(u,{class:"save-btn w_100",onClick:K},{default:d((()=>[_("保存")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ddeb78d4"]]);export{M as default};
