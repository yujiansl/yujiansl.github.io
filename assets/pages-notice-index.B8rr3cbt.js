import{d as e,x as t,I as s,J as a,K as l,c as i,o as c,i as o,w as n,a as d,j as r,g as m,t as u,u as g,h as p,au as f,_,a9 as h,E as v,Z as P,a2 as x,aR as k,$ as w,Q as y,ad as b,P as j}from"./index-CK4DGatK.js";import{u as S,M as C}from"./useLoopFn.BZsIjEvz.js";import{n as F}from"./notice.dYkzXYeO.js";const T=""+new URL("msg-2-CqAcHwVT.png",import.meta.url).href,O=""+new URL("msg-3-BmMmQ4AZ.png",import.meta.url).href,M=_(e({__name:"MsgItem",props:{title:{},count:{},time:{},content:{}},setup(e){const _=e,h=t((()=>_.count?_.content||"":"近期暂无消息"));return(e,t)=>{const _=s(l("up-badge"),a),v=o,P=p;return c(),i(v,{class:"msg-item px-a"},{default:n((()=>[d(v,{class:"msg-left item"},{default:n((()=>[r(e.$slots,"icon",{},void 0,!0),d(v,{class:"badge-box"},{default:n((()=>[e.count&&e.count<=99?(c(),i(_,{key:0,value:e.count,show:!!e.count,max:99},null,8,["value","show"])):(c(),i(_,{key:1,value:"99+",show:!!e.count,max:99},null,8,["show"]))])),_:1})])),_:3}),d(v,{class:"msg-right item"},{default:n((()=>[d(v,{class:"col-center item"},{default:n((()=>[d(v,{class:"title item"},{default:n((()=>[m(u(e.title),1)])),_:1}),d(v,{class:"one-ell item des"},{default:n((()=>[m(u(g(h)),1)])),_:1})])),_:1}),d(v,{class:"time"},{default:n((()=>[d(P,null,{default:n((()=>[m(u(e.time&&g(f)(e.time).format("MM-DD HH:mm")),1)])),_:1})])),_:1})])),_:1})])),_:3})}}}),[["__scopeId","data-v-fe16e9c6"]]),H=_(e({__name:"index",setup(e){const t=h({notice:{},carSeek:{},adjustPrice:{},customerOrder:{},purchase:{},sell:{},carSell:{},renewal:{}}),{start:s,cancel:a}=S((async()=>{var e,s,a,l,i,c,o,n,d,r,m,u,g,p;const f=await w().get(F.getList,{params:{source:"app"}}),_=(f.data.carSeek||[]).filter((e=>!e.readied));t.carSeek={count:_.length,time:null==(e=_[0])?void 0:e.sendTime,content:null==(s=_[0])?void 0:s.title};const h=(f.data.adjustPrice||[]).filter((e=>!e.readied));t.adjustPrice={count:h.length,time:null==(a=h[0])?void 0:a.sendTime,content:null==(l=h[0])?void 0:l.title};const v=(f.data.customerOrder||[]).filter((e=>!e.readied));t.customerOrder={count:v.length,time:null==(i=v[0])?void 0:i.sendTime,content:null==(c=v[0])?void 0:c.title};const P=(f.data.purchase||[]).filter((e=>!e.readied));t.purchase={count:P.length,time:null==(o=P[0])?void 0:o.sendTime,content:null==(n=P[0])?void 0:n.title};const x=(f.data.sell||[]).filter((e=>!e.readied));t.sell={count:x.length,time:null==(d=x[0])?void 0:d.sendTime,content:null==(r=x[0])?void 0:r.title};const k=(f.data.carSell||[]).filter((e=>!e.readied));t.carSell={count:k.length,time:null==(m=k[0])?void 0:m.sendTime,content:null==(u=k[0])?void 0:u.title};const y=(f.data.renewal||[]).filter((e=>!e.readied));t.renewal={count:y.length,time:null==(g=y[0])?void 0:g.sendTime,content:null==(p=y[0])?void 0:p.title}}),{delay:3e4,immediate:!1});return v((async()=>{try{P({title:"加载中"}),Object.keys(t).forEach((e=>t[e]={})),await s()}finally{x()}})),k(a),(e,s)=>{const a=j,l=o;return c(),i(l,{class:"page-box msg"},{default:n((()=>[d(l,{class:"msg-box"},{default:n((()=>[d(l,{class:"msg-item-box",onClick:s[0]||(s[0]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=carSeek"))},{default:n((()=>[d(M,b({title:"车辆消息"},g(t).carSeek),{icon:n((()=>[d(a,{mode:"aspectFill",src:C,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[1]||(s[1]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=adjustPrice"))},{default:n((()=>[d(M,b({title:"车辆调价"},g(t).adjustPrice),{icon:n((()=>[d(a,{mode:"aspectFill",src:T,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[2]||(s[2]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=customerOrder"))},{default:n((()=>[d(M,b({title:"销售订单"},g(t).customerOrder),{icon:n((()=>[d(a,{mode:"aspectFill",src:O,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[3]||(s[3]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=purchase"))},{default:n((()=>[d(M,b({title:"采购订单"},g(t).purchase),{icon:n((()=>[d(a,{mode:"aspectFill",src:C,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[4]||(s[4]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=sell"))},{default:n((()=>[d(M,b({title:"车辆出售"},g(t).sell),{icon:n((()=>[d(a,{mode:"aspectFill",src:C,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[5]||(s[5]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=carSell"))},{default:n((()=>[d(M,b({title:"资料待办"},g(t).carSell),{icon:n((()=>[d(a,{mode:"aspectFill",src:C,class:"msg-icon"})])),_:1},16)])),_:1}),d(l,{class:"msg-item-box",onClick:s[6]||(s[6]=t=>("toPage"in e?e.toPage:g(y))("/pages/notice/list?type=renewal"))},{default:n((()=>[d(M,b({title:"更新通知"},g(t).renewal),{icon:n((()=>[d(a,{mode:"aspectFill",src:T,class:"msg-icon"})])),_:1},16)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a95d01c1"]]);export{H as default};
