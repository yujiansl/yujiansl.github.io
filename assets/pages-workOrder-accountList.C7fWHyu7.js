import{d as a,r as e,E as t,D as o,$ as n,a2 as s,c as u,w as l,i as c,I as d,aq as r,K as i,ah as A,o as f,a as p,g as w,t as k,u as g,a5 as h,b as m,F as C,e as y,P as v,y as I,h as B,S as L,W as P,Q as x,ar as b,a1 as E,_ as T}from"./index-CK4DGatK.js";import{_ as J}from"./checked.CRtZb0Og.js";const Q=T(a({__name:"accountList",setup(a){const T=e([]),Q=e(null),U=e(!1),W=e(!1),_=e(""),D=e([]),R=[{name:"编辑",code:1},{name:"删除",code:2}];async function q(){(new o).showLoading("加载中");try{const a=await n().get("/product/carProductPrepare/getPrepareInfo",{params:{prepareInfo:"BANK_CARD"}});T.value=a.data,Q.value=T.value.findIndex((a=>a.defaultValue))}finally{s()}}t((()=>{q()}));const K=a=>{const{id:e,name:t,infoType:n,defaultValue:s}=_.value;1==a.code?x(`/pages/workOrder/addAccount?id=${e}`):2==a.code?W.value=!0:3==a.code&&((new o).showLoading("设置中"),uni.$u.http.post("/product/carProductPrepare/updateInfo",{prepareInfoId:e,name:t,infoType:n,defaultValue:1==s?0:1}).then((()=>{(new o).showToast("设置成功"),q()})))},O=()=>{(new o).showLoading("提交中"),uni.$u.http.delete(`/product/carProductPrepare/prepareInfo?idList=${[_.value.id]}&prepareInfo=${_.value.infoType}`).then((()=>{(new o).showToast("删除成功"),W.value=!1,q()}))},V=()=>{const{id:a,account:e,bank:t,infoType:o,name:n}=T.value[Q.value];b("checkAccount",{id:a,account:e,bank:t,infoType:o,name:n}),E()};return(a,e)=>{const t=c,o=v,n=B,s=h,b=P,E=d(i("up-action-sheet"),r),q=d(i("u-modal"),A);return f(),u(t,{class:"page"},{default:l((()=>[p(t,{class:"total"},{default:l((()=>[w("共"+k(g(T).length)+"个收款人",1)])),_:1}),p(s,{"scroll-y":""},{default:l((()=>[(f(!0),m(C,null,y(g(T),((a,e)=>(f(),u(t,{key:e,class:"list-item",onClick:a=>Q.value=e},{default:l((()=>[p(o,{src:g(Q)===e?g(J):g("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAAAXNSR0IArs4c6QAAA9tJREFUWEftll9oHFUUxr8zs5ttqrFpbGkRxEoVDf6hKi2mqIg1vqmoGBEha3Zn5t51yYN/iiLqi4pQraB0u3N3ZrqkTxrQ0hZfLBWkRVpEKFqkfRAjohRsVouVpruZe2RMomHdndmNhSL0vt5zvu83555z5xIu8qKL7I9LAP+vCpSq1bWpeninBh4nwkYA6wCkAUwx4Qsw9mdSxsFcLvdLp73VUQUmJiaunJmpPwPDeIWZezoQf683k349m81OJ8UmArhuMATSn4BoJQAN8DEi46PZut6zevWK7yKDU7XaYI+RGgbjCQZvIKIUgLPExv1C5I7GQcQCuF4wCuaJOQE+Bm0+JWXu2zhB3/evCzU+YOCOv+KIstLO726X0xZAqeAuJj40/9UV6diFpHIu3i8rbycRCQCGSbzFtu3PWuW3BCiVSpeb6czPAPoAvCUd6+VuzBdi3Yq/HcBzBJyebZy/tlgsnm3WaQngKk+ByAHosHTydy/FfCGnXPEOEug+ArYJx3oxEUAptYrJjMZIQ8/eIqWMPfMkuHLZv41MfAWgThyuEUKcWZzzrwooLygy8w4wfyyF/ViSQSf7bsX/FMAwiCxp54NYgLLy9xLhIRBnpW237d5OjP/uhflpYmBfwbEejgVwK8H3AK9rcDg4LsSJbozaxe4MghuMkE8w42RBWDcmAPgcBWTSZu/Y2NjMhQCoVqvLzjfCcwTMCMfq7QhAOlbiLdkNnFuZ+7Bm3RZN6P/KjH7isL+5Y7sxXBzred6akOkUgDPSsfqTKhDd3ZtA/IC07QNLNV2c57r+PTDwOYO/LDj2pvgp8IJ3iPl5AG9Ix3r1ggAobxuIthKwQzjWeHwFXG8YBkVz+5t0rOgP+J+X8vyfmHGVSTxk2/aRWABmJtfzjxJoIzG/IIQd3edLXmXlP0uEd8E4ObDyiptGRkbCWIBo0/X9B6GxL/qnc4ihQsE6vhSCctm/mUxEPbWcoR8tOM6eZp22o1au+FUCngbjx5SJDZZl1bqBKJWqa410eISAawDeLR072yq/LUAQBH31kA8TcCszpskwn5T2WEdTUans2qyh9wJYxcDXly3r2Tw6OvpHVwBRcPQWPFdvfAjGFgANEA40dPjSuBDftBJTatftmvhtsL6XiAwGH1qe6Xkk7m2YeNsppdIwUluZ+c1/TGkK4Ckw5o6FuB9E14Nx9XxMg5lfM6C3CyEacUeXCLCQrJRar5HKEXERwIo2oqcBBGmT3s/n89GLKnF1DLCgNDk52VOr/T4I6PWUogFmDg02prXGDwMDfcebxyyJoGuAJMFu9y8B/AmDboExQufoiwAAAABJRU5ErkJggg==")},null,8,["src"]),p(t,null,{default:l((()=>[p(t,{class:"name"},{default:l((()=>[p(t,null,{default:l((()=>[p(n,null,{default:l((()=>[w(k(a.name),1)])),_:2},1024),a.defaultValue?(f(),u(n,{key:0},{default:l((()=>[w("默认")])),_:1})):I("",!0)])),_:2},1024),p(t,{onClick:L((e=>(a=>{D.value=[...R,{name:a.defaultValue?"取消默认收款人":"设置默认收款人",code:3}],U.value=!0,_.value=a})(a)),["stop"])},{default:l((()=>[w("设置")])),_:2},1032,["onClick"])])),_:2},1024),p(t,null,{default:l((()=>[w(k(a.account||"-"),1)])),_:2},1024),"BANK_CARD"==a.infoType?(f(),u(t,{key:0,class:"bank"},{default:l((()=>[p(o,{src:"./static/workOrder/card.png"}),w(k(a.bank||"-"),1)])),_:2},1024)):I("",!0),"ALIPAY"==a.infoType?(f(),u(t,{key:1,class:"bank"},{default:l((()=>[p(o,{src:"./static/workOrder/alipay.png"}),w("支付宝")])),_:1})):I("",!0),"WECHAT"==a.infoType?(f(),u(t,{key:2,class:"bank"},{default:l((()=>[p(o,{src:"./static/workOrder/wechat.png"}),w("微信")])),_:1})):I("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),p(t,{class:"bottom-btn"},{default:l((()=>[p(b,{onClick:e[0]||(e[0]=e=>("toPage"in a?a.toPage:g(x))(`/pages/workOrder/addAccount?list=${g(T).length}`))},{default:l((()=>[w("添加账户")])),_:1}),p(b,{class:"save-btn",onClick:V},{default:l((()=>[w("确定选择")])),_:1})])),_:1}),p(E,{show:g(U),onClose:e[1]||(e[1]=a=>U.value=!1),actions:g(D),description:"设置收款人",cancelText:"取消",onSelect:K},null,8,["show","actions"]),p(q,{show:g(W),showCancelButton:!0,width:"500rpx",title:"提示",content:"确定执行删除操作？",confirmColor:"#ff5719",onCancel:e[2]||(e[2]=a=>W.value=!1),onConfirm:O},null,8,["show"])])),_:1})}}}),[["__scopeId","data-v-de89c9aa"]]);export{Q as default};
