import{d as e,c as a,o as t,i as l,w as c,y as s,a as n,S as u,P as i,h as r,g as f,t as b,I as d,M as o,K as h,L as m,u as k,Q as p,_,r as y,a9 as g,q as D,Z as v,$ as w,a2 as x,x as C,ad as M,O as T,T as I,b as S,e as B,F as Y,a0 as U,b8 as $,ac as N,bX as A,bY as L,n as F,aF as E,a7 as O,au as j,X as R,Y as q,aK as W,E as z,am as G}from"./index-CK4DGatK.js";import{L as Z}from"./ListLoadRefreshView.CnNC2lkG.js";import{c as H}from"./callPhone.KEQUzljZ.js";import{c as P}from"./crm.-ZWUD7KR.js";import{o as J}from"./omit.DzeQdT5l.js";import"./_baseGet.CmhOSbYr.js";import"./_getTag.DG-N9UUn.js";import"./isObject.C8HfsiHw.js";import"./isSymbol.Bym6OQCA.js";import"./_Uint8Array.B4mhORiM.js";import"./_baseClone.Cc-Y92km.js";const V=_(e({__name:"listItem0",props:{item:{},isBatch:{type:Boolean,default:!1}},emits:["checked"],setup(e,{emit:_}){const y=e,g=_,D=()=>{const e=`?clueId=${y.item.crmClueId}&clueType=${y.item.clueType}&customerId=${y.item.crmCustomerId}`;0===y.item.clueType?p(`/pagesB/crmManage/components/buy/addFollow${e}`):p(`/pagesB/crmManage/components/sell/addFollow${e}`)};return(e,p)=>{const _=i,y=l,v=r,w=d(h("up-icon"),o),x=d(h("up-line"),m);return t(),a(y,{class:"list-item"},{default:c((()=>[e.isBatch?(t(),a(y,{key:0,onClick:p[0]||(p[0]=u((a=>{return(t=e.item).checked=!t.checked,void g("checked",t,t.checked);var t}),["stop"]))},{default:c((()=>[n(_,{class:"img",src:e.item.checked?"/static/carManage/checked.png":"/static/carManage/check.png"},null,8,["src"])])),_:1})):s("",!0),n(y,{class:"right"},{default:c((()=>[n(y,{class:"title-box"},{default:c((()=>[n(y,{class:"title-item"},{default:c((()=>[n(v,{class:"left-status"},{default:c((()=>[f(b(e.item.intentionCode),1)])),_:1}),n(v,{class:"name"},{default:c((()=>[f(b(`${e.item.name||""}-${e.item.phone||""}`),1)])),_:1})])),_:1}),e.item.waitTime?(t(),a(y,{key:0,class:"item-right"},{default:c((()=>[f("已等待："+b(e.item.waitTime),1)])),_:1})):s("",!0)])),_:1}),n(y,{class:"info-box"},{default:c((()=>[f(" 来源："+b(e.item.mainSource||"未知"),1)])),_:1}),n(y,{class:"info-box"},{default:c((()=>[f(" 意向车系："+b(e.item.carSeries||"--"),1)])),_:1}),e.isBatch?s("",!0):(t(),a(y,{key:0,class:"footer-box"},{default:c((()=>[n(y,{class:"call",onClick:p[1]||(p[1]=u((a=>("callPhone"in e?e.callPhone:k(H))(e.item.phone)),["stop"]))},{default:c((()=>[n(w,{name:"phone",size:"18"}),n(v,null,{default:c((()=>[f("电话")])),_:1})])),_:1}),n(y,null,{default:c((()=>[n(x,{direction:"col"})])),_:1}),n(y,{class:"follow",onClick:u(D,["stop"])},{default:c((()=>[f(" 跟进 ")])),_:1})])),_:1}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-d02aee30"]]),K=_(e({__name:"card0",setup(e){A((e=>({"2921a214":k(G)})));const r=y([]),o=y(),m=g({current:1,size:10,total:0});async function p(){var e,a;v({title:"加载中",mask:!0});try{const e={...J(m,"total")},a=await w().get(P.getNewCustomerList,{params:e});m.total=a.data.count;const t=a.data.results.map((e=>({...e,checked:j.value})));r.value=1===m.current?t:[...r.value,...t]}finally{1==m.current&&(null==(e=o.value)||e.initTop()),null==(a=o.value)||a.loadFinish(),x()}}D((()=>{p()}));const _=()=>{m.current=1,p()},L=()=>{m.current++,p()},F=y([]),E=y(!1),O=y(!1),j=y(!1),R=()=>{O.value=!1,E.value=!E.value,j.value=!1,F.value=[],r.value=r.value.map((e=>({...e,checked:j.value})))},q=()=>{j.value=!j.value,r.value=r.value.map((e=>({...e,checked:j.value}))),F.value=j.value?r.value:[]},W=(e,a)=>{a?F.value.push(e):F.value=F.value.filter((a=>a.clueId!==e.clueId)),j.value=F.value.length===r.value.length},z=()=>{var e;if(!(null==(e=F.value)?void 0:e.length))return U({title:"请先勾选数据",icon:"none"})},G=C((()=>E.value?"100rpx":"32rpx"));return(e,p)=>{const y=l,g=i,D=d(h("u-empty"),$),v=d(h("u-popup"),N);return t(),a(y,{class:"page f-c-s"},{default:c((()=>[n(y,{class:"total"},{default:c((()=>[n(y,null,{default:c((()=>[f("共找到"+b(k(m).total)+"个任务",1)])),_:1})])),_:1}),k(E)?(t(),a(y,{key:0,class:"total"},{default:c((()=>[n(y,{class:"checked",onClick:u(q,["stop"])},{default:c((()=>[n(g,{class:"img",src:k(F).length===k(m).total?"/static/carManage/checked.png":k(F).length?"/static/carManage/halfcheck.png":"/static/carManage/check.png"},null,8,["src"]),f(" 全选 ( "+b(k(F).length)+"/"+b(k(m).total)+" ) ",1)])),_:1}),n(y,{class:"handle-btn"},{default:c((()=>[n(y,{onClick:R},{default:c((()=>[f("取消操作")])),_:1})])),_:1})])),_:1})):s("",!0),k(m).total?(t(),a(Z,M({key:1,ref_key:"listLoadRef",ref:o,class:"scroll-view-box"},k(m),{istop:!1,onLoadMore:L,onLoadRefresh:_}),{default:c((()=>[T(n(y,{class:"list-box"},{default:c((()=>[(t(!0),S(Y,null,B(k(r),((e,l)=>(t(),a(V,{key:l,item:e,status:k(m).reqStatus,isBatch:k(E),onChecked:W,onClick:e=>{}},null,8,["item","status","isBatch","onClick"])))),128))])),_:1},512),[[I,k(r).length]])])),_:1},16)):(t(),a(D,{key:2,mode:"list",text:"暂无数据"})),n(v,{overlay:!1,mode:"bottom",round:20,closeOnClickOverlay:!0,show:k(O),onClose:p[0]||(p[0]=e=>O.value=!1)},{default:c((()=>[n(y,{class:"action-box"},{default:c((()=>[n(y,{onClick:z},{default:c((()=>[f("批量不跟进")])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-246ce3a0"]]);var X={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],Gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],sTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],lYearDays:function(e){var a,t=348;for(a=32768;a>8;a>>=1)t+=this.lunarInfo[e-1900]&a?1:0;return t+this.leapDays(e)},leapMonth:function(e){return 15&this.lunarInfo[e-1900]},leapDays:function(e){return this.leapMonth(e)?65536&this.lunarInfo[e-1900]?30:29:0},monthDays:function(e,a){return a>12||a<1?-1:this.lunarInfo[e-1900]&65536>>a?30:29},solarDays:function(e,a){if(a>12||a<1)return-1;var t=a-1;return 1==t?e%4==0&&e%100!=0||e%400==0?29:28:this.solarMonth[t]},toGanZhiYear:function(e){var a=(e-3)%10,t=(e-3)%12;return 0==a&&(a=10),0==t&&(t=12),this.Gan[a-1]+this.Zhi[t-1]},toAstro:function(e,a){return"魔羯水瓶双鱼白羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯".substr(2*e-(a<[20,19,21,21,21,22,23,23,23,23,22,22][e-1]?2:0),2)+"座"},toGanZhi:function(e){return this.Gan[e%10]+this.Zhi[e%12]},getTerm:function(e,a){if(e<1900||e>2100)return-1;if(a<1||a>24)return-1;var t=this.sTermInfo[e-1900],l=[parseInt("0x"+t.substr(0,5)).toString(),parseInt("0x"+t.substr(5,5)).toString(),parseInt("0x"+t.substr(10,5)).toString(),parseInt("0x"+t.substr(15,5)).toString(),parseInt("0x"+t.substr(20,5)).toString(),parseInt("0x"+t.substr(25,5)).toString()],c=[l[0].substr(0,1),l[0].substr(1,2),l[0].substr(3,1),l[0].substr(4,2),l[1].substr(0,1),l[1].substr(1,2),l[1].substr(3,1),l[1].substr(4,2),l[2].substr(0,1),l[2].substr(1,2),l[2].substr(3,1),l[2].substr(4,2),l[3].substr(0,1),l[3].substr(1,2),l[3].substr(3,1),l[3].substr(4,2),l[4].substr(0,1),l[4].substr(1,2),l[4].substr(3,1),l[4].substr(4,2),l[5].substr(0,1),l[5].substr(1,2),l[5].substr(3,1),l[5].substr(4,2)];return parseInt(c[a-1])},toChinaMonth:function(e){if(e>12||e<1)return-1;var a=this.nStr3[e-1];return a+="月"},toChinaDay:function(e){var a;switch(e){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=this.nStr2[Math.floor(e/10)],a+=this.nStr1[e%10]}return a},getAnimal:function(e){return this.Animals[(e-4)%12]},solar2lunar:function(e,a,t){if(e<1900||e>2100)return-1;if(1900==e&&1==a&&t<31)return-1;if(e)l=new Date(e,parseInt(a)-1,t);else var l=new Date;var c,s=0,n=(e=l.getFullYear(),a=l.getMonth()+1,t=l.getDate(),(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())-Date.UTC(1900,0,31))/864e5);for(c=1900;c<2101&&n>0;c++)n-=s=this.lYearDays(c);n<0&&(n+=s,c--);var u=new Date,i=!1;u.getFullYear()==e&&u.getMonth()+1==a&&u.getDate()==t&&(i=!0);var r=l.getDay(),f=this.nStr1[r];0==r&&(r=7);var b=c,d=this.leapMonth(c),o=!1;for(c=1;c<13&&n>0;c++)d>0&&c==d+1&&0==o?(--c,o=!0,s=this.leapDays(b)):s=this.monthDays(b,c),1==o&&c==d+1&&(o=!1),n-=s;0==n&&d>0&&c==d+1&&(o?o=!1:(o=!0,--c)),n<0&&(n+=s,--c);var h=c,m=n+1,k=a-1,p=this.toGanZhiYear(b),_=this.getTerm(e,2*a-1),y=this.getTerm(e,2*a),g=this.toGanZhi(12*(e-1900)+a+11);t>=_&&(g=this.toGanZhi(12*(e-1900)+a+12));var D=!1,v=null;_==t&&(D=!0,v=this.solarTerm[2*a-2]),y==t&&(D=!0,v=this.solarTerm[2*a-1]);var w=Date.UTC(e,k,1,0,0,0,0)/864e5+25567+10,x=this.toGanZhi(w+t-1),C=this.toAstro(a,t);return{lYear:b,lMonth:h,lDay:m,Animal:this.getAnimal(b),IMonthCn:(o?"闰":"")+this.toChinaMonth(h),IDayCn:this.toChinaDay(m),cYear:e,cMonth:a,cDay:t,gzYear:p,gzMonth:g,gzDay:x,isToday:i,isLeap:o,nWeek:r,ncWeek:"星期"+f,isTerm:D,Term:v,astro:C}},lunar2solar:function(e,a,t,l){l=!!l;var c=this.leapMonth(e);if(this.leapDays(e),l&&c!=a)return-1;if(2100==e&&12==a&&t>1||1900==e&&1==a&&t<31)return-1;var s=this.monthDays(e,a),n=s;if(l&&(n=this.leapDays(e,a)),e<1900||e>2100||t>n)return-1;for(var u=0,i=1900;i<e;i++)u+=this.lYearDays(i);var r=0,f=!1;for(i=1;i<a;i++)r=this.leapMonth(e),f||r<=i&&r>0&&(u+=this.leapDays(e),f=!0),u+=this.monthDays(e,i);l&&(u+=s);var b=Date.UTC(1900,1,30,0,0,0),d=new Date(864e5*(u+t-31)+b),o=d.getUTCFullYear(),h=d.getUTCMonth()+1,m=d.getUTCDate();return this.solar2lunar(o,h,m)}};class Q{constructor({date:e,selected:a,startDate:t,endDate:l,range:c,onlyCurweek:s}={}){this.date=this.getDate(new Date),this.selected=a||[],this.startDate=t,this.endDate=l,this.range=c,this.onlyCurweek=s,this.cleanMultipleStatus(),this.weeks={}}setDate(e){this.selectDate=this.getDate(e),this._getWeek(this.selectDate.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}resetSatrtDate(e){this.startDate=e}resetEndDate(e){this.endDate=e}getDate(e,a=0,t="day"){e||(e=new Date),"object"!=typeof e&&(e=e.replace(/-/g,"/"));const l=new Date(e);switch(t){case"day":l.setDate(l.getDate()+a);break;case"month":if(31===l.getDate()&&a>0)l.setDate(l.getDate()+a);else{const e=l.getMonth();l.setMonth(e+a);const t=l.getMonth();a<0&&0!==e&&t-e>a&&l.setMonth(t+(t-e+a)),a>0&&t-e>a&&l.setMonth(t-(t-e-a))}break;case"year":l.setFullYear(l.getFullYear()+a)}const c=l.getFullYear(),s=l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1,n=l.getDate()<10?"0"+l.getDate():l.getDate();return{fullDate:c+"-"+s+"-"+n,year:c,month:s,date:n,day:l.getDay()}}_getLastMonthDays(e,a){let t=[];for(let l=e;l>0;l--){const e=new Date(a.year,a.month-1,1-l).getDate();t.push({date:e,month:a.month-1,lunar:this.getlunar(a.year,a.month-1,e),disable:!0})}return t}_currentMonthDys(e,a){let t=[],l=this.date.fullDate;for(let c=1;c<=e;c++){let e=a.year+"-"+(a.month,a.month+"-")+(c<10?"0"+c:c),s=l===e,n=this.selected&&this.selected.find((a=>{if(this.dateEqual(e,a.date))return a})),u=!0,i=!0;this.startDate&&(u=this.dateCompare(this.startDate,e)),this.endDate&&(i=this.dateCompare(e,this.endDate));let r=this.multipleStatus.data,f=!1,b=-1;this.range&&(r&&(b=r.findIndex((a=>this.dateEqual(a,e)))),-1!==b&&(f=!0));let d={fullDate:e,year:a.year,date:c,multiple:!!this.range&&f,beforeMultiple:this.dateEqual(this.multipleStatus.before,e),afterMultiple:this.dateEqual(this.multipleStatus.after,e),month:a.month,lunar:this.getlunar(a.year,a.month,c),disable:!(u&&i),isDay:s};n&&(d.extraInfo=n),t.push(d)}return t}_getNextMonthDays(e,a){let t=[];for(let l=1;l<e+1;l++)t.push({date:l,month:Number(a.month)+1,lunar:this.getlunar(a.year,Number(a.month)+1,l),disable:!0});return t}getInfo(e){e||(e=new Date);return this.canlender.find((a=>a.fullDate===this.getDate(e).fullDate))}dateCompare(e,a){return(e=new Date(e.replace("-","/").replace("-","/")))<=(a=new Date(a.replace("-","/").replace("-","/")))}dateEqual(e,a){return e=new Date(e.replace("-","/").replace("-","/")),a=new Date(a.replace("-","/").replace("-","/")),e.getTime()-a.getTime()==0}geDateAll(e,a){var t=[],l=e.split("-"),c=a.split("-"),s=new Date;s.setFullYear(l[0],l[1]-1,l[2]);var n=new Date;n.setFullYear(c[0],c[1]-1,c[2]);for(var u=s.getTime()-864e5,i=n.getTime()-864e5,r=u;r<=i;)r+=864e5,t.push(this.getDate(new Date(parseInt(r))).fullDate);return t}getlunar(e,a,t){return X.solar2lunar(e,a,t)}setSelectInfo(e,a){this.selected=a,this._getWeek(e)}setMultiple(e){let{before:a,after:t}=this.multipleStatus;this.range&&(a&&t?(this.multipleStatus.before="",this.multipleStatus.after="",this.multipleStatus.data=[]):a?(this.multipleStatus.after=e,this.dateCompare(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this._getWeek(e))}_getWeek(e){const{year:a,month:t}=this.getDate(e);let l=new Date(a,t-1,1).getDay(),c=new Date(a,t,0).getDate(),s={lastMonthDays:this._getLastMonthDays(l,this.getDate(e)),currentMonthDys:this._currentMonthDys(c,this.getDate(e)),nextMonthDays:[]},n=[];const u=42-(s.lastMonthDays.length+s.currentMonthDys.length);s.nextMonthDays=this._getNextMonthDays(u,this.getDate(e)),n=n.concat(s.lastMonthDays,s.currentMonthDys,s.nextMonthDays);let i={};for(let f=0;f<n.length;f++)f%7==0&&(i[parseInt(f/7)]=new Array(7)),i[parseInt(f/7)][f%7]=n[f];const r=Object.values(i).find((e=>e.some((e=>e.fullDate===this.getDate(new Date).fullDate))))||i[0];this.canlender=n,this.weeks=this.onlyCurweek?[r]:i}}const ee={en:{"uni-calender.ok":"ok","uni-calender.cancel":"cancel","uni-calender.today":"today","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN"},"zh-Hans":{"uni-calender.ok":"确定","uni-calender.cancel":"取消","uni-calender.today":"今日","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六"},"zh-Hant":{"uni-calender.ok":"確定","uni-calender.cancel":"取消","uni-calender.today":"今日","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六"}},{t:ae}=L(ee);const te=_({emits:["change"],props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1}},computed:{todayText:()=>ae("uni-calender.today")},methods:{choiceDate(e){this.$emit("change",e)}}},[["render",function(e,u,i,d,o,h){const m=r,k=l;return t(),a(k,{class:F(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":i.weeks.disable,"uni-calendar-item--isDay":i.calendar.fullDate===i.weeks.fullDate&&i.weeks.isDay,"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&!i.weeks.isDay,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple}]),onClick:u[0]||(u[0]=e=>h.choiceDate(i.weeks))},{default:c((()=>[n(k,{class:"uni-calendar-item__weeks-box-item"},{default:c((()=>[i.selected&&i.weeks.extraInfo&&"mark"!==i.weeks.extraInfo.mode?(t(),a(m,{key:0,class:"uni-calendar-item__weeks-box-circle"})):s("",!0),i.selected&&i.weeks.extraInfo&&"mark"===i.weeks.extraInfo.mode&&i.weeks.extraInfo.num?(t(),a(m,{key:1,class:"uni-calendar-item__weeks-box-mark"},{default:c((()=>[n(m,null,{default:c((()=>[f(b(i.weeks.extraInfo.num>i.weeks.extraInfo.max?i.weeks.extraInfo.max:i.weeks.extraInfo.num),1)])),_:1}),i.weeks.extraInfo.num>i.weeks.extraInfo.max?(t(),a(m,{key:0},{default:c((()=>[f("+")])),_:1})):s("",!0)])),_:1})):s("",!0),n(m,{class:F(["uni-calendar-item__weeks-box-text",{"uni-calendar-item--isDay-text":i.weeks.isDay,"uni-calendar-item--isDay":i.calendar.fullDate===i.weeks.fullDate&&i.weeks.isDay,"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&!i.weeks.isDay,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},{default:c((()=>[f(b(i.weeks.date),1)])),_:1},8,["class"]),i.lunar||i.weeks.extraInfo||!i.weeks.isDay?s("",!0):(t(),a(m,{key:2,class:F(["uni-calendar-item__weeks-lunar-text",{"uni-calendar-item--isDay-text":i.weeks.isDay,"uni-calendar-item--isDay":i.calendar.fullDate===i.weeks.fullDate&&i.weeks.isDay,"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&!i.weeks.isDay,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple}])},{default:c((()=>[f(b(h.todayText),1)])),_:1},8,["class"])),i.lunar&&!i.weeks.extraInfo?(t(),a(m,{key:3,class:F(["uni-calendar-item__weeks-lunar-text",{"uni-calendar-item--isDay-text":i.weeks.isDay,"uni-calendar-item--isDay":i.calendar.fullDate===i.weeks.fullDate&&i.weeks.isDay,"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&!i.weeks.isDay,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},{default:c((()=>[f(b(i.weeks.isDay?h.todayText:"初一"===i.weeks.lunar.IDayCn?i.weeks.lunar.IMonthCn:i.weeks.lunar.IDayCn),1)])),_:1},8,["class"])):s("",!0),i.weeks.extraInfo&&i.weeks.extraInfo.info?(t(),a(m,{key:4,class:F(["uni-calendar-item__weeks-lunar-text",{"uni-calendar-item--extra":i.weeks.extraInfo.info,"uni-calendar-item--isDay-text":i.weeks.isDay,"uni-calendar-item--isDay":i.calendar.fullDate===i.weeks.fullDate&&i.weeks.isDay,"uni-calendar-item--checked":i.calendar.fullDate===i.weeks.fullDate&&!i.weeks.isDay,"uni-calendar-item--before-checked":i.weeks.beforeMultiple,"uni-calendar-item--multiple":i.weeks.multiple,"uni-calendar-item--after-checked":i.weeks.afterMultiple,"uni-calendar-item--disable":i.weeks.disable}])},{default:c((()=>[f(b(i.weeks.extraInfo.info),1)])),_:1},8,["class"])):s("",!0)])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-39452853"]]),{t:le}=L(ee);const ce=_({components:{CalendarItem:te},emits:["close","confirm","change","monthSwitch"],props:{date:{type:String,default:""},selected:{type:Array,default:()=>[]},lunar:{type:Boolean,default:!1},startDate:{type:String,default:""},endDate:{type:String,default:""},range:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},onlyCurweek:{type:Boolean,default:!1}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:"",aniMaskShow:!1}),computed:{okText:()=>le("uni-calender.ok"),cancelText:()=>le("uni-calender.cancel"),todayText:()=>le("uni-calender.today"),monText:()=>le("uni-calender.MON"),TUEText:()=>le("uni-calender.TUE"),WEDText:()=>le("uni-calender.WED"),THUText:()=>le("uni-calender.THU"),FRIText:()=>le("uni-calender.FRI"),SATText:()=>le("uni-calender.SAT"),SUNText:()=>le("uni-calender.SUN")},watch:{date(e){this.init(e)},startDate(e){this.cale.resetSatrtDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},endDate(e){this.cale.resetEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks},selected(e){this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks}},created(){this.cale=new Q({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range,onlyCurweek:this.onlyCurweek}),this.init(this.date)},methods:{clean(){},bindDateChange(e){if(this.onlyCurweek)return;const a=e.detail.value+"-1";this.setDate(a);const{year:t,month:l}=this.cale.getDate(a);this.$emit("monthSwitch",{year:t,month:l})},init(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.calendar=this.cale.getInfo(e)},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(){this.insert&&this.setEmit("change")},monthSwitch(){let{year:e,month:a}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(a)})},setEmit(e){let{year:a,month:t,date:l,fullDate:c,lunar:s,extraInfo:n}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:a,month:t,date:l,fulldate:c,lunar:s,extraInfo:n||{}})},choiceDate(e){e.disable||(this.calendar=e,this.cale.setMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.change())},backToday(){const e=`${this.nowDate.year}-${this.nowDate.month}`,a=this.cale.getDate(new Date),t=`${a.year}-${a.month}`;this.init(a.fullDate),e!==t&&this.monthSwitch(),this.change()},pre(){const e=this.cale.getDate(this.nowDate.fullDate,-1,"month").fullDate;this.setDate(e),this.monthSwitch()},next(){const e=this.cale.getDate(this.nowDate.fullDate,1,"month").fullDate;this.setDate(e),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}},[["render",function(e,i,d,o,h,m){const k=l,p=r,_=O,y=E("calendar-item");return t(),a(k,{class:"uni-calendar"},{default:c((()=>[!d.insert&&h.show?(t(),a(k,{key:0,class:F(["uni-calendar__mask",{"uni-calendar--mask-show":h.aniMaskShow}]),onClick:m.clean},null,8,["class","onClick"])):s("",!0),d.insert||h.show?(t(),a(k,{key:1,class:F(["uni-calendar__content",{"uni-calendar--fixed":!d.insert,"uni-calendar--ani-show":h.aniMaskShow}])},{default:c((()=>[d.insert?s("",!0):(t(),a(k,{key:0,class:"uni-calendar__header uni-calendar--fixed-top"},{default:c((()=>[n(k,{class:"uni-calendar__header-btn-box",onClick:m.close},{default:c((()=>[n(p,{class:"uni-calendar__header-text uni-calendar--fixed-width"},{default:c((()=>[f(b(m.cancelText),1)])),_:1})])),_:1},8,["onClick"]),n(k,{class:"uni-calendar__header-btn-box",onClick:m.confirm},{default:c((()=>[n(p,{class:"uni-calendar__header-text uni-calendar--fixed-width"},{default:c((()=>[f(b(m.okText),1)])),_:1})])),_:1},8,["onClick"])])),_:1})),n(k,{class:"uni-calendar__header"},{default:c((()=>[d.onlyCurweek?s("",!0):(t(),a(k,{key:0,class:"uni-calendar__header-btn-box",onClick:u(m.pre,["stop"])},{default:c((()=>[n(k,{class:"uni-calendar__header-btn uni-calendar--left"})])),_:1},8,["onClick"])),n(_,{mode:"date",value:d.date,fields:"month",onChange:m.bindDateChange},{default:c((()=>[n(p,{class:"uni-calendar__header-text"},{default:c((()=>[f(b((h.nowDate.year||"")+" / "+(h.nowDate.month||"")),1)])),_:1})])),_:1},8,["value","onChange"]),d.onlyCurweek?s("",!0):(t(),a(k,{key:1,class:"uni-calendar__header-btn-box",onClick:u(m.next,["stop"])},{default:c((()=>[n(k,{class:"uni-calendar__header-btn uni-calendar--right"})])),_:1},8,["onClick"])),n(p,{class:"uni-calendar__backtoday",onClick:m.backToday},{default:c((()=>[f(b(m.todayText),1)])),_:1},8,["onClick"])])),_:1}),n(k,{class:"uni-calendar__box"},{default:c((()=>[d.showMonth?(t(),a(k,{key:0,class:"uni-calendar__box-bg"},{default:c((()=>[n(p,{class:"uni-calendar__box-bg-text"},{default:c((()=>[f(b(h.nowDate.month),1)])),_:1})])),_:1})):s("",!0),n(k,{class:"uni-calendar__weeks"},{default:c((()=>[n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.SUNText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.monText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.TUEText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.WEDText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.THUText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.FRIText),1)])),_:1})])),_:1}),n(k,{class:"uni-calendar__weeks-day"},{default:c((()=>[n(p,{class:"uni-calendar__weeks-day-text"},{default:c((()=>[f(b(m.SATText),1)])),_:1})])),_:1})])),_:1}),(t(!0),S(Y,null,B(h.weeks,((e,l)=>(t(),a(k,{class:"uni-calendar__weeks",key:l},{default:c((()=>[(t(!0),S(Y,null,B(e,((e,l)=>(t(),a(k,{class:"uni-calendar__weeks-item",key:l},{default:c((()=>[n(y,{class:"uni-calendar-item--hook",weeks:e,calendar:h.calendar,selected:d.selected,lunar:d.lunar,onChange:m.choiceDate},null,8,["weeks","calendar","selected","lunar","onChange"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})])),_:1},8,["class"])):s("",!0)])),_:1})}],["__scopeId","data-v-3a9d2d19"]]),se=_(e({__name:"calendarView",props:{selected:{default:()=>[]},date:{default:j().format("YYYY-MM-DD")}},emits:["change"],setup(e,{emit:s}){const u=e,i=s,r=y(!0),m=()=>{r.value=!r.value},p=e=>{i("change",e.fulldate)};return(e,s)=>{const i=d(h("up-icon"),o),_=l;return t(),S(Y,null,[(t(),a(ce,{onlyCurweek:k(r),selected:u.selected,date:u.date,onChange:p,key:k(r)},null,8,["onlyCurweek","selected","date"])),n(_,{class:"action-btn-box"},{default:c((()=>[n(_,{class:"btn-item",onClick:m},{default:c((()=>[n(i,{name:k(r)?"arrow-down":"arrow-up",size:"14"},null,8,["name"]),n(_,null,{default:c((()=>[f(b(k(r)?"展开":"收起"),1)])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-216c5352"]]),ne=_(e({__name:"listItem1",props:{item:{},isBatch:{type:Boolean,default:!1}},emits:["checked"],setup(e,{emit:_}){const y=e,g=_,D=C((()=>["暂无跟进计划","已逾期"].includes(y.item.followUpTime)?"no-plan":"other-plan")),v=()=>{const e=`?clueId=${y.item.crmClueId}&clueType=${y.item.clueType}&customerId=${y.item.crmCustomerId}`;0===y.item.clueType?p(`/pagesB/crmManage/components/buy/addFollow${e}`):p(`/pagesB/crmManage/components/sell/addFollow${e}`)};return(e,p)=>{const _=i,y=l,w=r,x=d(h("up-icon"),o),C=d(h("up-line"),m);return t(),a(y,{class:"list-item"},{default:c((()=>[e.isBatch?(t(),a(y,{key:0,onClick:p[0]||(p[0]=u((a=>{return(t=e.item).checked=!t.checked,void g("checked",t,t.checked);var t}),["stop"]))},{default:c((()=>[n(_,{class:"img",src:e.item.checked?"/static/carManage/checked.png":"/static/carManage/check.png"},null,8,["src"])])),_:1})):s("",!0),n(y,{class:"right"},{default:c((()=>[n(y,{class:"title-box"},{default:c((()=>[n(y,{class:"title-item"},{default:c((()=>[n(w,{class:"left-status"},{default:c((()=>[f(b(e.item.intentionCode),1)])),_:1}),n(w,{class:"name"},{default:c((()=>[f(b(`${e.item.name||""}-${e.item.phone||""}`),1)])),_:1})])),_:1}),n(y,{class:F(["item-right",k(D)])},{default:c((()=>[f(b(e.item.followUpTime||""),1)])),_:1},8,["class"])])),_:1}),n(y,{class:"info-box"},{default:c((()=>[f(" 来源："+b(e.item.mainSource||"未知"),1)])),_:1}),n(y,{class:"info-box"},{default:c((()=>[f(" 意向车系："+b(e.item.carSeries||"--"),1)])),_:1}),n(y,{class:"info-box"},{default:c((()=>[f(" 最新跟进："+b(e.item.content||""),1)])),_:1}),e.isBatch?s("",!0):(t(),a(y,{key:0,class:"footer-box"},{default:c((()=>[n(y,{class:"call",onClick:p[1]||(p[1]=u((a=>("callPhone"in e?e.callPhone:k(H))(e.item.phone)),["stop"]))},{default:c((()=>[n(x,{name:"phone",size:"18"}),n(w,null,{default:c((()=>[f("电话")])),_:1})])),_:1}),n(y,null,{default:c((()=>[n(C,{direction:"col"})])),_:1}),n(y,{class:"follow",onClick:u(v,["stop"])},{default:c((()=>[f(" 跟进 ")])),_:1})])),_:1}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-3d775b88"]]),ue=_(e({__name:"card1",setup(e){A((e=>({"8a912d7c":k(X)})));const r=y([]),o=y([]),m=y(),p=g({current:1,size:10,total:0,date:j().format("YYYY-MM-DD")});D((()=>{L(),F()}));const _=e=>{p.date=e,F()};async function L(){var e;r.value=[];const a=await w().get(P.getCrmTaskCount);if(0===(null==a?void 0:a.code)){if(a.data.length>0){a.data[0].date.valueOf()>j().format("YYYY-MM-DD").valueOf()&&(p.date=a.data[0].date,F())}else p.date=j().format("YYYY-MM-DD");r.value=null==(e=a.data)?void 0:e.map((e=>({date:e.date,info:e.date===j().format("YYYY-MM-DD")?"今日":"",mode:"mark",num:e.taskCount,max:99})))}}async function F(){var e,a,t,l;v({title:"加载中",mask:!0});try{const t=await w().get(P.getCrmTaskListByDate,{params:{date:p.date}});o.value=null==(e=t.data)?void 0:e.map((e=>({...e,checked:z.value}))),p.total=null==(a=t.data)?void 0:a.length}finally{1==p.current&&(null==(t=m.value)||t.initTop()),null==(l=m.value)||l.loadFinish(),x()}}const E=()=>{p.current=1,F()},O=()=>{p.current++,F()},R=y([]),q=y(!1),W=y(!1),z=y(!1),G=()=>{W.value=!0,q.value=!q.value},H=()=>{W.value=!1,q.value=!q.value,z.value=!1,R.value=[],o.value=o.value.map((e=>({...e,checked:z.value})))},J=()=>{z.value=!z.value,o.value=o.value.map((e=>({...e,checked:z.value}))),R.value=z.value?o.value:[]},V=(e,a)=>{a?R.value.push(e):R.value=R.value.filter((a=>a.clueId!==e.clueId)),z.value=R.value.length===o.value.length},K=()=>{var e,a;if(!(null==(e=R.value)?void 0:e.length))return U({title:"请先勾选数据",icon:"none"});uni.$u.http.post(`/crm/clue/batch/update/nextTime?ids=${null==(a=R.value)?void 0:a.map((e=>e.crmClueId))}`).then((()=>{U({title:"操作成功",icon:"none"}),R.value=[],z.value=!1,L(),F()}))},X=C((()=>q.value?"100rpx":"32rpx"));return(e,y)=>{const g=l,D=i,v=d(h("u-empty"),$),w=d(h("u-popup"),N);return t(),a(g,{class:"page f-c-s"},{default:c((()=>[n(se,{selected:k(r),date:k(p).date,onChange:_},null,8,["selected","date"]),n(g,{class:"total"},{default:c((()=>[n(g,null,{default:c((()=>[f("共找到"+b(k(p).total)+"个任务",1)])),_:1}),!k(q)&&k(p).total?(t(),a(g,{key:0,class:"handle-btn"},{default:c((()=>[n(g,{onClick:G},{default:c((()=>[f("批量操作")])),_:1})])),_:1})):s("",!0)])),_:1}),k(q)?(t(),a(g,{key:0,class:"total"},{default:c((()=>[n(g,{class:"checked",onClick:u(J,["stop"])},{default:c((()=>[n(D,{class:"img",src:k(R).length===k(p).total?"/static/carManage/checked.png":k(R).length?"/static/carManage/halfcheck.png":"/static/carManage/check.png"},null,8,["src"]),f(" 全选 ( "+b(k(R).length)+"/"+b(k(p).total)+" ) ",1)])),_:1}),n(g,{class:"handle-btn"},{default:c((()=>[n(g,{onClick:H},{default:c((()=>[f("取消操作")])),_:1})])),_:1})])),_:1})):s("",!0),k(p).total?(t(),a(Z,M({key:1,ref_key:"listLoadRef",ref:m,class:"scroll-view-box"},k(p),{istop:!1,onLoadMore:O,onLoadRefresh:E}),{default:c((()=>[T(n(g,{class:"list-box"},{default:c((()=>[(t(!0),S(Y,null,B(k(o),((e,l)=>(t(),a(ne,{key:l,item:e,isBatch:k(q),onChecked:V,onClick:e=>{}},null,8,["item","isBatch","onClick"])))),128))])),_:1},512),[[I,k(o).length]])])),_:1},16)):(t(),a(v,{key:2,mode:"list",text:"暂无数据"})),n(w,{overlay:!1,mode:"bottom",round:20,closeOnClickOverlay:!0,show:k(W),onClose:y[0]||(y[0]=e=>W.value=!1)},{default:c((()=>[n(g,{class:"action-box"},{default:c((()=>[n(g,{onClick:K},{default:c((()=>[f("批量不跟进")])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-5f0db825"]]),ie=_(e({__name:"listItem2",props:{item:{},isBatch:{type:Boolean,default:!1}},emits:["checked","allot"],setup(e,{emit:r}){const d=r;return(e,r)=>{const o=i,h=l;return t(),a(h,{class:"list-item"},{default:c((()=>[e.isBatch?(t(),a(h,{key:0,onClick:r[0]||(r[0]=u((a=>{return(t=e.item).checked=!t.checked,void d("checked",t,t.checked);var t}),["stop"]))},{default:c((()=>[n(o,{class:"img",src:e.item.checked?"/static/carManage/checked.png":"/static/carManage/check.png"},null,8,["src"])])),_:1})):s("",!0),n(h,{class:"right"},{default:c((()=>[n(h,{class:"title-box"},{default:c((()=>[n(h,{class:"name"},{default:c((()=>[f(b(e.item.customName),1)])),_:1}),n(h,{class:"tag"},{default:c((()=>[f("销售")])),_:1})])),_:1}),n(h,{class:"info-box"},{default:c((()=>[f(b(e.item.sourceStr||"来源未知"),1)])),_:1}),n(h,{class:"footer-box"},{default:c((()=>[n(h,null,{default:c((()=>[f("入库时间："+b(e.item.createTime||"未知"),1)])),_:1}),e.isBatch?s("",!0):(t(),a(h,{key:0,class:"allot",onClick:r[1]||(r[1]=u((a=>{return t=e.item,void d("allot",t);var t}),["stop"]))},{default:c((()=>[f("分配")])),_:1}))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-32b8b91d"]]),re=_(e({__name:"card2",setup(e){A((e=>({"294d08d2":k(X)})));const r=y([]),o=y(),m=g({current:1,size:10,total:0,status:"",orderBy:"1",clueType:"0"});async function _(){var e,a;v({title:"加载中",mask:!0});try{const e={...J(m,"total"),status:"all"===m.status?"":m.status},a=await w().get("/crm/task/getSalesTaskList",{params:e});m.total=+a.data.count;const t=a.data.results.map((e=>({...e,checked:W.value})));r.value=1===m.current?t:[...r.value,...t]}finally{1==m.current&&(null==(e=o.value)||e.initTop()),null==(a=o.value)||a.loadFinish(),x()}}D((()=>{_(),R("sellData"),q("sellData",(e=>{const{id:a,queryData:t}=e,{clueType:l,clueId:c}=JSON.parse(t);uni.$u.http.post("/crm/customer/transfer",{type:l,clueIdList:Array.isArray(c)?c:[c],followUpId:a,transfer:!1})}))}));const L=()=>{m.current=1,_()},F=()=>{m.current++,_()},E=y([]),O=y(!1),j=y(!1),W=y(!1),z=()=>{j.value=!0,O.value=!O.value},G=()=>{j.value=!1,O.value=!O.value,W.value=!1,E.value=[],r.value=r.value.map((e=>({...e,checked:W.value})))},H=()=>{W.value=!W.value,r.value=r.value.map((e=>({...e,checked:W.value}))),E.value=W.value?r.value:[]},P=(e,a)=>{a?E.value.push(e):E.value=E.value.filter((a=>a.clueId!==e.clueId)),W.value=E.value.length===r.value.length},V=()=>{var e;if(!(null==(e=E.value)?void 0:e.length))return U({title:"请先勾选数据",icon:"none"});K({clueType:E.value[0].clueType,clueId:E.value.map((e=>e.clueId))})},K=e=>{const a={clueType:e.clueType,clueId:e.clueId};p(`/pages/carManage/sellUserList?title=分配&id=''&sureBtn=1&queryData=${JSON.stringify(a)}`)},X=C((()=>O.value?"100rpx":"32rpx"));return(e,p)=>{const _=l,y=i,g=d(h("u-empty"),$),D=d(h("u-popup"),N);return t(),a(_,{class:"page f-c-s"},{default:c((()=>[n(_,{class:"total"},{default:c((()=>[n(_,null,{default:c((()=>[f("共找到"+b(k(m).total)+"个任务",1)])),_:1}),!k(O)&&k(m).total?(t(),a(_,{key:0,class:"handle-btn"},{default:c((()=>[n(_,{onClick:z},{default:c((()=>[f("批量操作")])),_:1})])),_:1})):s("",!0)])),_:1}),k(O)?(t(),a(_,{key:0,class:"total"},{default:c((()=>[n(_,{class:"checked",onClick:u(H,["stop"])},{default:c((()=>[n(y,{class:"img",src:k(E).length===k(m).total?"/static/carManage/checked.png":k(E).length?"/static/carManage/halfcheck.png":"/static/carManage/check.png"},null,8,["src"]),f(" 全选 ( "+b(k(E).length)+"/"+b(k(m).total)+" ) ",1)])),_:1}),n(_,{class:"handle-btn"},{default:c((()=>[n(_,{onClick:G},{default:c((()=>[f("取消操作")])),_:1})])),_:1})])),_:1})):s("",!0),k(m).total?(t(),a(Z,M({key:1,ref_key:"listLoadRef",ref:o,class:"scroll-view-box"},k(m),{istop:!1,onLoadMore:F,onLoadRefresh:L}),{default:c((()=>[T(n(_,{class:"list-box"},{default:c((()=>[(t(!0),S(Y,null,B(k(r),((e,l)=>(t(),a(ie,{key:l,item:e,status:k(m).reqStatus,isBatch:k(O),onChecked:P,onAllot:K,onClick:e=>{}},null,8,["item","status","isBatch","onClick"])))),128))])),_:1},512),[[I,k(r).length]])])),_:1},16)):(t(),a(g,{key:2,mode:"list",text:"暂无数据"})),n(D,{overlay:!1,mode:"bottom",round:20,closeOnClickOverlay:!0,show:k(j),onClose:p[0]||(p[0]=e=>j.value=!1)},{default:c((()=>[n(_,{class:"action-box"},{default:c((()=>[n(_,{onClick:V},{default:c((()=>[f("批量分配")])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-094136bb"]]),fe=_(e({__name:"listItem3",props:{item:{},isBatch:{type:Boolean,default:!1}},emits:["checked","allot"],setup(e,{emit:r}){const d=r;return(e,r)=>{const o=i,h=l;return t(),a(h,{class:"list-item"},{default:c((()=>[e.isBatch?(t(),a(h,{key:0,onClick:r[0]||(r[0]=u((a=>{return(t=e.item).checked=!t.checked,void d("checked",t,t.checked);var t}),["stop"]))},{default:c((()=>[n(o,{class:"img",src:e.item.checked?"/static/carManage/checked.png":"/static/carManage/check.png"},null,8,["src"])])),_:1})):s("",!0),n(h,{class:"right"},{default:c((()=>[n(h,{class:"title-box"},{default:c((()=>[n(h,{class:"name"},{default:c((()=>[f(b(e.item.customName),1)])),_:1}),n(h,{class:"tag"},{default:c((()=>[f("评估")])),_:1})])),_:1}),n(h,{class:"info-box"},{default:c((()=>[f(b(e.item.sourceStr||"来源未知"),1)])),_:1}),n(h,{class:"footer-box"},{default:c((()=>[n(h,null,{default:c((()=>[f("入库时间："+b(e.item.createTime||"未知"),1)])),_:1}),e.isBatch?s("",!0):(t(),a(h,{key:0,class:"allot",onClick:r[1]||(r[1]=u((a=>{return t=e.item,void d("allot",t);var t}),["stop"]))},{default:c((()=>[f("分配")])),_:1}))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-4f8295ca"]]),be=_(e({__name:"card3",setup(e){A((e=>({"7fcddbce":k(X)})));const r=y([]),o=y(),m=g({current:1,size:10,total:0,status:"",orderBy:"1",clueType:"0"});async function _(){var e,a;v({title:"加载中",mask:!0});try{const e={...J(m,"total"),status:"all"===m.status?"":m.status},a=await w().get("/crm/task/getPurchaseTaskList",{params:e});m.total=+a.data.count;const t=a.data.results.map((e=>({...e,checked:W.value})));r.value=1===m.current?t:[...r.value,...t]}finally{1==m.current&&(null==(e=o.value)||e.initTop()),null==(a=o.value)||a.loadFinish(),x()}}D((()=>{_(),R("sellData"),q("sellData",(e=>{const{id:a,queryData:t}=e,{clueType:l,clueId:c}=JSON.parse(t);uni.$u.http.post("/crm/customer/transfer",{type:l,clueIdList:Array.isArray(c)?c:[c],followUpId:a,transfer:!1})}))}));const L=()=>{m.current=1,_()},F=()=>{m.current++,_()},E=y([]),O=y(!1),j=y(!1),W=y(!1),z=()=>{j.value=!0,O.value=!O.value},G=()=>{j.value=!1,O.value=!O.value,W.value=!1,E.value=[],r.value=r.value.map((e=>({...e,checked:W.value})))},H=()=>{W.value=!W.value,r.value=r.value.map((e=>({...e,checked:W.value}))),E.value=W.value?r.value:[]},P=(e,a)=>{a?E.value.push(e):E.value=E.value.filter((a=>a.clueId!==e.clueId)),W.value=E.value.length===r.value.length},V=()=>{var e;if(!(null==(e=E.value)?void 0:e.length))return U({title:"请先勾选数据",icon:"none"});K({clueType:E.value[0].clueType,clueId:E.value.map((e=>e.clueId))})},K=e=>{const a={clueType:e.clueType,clueId:e.clueId};p(`/pages/carManage/sellUserList?title=分配&id=''&sureBtn=1&queryData=${JSON.stringify(a)}`)},X=C((()=>O.value?"100rpx":"32rpx"));return(e,p)=>{const _=l,y=i,g=d(h("u-empty"),$),D=d(h("u-popup"),N);return t(),a(_,{class:"page f-c-s"},{default:c((()=>[n(_,{class:"total"},{default:c((()=>[n(_,null,{default:c((()=>[f("共找到"+b(k(m).total)+"个任务",1)])),_:1}),!k(O)&&k(m).total?(t(),a(_,{key:0,class:"handle-btn"},{default:c((()=>[n(_,{onClick:z},{default:c((()=>[f("批量操作")])),_:1})])),_:1})):s("",!0)])),_:1}),k(O)?(t(),a(_,{key:0,class:"total"},{default:c((()=>[n(_,{class:"checked",onClick:u(H,["stop"])},{default:c((()=>[n(y,{class:"img",src:k(E).length===k(m).total?"/static/carManage/checked.png":k(E).length?"/static/carManage/halfcheck.png":"/static/carManage/check.png"},null,8,["src"]),f(" 全选 ( "+b(k(E).length)+"/"+b(k(m).total)+" ) ",1)])),_:1}),n(_,{class:"handle-btn"},{default:c((()=>[n(_,{onClick:G},{default:c((()=>[f("取消操作")])),_:1})])),_:1})])),_:1})):s("",!0),k(m).total?(t(),a(Z,M({key:1,ref_key:"listLoadRef",ref:o,class:"scroll-view-box"},k(m),{istop:!1,onLoadMore:F,onLoadRefresh:L}),{default:c((()=>[T(n(_,{class:"list-box"},{default:c((()=>[(t(!0),S(Y,null,B(k(r),((e,l)=>(t(),a(fe,{key:l,item:e,status:k(m).reqStatus,isBatch:k(O),onChecked:P,onAllot:K,onClick:e=>{}},null,8,["item","status","isBatch","onClick"])))),128))])),_:1},512),[[I,k(r).length]])])),_:1},16)):(t(),a(g,{key:2,mode:"list",text:"暂无数据"})),n(D,{overlay:!1,mode:"bottom",round:20,closeOnClickOverlay:!0,show:k(j),onClose:p[0]||(p[0]=e=>j.value=!1)},{default:c((()=>[n(_,{class:"action-box"},{default:c((()=>[n(_,{onClick:V},{default:c((()=>[f("批量分配")])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-d3b65e2f"]]),de=_(e({__name:"index",setup(e){const s=y([{name:"新客待跟进",comp:K,badge:{value:0}},{name:"客户跟进",comp:ue,badge:{value:0}},{name:"销售待分配",comp:re,badge:{value:0}},{name:"评估待分配",comp:be,badge:{value:0}}]),u=W(s.value[0]),i=e=>{u.value=e},r=W();return z((()=>{r.value=Date.now(),uni.$u.http.get("/crm/task/getClassificationTaskNum").then((e=>{const{newCustomerNum:a,followCustomerNum:t,sellNum:l,assessNum:c}=e.data;s.value=[{name:"新客待跟进",comp:K,badge:{value:+a>99?"99+":a??0}},{name:"客户跟进",comp:ue,badge:{value:+t>99?"99+":t??0}},{name:"销售待分配",comp:re,badge:{value:+l>99?"99+":l??0}},{name:"评估待分配",comp:be,badge:{value:+c>99?"99+":c??0}}]}))})),(e,f)=>{const b=d(h("up-tabs"),G),o=l;return t(),a(o,{class:"page f-c-s"},{default:c((()=>[n(b,{lineColor:"#ff5719",onClick:i,list:k(s)},null,8,["list"]),(t(),a(h(k(u).comp),{key:k(r)}))])),_:1})}}}),[["__scopeId","data-v-2e49ca94"]]);export{de as default};
