import{d as e,r as a,B as l,Z as t,a2 as s,c as i,w as u,i as n,I as d,M as o,K as r,b8 as v,o as c,a as m,y as p,u as f,aL as y,g as h,t as k,R as _,z as g,b as x,F as D,e as I,n as C,P as N,h as w,ar as b,a1 as j,_ as q}from"./index-CK4DGatK.js";import{N as B}from"./NavBar.DSs5OGCU.js";import{u as F}from"./useQuery.3dd8K18V.js";const z=q(e({__name:"employeeFilter",setup(e){const q=a([]),z=F(),M=a(""),V=a(!1),L=a(),Q=a([]),R=a([]);l((e=>{var a,l;V.value="角色"==e.title,e.id&&!V.value&&(L.value=e.id),e.id&&V&&(Q.value=(null==(a=z.value.id)?void 0:a.split(","))||[],R.value=(null==(l=z.value.name)?void 0:l.split(","))||[]),$()}));const U=a(!1),$=()=>{t({title:"加载中"});const e="角色"==z.value.title?"admin/role/list":"岗位"==z.value.title?"admin/post/list":"admin/user/getUserList";let a=null;"角色"==z.value.title||(a="岗位"==z.value.title?{}:{userType:"B",keywords:M.value}),e&&uni.$u.http.get(e,{params:a}).then((e=>{q.value=e.data.map((e=>({...e,id:"角色"==z.value.title?e.roleId:"岗位"==z.value.title?e.postId:e.userId,name:"角色"==z.value.title?e.roleName:"岗位"==z.value.title?e.postName:e.name}))),U.value=!0,s()}))},K=e=>{V.value?(Q.value.includes(e.id)?Q.value.splice(Q.value.findIndex((a=>a==e.id)),1):Q.value.push(e.id),R.value.includes(e.name)?R.value.splice(R.value.findIndex((a=>a==e.name)),1):R.value.push(e.name)):(L.value=e.id,"岗位"==z.value.title?b("postData",{name:e.name,id:e.id,queryData:z.value.queryData}):b("leaderData",{name:e.name,id:e.id,queryData:z.value.queryData}),j())},P=()=>{b("fixRoleData",{name:R.value.join(","),id:Q.value}),j()};return(e,a)=>{const l=n,t=d(r("up-icon"),o),s=_,b=N,j=w,F=d(r("up-empty"),v);return c(),i(l,{class:"page f-c-s"},{default:u((()=>[m(B,{title:f(z).title},y({_:2},[f(V)||f(z).isFilter?{name:"right",fn:u((()=>[f(V)?(c(),i(l,{key:0,class:"nav-right",onClick:P},{default:u((()=>[h("确认("+k(f(Q).length)+")",1)])),_:1})):(c(),i(l,{key:1,class:"nav-right",onClick:a[0]||(a[0]=e=>K({name:"",id:""}))},{default:u((()=>[h("清空")])),_:1}))])),key:"0"}:void 0]),1032,["title"]),"上级领导"===f(z).title?(c(),i(l,{key:0,class:"search-box"},{default:u((()=>[m(l,null,{default:u((()=>[m(t,{name:"search",size:"20"}),m(s,{modelValue:f(M),"onUpdate:modelValue":a[1]||(a[1]=e=>g(M)?M.value=e:null),placeholder:"请输入姓名或手机号","confirm-type":"search",style:{width:"90%"},onConfirm:$},null,8,["modelValue"])])),_:1}),m(l,{onClick:$},{default:u((()=>[h("搜索")])),_:1})])),_:1})):p("",!0),m(l,{class:"f-list"},{default:u((()=>[f(q).length&&f(U)?(c(!0),x(D,{key:0},I(f(q),((e,a)=>(c(),i(l,{key:a,class:C(["user-list",{active:f(L)==e.id||f(Q).includes(e.id)}]),onClick:a=>K(e)},{default:u((()=>[m(l,null,{default:u((()=>[m(b,{src:"./static/carManage/user.png"}),m(j,{class:"ml30"},{default:u((()=>[h(k(e.name+(e.phone?`(${e.phone})`:"")+(e.deptName?" - "+e.deptName:"")),1)])),_:2},1024)])),_:2},1024),f(L)==e.id||f(Q).includes(e.id)?(c(),i(t,{key:0,name:"checkbox-mark",color:"#F6531B",size:"20"})):p("",!0)])),_:2},1032,["class","onClick"])))),128)):p("",!0),!f(q).length&&f(U)?(c(),i(F,{key:1,mode:"data",icon:"http://cdn.uviewui.com/uview/empty/data.png"})):p("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-8106ec31"]]);export{z as default};
