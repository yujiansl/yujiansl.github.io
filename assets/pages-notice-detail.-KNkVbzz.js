import{d as a,r as e,B as s,b2 as t,q as n,Z as i,$ as l,a2 as o,c as d,w as r,i as u,o as c,a as f,g as m,t as p,u as v,k as _,W as y,n as g,_ as b}from"./index-CK4DGatK.js";import{n as j}from"./notice.dYkzXYeO.js";import{t as T}from"./state.CAJtmRSV.js";import{u as x}from"./useQuery.3dd8K18V.js";import{r as I}from"./image.DobRSNlT.js";const M=b(a({__name:"detail",setup(a){const b=x(),M=e({readied:!0});s((()=>{t({title:T[b.value.type]})})),n((()=>{var a,e;const s=null==(a=b.value)?void 0:a.id,t=null==(e=b.value)?void 0:e.readId;s&&async function(a,e){i({title:"加载中"});try{const{data:s}=await l().get(`${j.getDetail}/${a}`,{params:{informReadId:e}});M.value=s;const t=I(null==s?void 0:s.content);M.value.content=t}finally{o()}}(s,t)}));const k=()=>{if(M.value.readied)return;i({title:"提交中",mask:!0});const{id:a,messageType:e}=M.value;l().post(j.read,{infoId:a,messageType:e,infoRead:1}).then((()=>{M.value.readied=!0,o()}))};return(a,e)=>{const s=u,t=y;return c(),d(s,{class:"page-box px-a"},{default:r((()=>[f(s,{class:"title font-Medium"},{default:r((()=>[m(p(v(M).title),1)])),_:1}),f(s,{class:"time"},{default:r((()=>[m(p(v(M).createTime),1)])),_:1}),f(s,{class:"content copy"},{default:r((()=>[_("div",{innerHTML:v(M).content},null,8,["innerHTML"])])),_:1}),f(s,{class:"receive-btn"},{default:r((()=>[f(t,{onClick:k,class:g({disabled:v(M).readied})},{default:r((()=>[m("我已收到")])),_:1},8,["class"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-94f1be72"]]);export{M as default};
