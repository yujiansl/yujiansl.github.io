import{d as e,x as a,r as t,q as l,b as n,a as s,u as o,w as u,i as d,o as c,g as i,h as m,R as r,aj as f,t as p,W as v,a1 as _,a0 as h,Z as g,ar as x,_ as V}from"./index-CK4DGatK.js";import{N as b}from"./NavBar.DSs5OGCU.js";import{u as j}from"./useQuery.3dd8K18V.js";const y=V(e({__name:"add",setup(e){const V=j(),y=a((()=>!!V.value.id)),T=t({content:"喷漆：\n钣金：\n换件：\n其他：\n"});function k(){_()}return l((()=>{y.value&&async function(){const e=await uni.$u.http.get("/product/convenientTemplate/"+V.value.id);T.value=(null==e?void 0:e.data)||{}}()})),(e,a)=>{const t=m,l=d,_=r,V=f,j=v;return c(),n("div",{class:"page f-c-s"},[s(b,{title:o(y)?"编辑模版":"新建模版"},null,8,["title"]),s(l,{class:"content"},{default:u((()=>[s(l,{class:"form-box"},{default:u((()=>[s(l,{class:"form-item"},{default:u((()=>[s(l,null,{default:u((()=>[s(t,null,{default:u((()=>[i("*")])),_:1}),i("模板名称")])),_:1}),s(_,{modelValue:o(T).name,"onUpdate:modelValue":a[0]||(a[0]=e=>o(T).name=e),modelModifiers:{trim:!0},placeholder:"请输入",maxlength:20},null,8,["modelValue"])])),_:1}),s(l,{class:"form-textarea"},{default:u((()=>[s(l,{class:"area-title"},{default:u((()=>[s(t,null,{default:u((()=>[i("*")])),_:1}),i("模板内容")])),_:1}),s(V,{modelValue:o(T).content,"onUpdate:modelValue":a[1]||(a[1]=e=>o(T).content=e),placeholder:"请输入",maxlength:"1000"},null,8,["modelValue"]),s(l,{class:"limit"},{default:u((()=>{var e;return[i(p((null==(e=o(T).content)?void 0:e.length)||0)+"/1000",1)]})),_:1})])),_:1})])),_:1})])),_:1}),s(l,{class:"bottom-btn"},{default:u((()=>[s(j,{onClick:k},{default:u((()=>[i("取消")])),_:1}),s(j,{class:"save-btn",onClick:a[2]||(a[2]=e=>async function(){T.value.name?(T.value.content||h({title:"请输入模板内容",icon:"none"}),g({title:"提交中",mask:!0}),await uni.$u.http.post("/product/convenientTemplate/saveOrUpdate",{id:T.value.id,name:T.value.name,content:T.value.content,templateType:"generic",templateFrom:"app"}),h({title:"保存成功",icon:"none"}),setTimeout((()=>{k(),x("refresh")}),1e3)):h({title:"请输入模板名称",icon:"none"})}())},{default:u((()=>[i("确定")])),_:1})])),_:1})])}}}),[["__scopeId","data-v-f4d9c819"]]);export{y as default};
