import{j as e,b as i}from"./index.HDA2F_3Q.js";import{g as a}from"./time._VqwKl0d.js";import{d as t,r,x as l,v as s,c as n,o as c,i as u,w as d,a as o,b as m,y as p,u as f,P as y,g,h as P,t as _,F as v,k as S,n as T,S as k,Q as h,W as j,aU as I,_ as x}from"./index-CK4DGatK.js";import{_ as M}from"./car_default.CyENNAub.js";import{P as N}from"./purchase.B8DNaFGL.js";import{F as b,a as w}from"./fixPrice.CFXyKkhm.js";import{v as B}from"./base.6l0JEBJr.js";const R=x(t({__name:"listItem",props:{item:{type:Object,default:{}},isDetail:{type:Boolean,default:!1},isTransfer:{type:Boolean,default:!1},itemType:{type:String,default:"2"},isToPage:{type:Boolean,default:!1},query:{type:Object,default:{}}},emits:["toShowPurchaseVinVerify"],setup(t,{emit:x}){const R=t,$=x,U=r({carPricingInfo:{}}),D=l((()=>{var e;return((null==(e=U.value.carPricingInfo)?void 0:e.statusRemark)||"").length>40&&b["销售定价"]!==+R.itemType&&!["audit"].includes(R.itemType)&&(U.value.carPricingInfo.scene||U.value.premium)}));s((()=>R.item),(e=>{if(Object.keys(e).length&&(U.value=e,!e.carPricingInfo)){const{coverUrl:i,photoUrl:a,carBrandName:t,carSeriesName:r,carModelName:l,uetoDate:s,mileage:n,bodyColor:c}=e;U.value={...e,coverUrl:i||a,carPricingInfo:{carBrandName:t,carSeriesName:r,carModelName:l,uetoDate:s,mileage:n,bodyColor:c}}}}),{immediate:!0,deep:!0});const C=()=>{var e,i,a,t,r,l,s,n,c,u;if(!R.isDetail||R.isToPage)if(+R.itemType!==b["销售定价"])+R.itemType===N["入库状态"]?h(`/pages/pending/carEntry?purchaseId=${null==(t=R.item)?void 0:t.purchaseId}&primaryKey=${null==(l=null==(r=R.item)?void 0:r.carPricingInfo)?void 0:l.id}&type=${R.item.status}`):+R.itemType===N["订单状态"]?h(`/pages/purchaseOrder/purchaseDetail?id=${R.item.carPricingInfo.id}&purchaseId=${null==(s=R.item)?void 0:s.purchaseId}&status=${R.item.status}&itemType=${R.itemType}`):R.query.sameType?h(`/pages/carManage/details/index?id=${null==(n=R.item)?void 0:n.id}`):h(`/pages/fixPrice/fixDetail?id=${null==(u=null==(c=R.item)?void 0:c.carPricingInfo)?void 0:u.id}&status=${R.item.status}&itemType=${R.itemType}`);else if(R.isDetail)h(`/pages/carManage/details/index?id=${null==(e=R.item)?void 0:e.carProductId}`);else{const e=I({type:null==(i=R.item)?void 0:i.status,primaryKey:R.item.carPricingInfo.id,purchaseId:null==(a=R.item)?void 0:a.purchaseId});h(`/pages/pending/carFix?${e}`)}},O=async()=>{var e;if(R.item.vinNo){const e=await B(R.item.vinNo);if(e.hasVin)return void $("toShowPurchaseVinVerify",e.orderList||[])}h(`/pages/purchaseOrder/addPurchase?id=${null==(e=U.value.carPricingInfo)?void 0:e.id}&status=${U.value.status}&source=list&itemType=${R.itemType}`)};return(r,l)=>{const s=y,I=P,x=u,B=j;return c(),n(x,{class:"list-item",onClick:C},{default:d((()=>[o(x,{class:"content"},{default:d((()=>[f(U).coverUrl?(c(),n(s,{key:0,src:f(U).coverUrl,mode:"aspectFill"},null,8,["src"])):(c(),n(s,{key:1,src:M,mode:"aspectFill"})),o(x,null,{default:d((()=>[o(x,{class:"name"},{default:d((()=>{var e;return[(null==(e=f(U).carPricingInfo.carSeriesName)?void 0:e.indexOf(f(U).carPricingInfo.carBrandName))<0?(c(),n(I,{key:0},{default:d((()=>[g(_(f(U).carPricingInfo.carBrandName),1)])),_:1})):p("",!0),g(" "+_(f(U).carPricingInfo.carSeriesName),1)]})),_:1}),o(x,{class:"model-name"},{default:d((()=>[g(_(f(U).carPricingInfo.carModelName),1)])),_:1}),o(x,{class:"tags"},{default:d((()=>{var e;return[(null==(e=f(U).carPricingInfo)?void 0:e.uetoDate)?(c(),n(I,{key:0},{default:d((()=>{var e;return[g(_(null==(e=f(U).carPricingInfo.uetoDate)?void 0:e.substring(0,7)),1)]})),_:1})):p("",!0),o(I,null,{default:d((()=>[g(_(f(U).carPricingInfo.mileage||0)+"万公里",1)])),_:1}),f(U).carPricingInfo.bodyColor?(c(),n(I,{key:1},{default:d((()=>[g(_(f(U).carPricingInfo.bodyColor),1)])),_:1})):p("",!0)]})),_:1}),f(U).pricingPriceMax&&"auditRejection"==f(U).status?(c(),n(x,{key:0,class:"g8"},{default:d((()=>[g("定价金额："+_(("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~"))+"万元 ",1)])),_:1})):p("",!0),[f(N)["采购状态"],f(b)["评估定价"]].includes(+t.itemType)?(c(),n(x,{key:1,class:"vin"},{default:d((()=>[["awaitAssess","awaitRater"].includes(f(U).status)?(c(),m(v,{key:0},[g("新车指导价："+_(f(U).carPricingInfo.carModelGuidePrice||0)+"万元 ",1)],64)):p("",!0),["awaitPricing"].includes(f(U).status)?(c(),m(v,{key:1},[g("采购预估价："+_(("joinStr"in r?r.joinStr:f(e))([f(U).myPricingPriceMin,f(U).myPricingPriceMax],"~"))+"万元 ",1)],64)):p("",!0),["auditPricing","hasPurchased"].includes(f(U).status)?(c(),m(v,{key:2},[g("定价金额："+_(("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~"))+"万元 ",1)],64)):p("",!0),"lose"==f(U).status?(c(),m(v,{key:3},[g(_(f(U).pricingPriceMax?"定价金额："+("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~")+"万元":"预估金额："+("joinStr"in r?r.joinStr:f(e))([f(U).myPricingPriceMin,f(U).myPricingPriceMax],"~")+"万元"),1)],64)):p("",!0),"completedRater"==f(U).status?(c(),m(v,{key:4},[g("车主预期："+_(("formatShowPrice"in r?r.formatShowPrice:f(i))(f(U).budgetaryPrice,"万元")),1)],64)):p("",!0)])),_:1})):"inventory"===t.itemType?(c(),n(x,{key:2,class:"vin"},{default:d((()=>[g("定价金额： "+_(("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~"))+"万元 ",1)])),_:1})):f(U).vinNo?(c(),n(x,{key:3,class:"vin"},{default:d((()=>[g("VIN："+_(f(U).vinNo),1)])),_:1})):p("",!0)])),_:1})])),_:1}),[f(N)["订单状态"],f(N)["入库状态"]].includes(+t.itemType)?(c(),m(v,{key:0},[o(x,{class:"info"},{default:d((()=>[o(x,null,{default:d((()=>[o(x,null,{default:d((()=>[g(" 客户："+_(f(U).customerName||"-")+" ",1),t.isTransfer?(c(),n(I,{key:0,class:"ml20"},{default:d((()=>[g("销售："+_(f(U).salesUserName||"-"),1)])),_:1})):(c(),n(I,{key:1,class:"ml20"},{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1}))])),_:1}),o(x,null,{default:d((()=>[g(" 付款方式："+_(f(U).paymentMethodName||"-")+" ",1),t.isTransfer?(c(),n(I,{key:0,class:"ml20"},{default:d((()=>[g("销售类型："+_(f(U).salesTypeName||"-"),1)])),_:1})):(c(),n(I,{key:1,class:"ml20"},{default:d((()=>[g("采购类型："+_(f(U).purchaseTypeName||"-"),1)])),_:1}))])),_:1}),o(x,null,{default:d((()=>{var e,i;return[t.isTransfer?(c(),m(v,{key:0},[g(" 收齐全款日期："+_(f(U).fullPaymentTime||"-"),1)],64)):(c(),m(v,{key:1},[g("采购日期："+_((null==(e=f(U).purchaseOrderTime)?void 0:e.slice(0,16))||(null==(i=f(U).purchaseTime)?void 0:i.slice(0,16))||"-"),1)],64))]})),_:1})])),_:1}),t.isDetail&&f(U).orderStatusName?(c(),n(x,{key:0,class:"detail-status"},{default:d((()=>[g(_(f(U).orderStatusName),1)])),_:1})):p("",!0),!t.isDetail&&f(U).premium?(c(),n(x,{key:1,class:"labels"},{default:d((()=>[o(I,null,{default:d((()=>[g("溢价")])),_:1})])),_:1})):p("",!0)])),_:1}),o(x,{class:"price"},{default:d((()=>[S("span",null,[g("已付："),o(I,null,{default:d((()=>[g(_(f(U).paymentPrice||f(U).paidAmount||0)+"元",1)])),_:1})]),f(U).deposit?(c(),m("span",{key:0,class:"ml20"},[g("定金："),o(I,null,{default:d((()=>[g(_(f(U).deposit||0)+"元",1)])),_:1})])):p("",!0),S("span",{class:"ml20"},[g("采购价："),o(I,null,{default:d((()=>[g(_(f(U).purchaseOrderPrice||f(U).purchasePrice||f(U).purchasePriceOld||0)+"万元",1)])),_:1})])])),_:1})],64)):"audit"===t.itemType?(c(),n(x,{key:1,class:"audit-info"},{default:d((()=>[o(x,null,{default:d((()=>["Mortgage"==f(U).carNature?(c(),n(x,{key:0,class:"tag"},{default:d((()=>[g("按揭")])),_:1})):(c(),n(x,{key:1,class:"tag"},{default:d((()=>[g("全款")])),_:1})),o(x,{class:"price ml20"},{default:d((()=>[S("span",null,[g("采购价："),o(I,null,{default:d((()=>[g(_(f(U).purchaseOrderPrice||f(U).purchasePrice)+"万元",1)])),_:1})]),S("span",{class:"ml20"},[g("已付："),o(I,null,{default:d((()=>[g(_(f(U).paymentPrice||f(U).paidAmount||0)+"元",1)])),_:1})])])),_:1})])),_:1}),o(x,null,{default:d((()=>[o(x,{class:"mb20"},{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1}),o(x,null,{default:d((()=>{var e;return[g("采购日期："+_((null==(e=f(U).purchaseTime)?void 0:e.slice(0,16))||"-"),1)]})),_:1})])),_:1})])),_:1})):(c(),n(x,{key:2,class:T(["fix-info",{"label-box":"inventory"===t.itemType&&f(U).inventoryDays||f(b)["销售定价"]!==+t.itemType&&!["audit"].includes(t.itemType)&&(f(U).carPricingInfo.scene||f(U).premium)}])},{default:d((()=>[o(x,null,{default:d((()=>[["awaitAssess","awaitRater"].includes(f(U).status)?(c(),m(v,{key:0},[o(x,{class:"recss-line-flex"},{default:d((()=>[o(x,null,{default:d((()=>[g("车主预期： "),o(I,{class:"red"},{default:d((()=>[g(_(("formatShowPrice"in r?r.formatShowPrice:f(i))(f(U).budgetaryPrice,"万元")),1)])),_:1})])),_:1}),o(x,null,{default:d((()=>[g("预估价格： "),o(I,{class:"red"},{default:d((()=>[g(_(("joinStr"in r?r.joinStr:f(e))([f(U).myPricingPriceMin,f(U).myPricingPriceMax],"~"))+"万元 ",1)])),_:1})])),_:1})])),_:1}),o(x,null,{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1}),o(x,null,{default:d((()=>[g("创建时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).carPricingInfo.createTime)),1)])),_:1})],64)):p("",!0),["awaitPricing","auditRejection"].includes(f(U).status)?(c(),m(v,{key:1},[f(U).pricingPriceMax&&"awaitPricing"==f(U).status?(c(),n(x,{key:0},{default:d((()=>[g("定价金额： "),o(I,{class:"red"},{default:d((()=>[g(_(("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~"))+"万元 ",1)])),_:1})])),_:1})):p("",!0),"auditRejection"!=f(U).status?(c(),n(x,{key:1},{default:d((()=>[g("定价时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).pricingRaterTime)),1)])),_:1})):p("",!0)],64)):p("",!0),["hasPurchased","auditPricing","auditRejection"].includes(f(U).status)||"inventory"===t.itemType?(c(),m(v,{key:2},[o(x,null,{default:d((()=>[g("采购金额： "),o(I,{class:"red"},{default:d((()=>[g(_(f(U).purchaseOrderPrice||f(U).purchasePrice||"-")+"万元 ",1)])),_:1})])),_:1}),"auditPricing"==f(U).status?(c(),n(x,{key:0},{default:d((()=>[g("审核人："+_(f(U).nextApproveUser||"-"),1)])),_:1})):p("",!0),+t.itemType===f(b)["评估定价"]&&"hasPurchased"==f(U).status?(c(),n(x,{key:1},{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1})):p("",!0),o(x,null,{default:d((()=>{var e;return[g("采购时间："+_((null==(e=f(U).purchaseOrderTime||f(U).purchaseTime)?void 0:e.slice(0,16))||"-"),1)]})),_:1})],64)):p("",!0),"auditRejection"===f(U).status?(c(),m(v,{key:3},[o(x,null,{default:d((()=>[g("拒绝原因："+_(f(U).approveRefuseReason||"-"),1)])),_:1}),o(x,null,{default:d((()=>[g("审核时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).approveTime)),1)])),_:1}),o(x,null,{default:d((()=>[g("审核人："+_(f(U).approveRefuseUserName||"-"),1)])),_:1})],64)):p("",!0),"lose"===f(U).status?(c(),m(v,{key:4},[+t.itemType===f(b)["评估定价"]?(c(),n(x,{key:0},{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1})):p("",!0),o(x,null,{default:d((()=>[g("战败时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).loseTime)),1)])),_:1}),o(x,{class:T(["text-over-hidden",{"multi-padding-bottom":f(D)}])},{default:d((()=>[g("战败原因："+_(f(U).carPricingInfo.statusRemark||"-"),1)])),_:1},8,["class"])],64)):p("",!0),"completedRater"==f(U).status?(c(),m(v,{key:5},[o(x,{class:T({gray:f(U).pricingPriceMax})},{default:d((()=>[g("预估金额： "),o(I,{class:"red"},{default:d((()=>[g(_(("joinStr"in r?r.joinStr:f(e))([f(U).myPricingPriceMin,f(U).myPricingPriceMax],"~"))+"万元 ",1)])),_:1})])),_:1},8,["class"]),o(x,null,{default:d((()=>[g("定价价格： "),o(I,{class:"red"},{default:d((()=>[g(_(("joinStr"in r?r.joinStr:f(e))([f(U).pricingPriceMin,f(U).pricingPriceMax],"~"))+"万元 ",1)])),_:1})])),_:1}),+t.itemType===f(b)["评估定价"]?(c(),n(x,{key:0},{default:d((()=>[g("采购员："+_(f(U).pricingCreateUserName||"-"),1)])),_:1})):p("",!0),o(x,null,{default:d((()=>[g("定价时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).pricingRaterTime)),1)])),_:1})],64)):p("",!0),f(U).status===f(w)["销售定价-已定价"]?(c(),m(v,{key:6},[o(x,null,{default:d((()=>[g("网络标价： "),o(I,{class:"red"},{default:d((()=>[g(_(("formatShowPrice"in r?r.formatShowPrice:f(i))(f(U).networkPrice,"万元")),1)])),_:1})])),_:1}),f(U).membershipPrice?(c(),n(x,{key:0},{default:d((()=>[g("会员价： "),o(I,null,{default:d((()=>[g(_(f(U).membershipPrice)+"万元",1)])),_:1})])),_:1})):p("",!0),o(x,null,{default:d((()=>[g("定价时间："+_(("getTimeBySplitSecond"in r?r.getTimeBySplitSecond:f(a))(f(U).pricingRaterTime)),1)])),_:1})],64)):p("",!0)])),_:1}),[f(b)["销售定价"],"audit"].includes(t.itemType)?p("",!0):(c(),n(x,{key:0,class:"labels"},{default:d((()=>[f(U).carPricingInfo.scene?(c(),n(I,{key:0},{default:d((()=>[g("现场")])),_:1})):p("",!0),f(U).premium?(c(),n(I,{key:1},{default:d((()=>[g("溢价")])),_:1})):p("",!0)])),_:1})),"inventory"===t.itemType&&f(U).inventoryDays?(c(),n(x,{key:1,class:"labels label-inventory"},{default:d((()=>[o(I,null,{default:d((()=>[g("库龄 "+_(f(U).inventoryDays)+" 天",1)])),_:1})])),_:1})):p("",!0)])),_:1},8,["class"])),["awaitPricing","auditRejection"].includes(f(U).status)&&(f(U).canLose||f(U).canPricing)?(c(),n(x,{key:3,class:"handle"},{default:d((()=>[o(B,{onClick:l[0]||(l[0]=k((e=>{var i;return("toPage"in r?r.toPage:f(h))(`/pages/fixPrice/fixFailed?id=${null==(i=f(U).carPricingInfo)?void 0:i.id}&source=list`)}),["stop"]))},{default:d((()=>[g(" 战败 ")])),_:1}),o(B,{onClick:k(O,["stop"])},{default:d((()=>[g(_("auditRejection"===f(U).status?"重新采购":"采购"),1)])),_:1})])),_:1})):p("",!0)])),_:1})}}}),[["__scopeId","data-v-ab675c2f"]]);export{R as L};
