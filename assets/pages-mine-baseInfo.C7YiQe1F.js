import{d as e,A as a,x as l,r as u,B as s,c as t,w as n,i as r,I as o,M as d,K as c,ba as i,o as f,a as v,g as m,u as p,P as _,R as h,a7 as x,n as V,t as g,by as b,ay as I,a2 as w,D as U,_ as y}from"./index-CK4DGatK.js";import{_ as S}from"./avatar.Buy0-vr1.js";const B=y(e({__name:"baseInfo",setup(e){const y=a(),B=l((()=>y.userInfo||{})),M=u({}),z=u(["男","女"]);s((()=>{M.value=B.value.userAttributeVo||{},M.value.sex=1==M.value.sex?"男":0===M.value.sex?"女":null}));const A=async e=>{b(e.file).then((e=>{B.value.avatar=e.attachmentUrl,y.userInfo.avatar=e.attachmentUrl,uni.$u.http.post(I.editUserInfo,{avatar:B.value.avatar}).then(),w()}))},E=()=>{if(!B.value.name)return(new U).showToast("姓名不能为空"),!1;const e="男"==M.value.sex?1:"女"==M.value.sex?0:null;uni.$u.http.put("/admin/user/personal/edit",{username:B.value.username,name:B.value.name,sex:e,serviceYears:M.value.serviceYears,wechatMiniId:M.value.wechatMiniId,personalSignature:M.value.personalSignature}).then((()=>{const a=JSON.parse(JSON.stringify(B.value));a.userAttributeVo={...M.value,sex:e},y.userInfo={...a}}))};return(e,a)=>{const l=r,u=_,s=o(c("u-icon"),d),b=o(c("up-upload"),i),I=h,w=x;return f(),t(l,{class:"page font-regular"},{default:n((()=>[v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("头像")])),_:1}),v(b,{class:"",onAfterRead:A,maxCount:1},{default:n((()=>[v(l,{class:"upload-file"},{default:n((()=>[p(B).avatar?(f(),t(u,{key:0,src:p(B).avatar+"?x-image-process=image/resize,p_30",class:"avatar"},null,8,["src"])):(f(),t(u,{key:1,src:S,class:"avatar"})),v(s,{name:"arrow-right",color:"#7E8285",size:"16",bold:""})])),_:1})])),_:1})])),_:1}),v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("姓名")])),_:1}),v(l,null,{default:n((()=>[v(I,{modelValue:p(B).name,"onUpdate:modelValue":a[0]||(a[0]=e=>p(B).name=e),placeholder:"请输入",onBlur:E},null,8,["modelValue"]),v(s,{name:"arrow-right",color:"#7E8285",size:"16",bold:""})])),_:1})])),_:1}),v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("性别")])),_:1}),v(l,null,{default:n((()=>[v(w,{onChange:a[1]||(a[1]=e=>{return a=e,l="sex",M.value[l]=z.value[a.detail.value],void E();var a,l}),value:p(M).sex,range:p(z)},{default:n((()=>[v(l,{class:V({"picker-text":!p(M).sex})},{default:n((()=>[m(g(p(M).sex||"请选择"),1)])),_:1},8,["class"])])),_:1},8,["value","range"]),v(s,{name:"arrow-right",color:"#7E8285",size:"16",bold:""})])),_:1})])),_:1}),v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("手机号")])),_:1}),v(l,null,{default:n((()=>[v(I,{modelValue:p(B).phone,"onUpdate:modelValue":a[2]||(a[2]=e=>p(B).phone=e),disabled:"",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("从业年限")])),_:1}),v(l,null,{default:n((()=>[v(I,{type:"number",modelValue:p(M).serviceYears,"onUpdate:modelValue":a[3]||(a[3]=e=>p(M).serviceYears=e),placeholder:"请输入",onBlur:E},null,8,["modelValue"]),m(" 年 ")])),_:1})])),_:1}),v(l,{class:"cell-li"},{default:n((()=>[v(l,null,{default:n((()=>[m("微信号")])),_:1}),v(l,null,{default:n((()=>[v(I,{modelValue:p(M).wechatMiniId,"onUpdate:modelValue":a[4]||(a[4]=e=>p(M).wechatMiniId=e),placeholder:"请输入",onBlur:E},null,8,["modelValue"])])),_:1})])),_:1}),v(l,{class:"cell-li b-none"},{default:n((()=>[v(l,null,{default:n((()=>[m("个性签名")])),_:1}),v(l,null,{default:n((()=>[v(I,{modelValue:p(M).personalSignature,"onUpdate:modelValue":a[5]||(a[5]=e=>p(M).personalSignature=e),placeholder:"请输入",onBlur:E},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-f5ee6f91"]]);export{B as default};
