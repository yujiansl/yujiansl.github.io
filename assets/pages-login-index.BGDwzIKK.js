import{d as e,r as a,l,B as s,U as t,a8 as o,c as n,w as u,f as c,u as d,i,o as p,a as r,y as g,g as f,R as h,z as v,n as m,P as _,h as k,Q as y,W as w,t as b,D as x,bp as C,bq as P,a2 as I,br as V,bs as $,_ as A}from"./index-CK4DGatK.js";import{u as L}from"./useIgnoreBackKey.Di1Sjv8N.js";const U=A(e({__name:"index",setup(e){const A=a(!0),U=a(""),q=a(""),D=a(!0),T=/^1(3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,W=a(l().windowHeight||0);L();const j=a({});s((()=>{B()}));const B=()=>{t.getAppInfo().then((e=>{j.value=e,o("deviceInfo",e)}))},Q=()=>{D.value=!1,A.value=!A.value},X=()=>{uni.$u.route({url:"pages/login/forgetPwd"})},z=(e,a)=>e&&!U.value?"请输入手机号":e&&!T.test(U.value)?"请输入正确手机号":a&&!q.value?"请输入密码":D.value?"":"请阅读并同意<用户协议>和<隐私政策>",E=()=>{const e=z(!0,!1);e?(new x).showToast(e):((new x).showLoading("正在获取验证码"),C(U.value,"LOGIN").then((()=>{P({url:`/pages/login/verifyCode?phone=${U.value}`}),I()})))},G=()=>{const e=z(!0,!0);e?(new x).showToast(e):(V(),(new x).showLoading("登录中"),$("PWD",`PWD@${U.value}@${j.value.model}@${j.value.deviceId}`,q.value))},H=()=>{t.open("https://beian.miit.gov.cn/?spm=a313x.search_index.i7.3.299e3a81Xl1E6o",null,{external:!0})},K=()=>{const e=z(!1,!1);e?(new x).showToast(e):t.qxAuth().then((e=>{(new x).showLoading("登录中"),$("QX",`CP@${j.value.model}@${j.value.deviceId}`,e)}))};return(e,a)=>{const l=i,s=h,t=_,o=k,x=w;return p(),n(l,{class:"page f-c-b font-regular",style:c({height:0==d(W)?"100%":d(W)+"px"})},{default:u((()=>[r(l,null,{default:u((()=>[r(l,{class:"title"},{default:u((()=>[f("登录蜀骏名车")])),_:1}),d(A)?(p(),n(l,{key:0},{default:u((()=>[r(s,{type:"number",modelValue:d(U),"onUpdate:modelValue":a[0]||(a[0]=e=>v(U)?U.value=e:null),placeholder:"请输入账号",maxlength:11},null,8,["modelValue"])])),_:1})):(p(),n(l,{key:1},{default:u((()=>[r(s,{type:"number",modelValue:d(U),"onUpdate:modelValue":a[1]||(a[1]=e=>v(U)?U.value=e:null),placeholder:"请输入手机号",maxlength:11,class:"mb42"},null,8,["modelValue"]),r(s,{modelValue:d(q),"onUpdate:modelValue":a[2]||(a[2]=e=>v(q)?q.value=e:null),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})),d(A)?g("",!0):(p(),n(l,{key:2,onClick:X,class:"forget-btn"},{default:u((()=>[f("忘记密码?")])),_:1})),r(l,{class:m(["check-box f-r-a",{"check-top":d(A)}])},{default:u((()=>[r(t,{src:d(D)?"/static/login/checked.png":"/static/login/check.png",onClick:a[3]||(a[3]=e=>D.value=!d(D))},null,8,["src"]),f(" 我已阅读并同意"),r(o,{class:"url",onClick:a[4]||(a[4]=a=>("toPage"in e?e.toPage:d(y))("/pagesA/protocol/user"))},{default:u((()=>[f("《用户协议》")])),_:1}),f("和"),r(o,{class:"url",onClick:a[5]||(a[5]=a=>("toPage"in e?e.toPage:d(y))("/pagesA/protocol/privacy"))},{default:u((()=>[f("《隐私政策》")])),_:1})])),_:1},8,["class"]),d(A)?(p(),n(x,{key:3,class:m({disabled:!d(D)||!d(U)}),onClick:E},{default:u((()=>[f(" 获取验证码 ")])),_:1},8,["class"])):(p(),n(x,{key:4,class:m({disabled:!d(D)||!d(U)||!d(q)}),onClick:G},{default:u((()=>[f(" 登录 ")])),_:1},8,["class"])),r(l,{onClick:Q,class:"type-btn"},{default:u((()=>[f(" 使用"+b(d(A)?"账号密码":"验证码")+"登录 ",1)])),_:1})])),_:1}),r(l,null,{default:u((()=>[r(l,{class:"other-text"},{default:u((()=>[f("其它登录方式")])),_:1}),r(l,{class:"login-type-box"},{default:u((()=>[r(l,{class:"login-type-item",onClick:K},{default:u((()=>[r(t,{src:"./static/login/qx.png",class:"login-type-img"}),r(l,null,{default:u((()=>[f("企业微信")])),_:1})])),_:1})])),_:1}),r(l,{class:"icp",onClick:H},{default:u((()=>[f("蜀ICP备2024055027号-4A")])),_:1})])),_:1})])),_:1},8,["style"])}}}),[["__scopeId","data-v-da41fa2e"]]);export{U as default};
