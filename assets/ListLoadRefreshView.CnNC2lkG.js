import{d as e,r as o,x as a,v as t,c as s,o as l,a5 as r,w as n,a as u,j as d,O as i,y as c,T as p,u as f,i as m,n as v,I as h,s as y,b8 as x,K as w,as as g,_}from"./index-CK4DGatK.js";const B=_(e({__name:"ListLoadRefreshView",props:{size:{default:10},current:{default:1},total:{default:0},istop:{type:Boolean,default:!0},refresh:{type:Boolean,default:!0},showMore:{type:Boolean,default:!0},showBottomEmptyTips:{type:Boolean,default:!0}},emits:["loadMore","loadRefresh","scroll"],setup(e,{expose:_,emit:B}){const b=e,T=B,M=o("努力加载中"),R=o(""),k=a((()=>+b.total?+b.total>10?"没有更多了":"":"暂无数据")),z=o(0),L=o(!1),j=o("nomore"),E=()=>{L.value=!0,T("loadRefresh")},I=()=>{b.current*b.size>=+b.total?j.value="nomore":(j.value="loading",T("loadMore"))};return t((()=>b.total),(()=>{b.current*b.size>=+b.total?j.value="nomore":j.value="loadmore"}),{deep:!0,immediate:!0}),_({initTop:()=>{z.value=20,y((()=>{z.value=0}))},loadFinish:()=>{setTimeout((()=>{L.value=!1}),200)}}),(e,o)=>{const a=h(w("up-empty"),x),t=h(w("u-loadmore"),g),y=m,_=r;return l(),s(_,{class:"scroll-view-box","refresher-enabled":e.refresh,"refresher-triggered":L.value,"scroll-top":z.value,onScrolltolower:I,onScroll:o[0]||(o[0]=e=>T("scroll",e)),onRefresherrefresh:E,"scroll-anchoring":!0,"enable-flex":!0,"scroll-y":""},{default:n((()=>[u(y,{class:"scroll-view-content"},{default:n((()=>[d(e.$slots,"default",{},void 0,!0),d(e.$slots,"list-cont",{},void 0,!0),e.showMore?i((l(),s(y,{key:0,class:v(["load-more",{tops:e.istop}])},{default:n((()=>[e.total?c("",!0):(l(),s(a,{key:0,icon:"http://cdn.uviewui.com/uview/empty/data.png"})),e.total&&b.showBottomEmptyTips?(l(),s(t,{key:1,"loading-text":M.value,"loadmore-text":R.value,"nomore-text":f(k),status:j.value,line:""},null,8,["loading-text","loadmore-text","nomore-text","status"])):c("",!0)])),_:1},8,["class"])),[[p,!!f(k)]]):c("",!0)])),_:3})])),_:3},8,["refresher-enabled","refresher-triggered","scroll-top"])}}}),[["__scopeId","data-v-2fe9af0c"]]);export{B as L};
