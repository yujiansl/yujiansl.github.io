import{d as a,r as e,E as t,c as l,w as s,i as u,I as r,aq as n,K as c,N as d,o,a as A,O as i,g as f,t as E,u as m,b as p,P as w,F as P,e as I,Q as G,W as N,_ as g}from"./index-CK4DGatK.js";import{N as v}from"./NavBar.DSs5OGCU.js";import{u as B}from"./useQuery.3dd8K18V.js";const R=g(a({__name:"index",setup(a){const g=B(),R=e({}),_=e(!1),C=e(!1),Q=e([{name:"设置整备项",code:"SERVICE_ITEM"},{name:"设置修理厂",code:"REPAIR_SHOP"}]),S=e([{name:"待整备",code:"Readiness"},{name:"整备中",code:"UNDER_PREPARATION"},{name:"整备完成",code:"COMPLETE_REPAIR"}]);t((()=>{h()}));const h=()=>{uni.$u.http.get("/product/carProductPrepare/workOrder",{params:{carProductId:g.value.id}}).then((a=>{R.value=a.data}))},F=a=>{switch(a){case"Readiness":return"待整备";case"UNDER_PREPARATION":return"整备中";case"COMPLETE_REPAIR":return"整备完成";default:return""}},T=a=>{switch(a){case"noPayment":return"待付款";case"paymentSuccess":return"付款成功";case"cancel":return"取消";default:return""}},L=a=>{G(`/pages/workOrder/setList?pageKey=${a.code}`)},D=a=>{uni.$u.http.put("/product/merchant/car/product/editReadiness",{carProductId:g.value.id,carStockStatus:a.code}).then((()=>{h()}))};return(a,e)=>{const t=u,B=w,h=N,x=r(c("up-action-sheet"),n),z=d("permissionBtn");return o(),l(t,{class:"page f-c-s"},{default:s((()=>[A(v,null,{title:s((()=>{var a;return[f("整备工单（"+E((null==(a=m(R).carProductPrepares)?void 0:a.length)||0)+"）",1)]})),right:s((()=>[A(t,{class:"nav-right",onClick:e[0]||(e[0]=a=>_.value=!0)},{default:s((()=>[f("设置")])),_:1})])),_:1}),A(t,{class:"content"},{default:s((()=>[A(t,{class:"statis"},{default:s((()=>[A(t,null,{default:s((()=>[A(t,{onClick:e[1]||(e[1]=a=>C.value=!0)},{default:s((()=>{var a;return[f(E(F(null==(a=m(R))?void 0:a.stockStatus)||"待整备")+" ",1),A(B,{class:"icon_edit",src:"data:image/png;base64,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",mode:"aspectFill"})]})),_:1}),A(t,null,{default:s((()=>[f("整备状态")])),_:1})])),_:1}),A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f(E(m(R).amount||0),1)])),_:1}),A(t,null,{default:s((()=>[f("合计费用(元)")])),_:1})])),_:1})])),_:1}),A(t,{class:"title"},{default:s((()=>{var a;return[f("整备工单（"+E((null==(a=m(R).carProductPrepares)?void 0:a.length)||0)+"）",1)]})),_:1}),(o(!0),p(P,null,I(m(R).carProductPrepares,((e,u)=>(o(),l(t,{class:"list-item",key:u,onClick:t=>("toPage"in a?a.toPage:m(G))(`/pages/workOrder/detail?id=${e.id}`)},{default:s((()=>[A(t,{class:"head"},{default:s((()=>[A(t,{class:"flex-1 one-line"},{default:s((()=>[f(E(e.relationsName),1)])),_:2},1024),A(t,{class:"status"},{default:s((()=>[f(E(T(e.paymentStatus)),1)])),_:2},1024)])),_:2},1024),A(t,{class:"info"},{default:s((()=>[A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f("总额")])),_:1}),A(t,null,{default:s((()=>[f(E(e.relationsAmount||0)+"元",1)])),_:2},1024)])),_:2},1024),A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f("整备专员")])),_:1}),A(t,null,{default:s((()=>[f(E(e.prepareUserName||"-"),1)])),_:2},1024)])),_:2},1024),A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f("修理厂")])),_:1}),A(t,null,{default:s((()=>[f(E(e.factoryName||"-"),1)])),_:2},1024)])),_:2},1024),A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f("整备时间")])),_:1}),A(t,null,{default:s((()=>{var a,t;return[f(E(null==(a=e.prepareStartTime)?void 0:a.replace(/-/g,"/"))+"-"+E(null==(t=e.prepareEndTime)?void 0:t.replace(/-/g,"/")),1)]})),_:2},1024)])),_:2},1024),A(t,null,{default:s((()=>[A(t,null,{default:s((()=>[f("付款方式")])),_:1}),A(t,null,{default:s((()=>[f(E("CORPORATE_PAYMENT"==e.paymentMethods?"公司付款":"EMPLOYEE_ADVANCE"==e.paymentMethods?"员工垫付":"-"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),i((o(),l(t,{class:"bottom-btn add-btn"},{default:s((()=>[A(h,{class:"save-btn w_100",onClick:e[2]||(e[2]=e=>("toPage"in a?a.toPage:m(G))(`/pages/workOrder/addOrder?carProductId=${m(g).id}`))},{default:s((()=>[f(" 新增整备 ")])),_:1})])),_:1})),[[z,["product:readyCondition:add"]]]),A(x,{show:m(_),onSelect:L,onClose:e[3]||(e[3]=a=>_.value=!1),actions:m(Q),cancelText:"取消",round:"10"},null,8,["show","actions"]),A(x,{show:m(C),onSelect:D,onClose:e[4]||(e[4]=a=>C.value=!1),actions:m(S),description:"修改整备状态",cancelText:"取消"},null,8,["show","actions"])])),_:1})}}}),[["__scopeId","data-v-d5850ec3"]]);export{R as default};
